## Создание и удаление баз данных в PostgreSQL

База данных в PostgreSQL представляет собой набор таблиц, функций, представлений и других объектов, объединенных общей логикой и доступом.  В PostgreSQL можно хранить множество баз данных на одном сервере, что позволяет разделять данные и пользователей для различных приложений или проектов.

### Создание баз данных

Для создания баз данных в PostgreSQL используются различные методы, каждый из которых подходит для определенных сценариев.

**1. Создание базы данных с помощью утилиты psql:**

*   **Шаг 1:** Подключитесь к серверу PostgreSQL, используя утилиту командной строки **psql**. Вам необходимо указать имя пользователя, хост и, при необходимости, порт и имя базы данных для подключения:

    ```bash
    psql -U <имя_пользователя> -h <хост> -p <порт> -d <имя_базы_данных>
    ```

    Если вы подключаетесь к базе данных по умолчанию (обычно это `postgres`) на локальном хосте с настройками по умолчанию, то можно использовать упрощенную команду:

    ```bash
    psql -U <имя_пользователя>
    ```

*   **Шаг 2:** После подключения выполните команду `CREATE DATABASE`, указав имя новой базы данных:

    ```sql
    CREATE DATABASE <имя_базы_данных>;
    ```

    Например, чтобы создать базу данных с именем `mydatabase`:

    ```sql
    CREATE DATABASE mydatabase;
    ```

*   **Шаг 3:** После выполнения команды вы увидите сообщение об успешном создании базы данных.

**2. Создание базы данных с указанием владельца и кодировки:**

При необходимости можно указать владельца базы данных и кодировку символов при ее создании. 

```sql
CREATE DATABASE <имя_базы_данных>
    OWNER <имя_пользователя>
    ENCODING '<кодировка>';
```

*   `<имя_пользователя>` - имя пользователя, который будет владеть базой данных.
*   `<кодировка>` - кодировка символов, используемая базой данных (например, `UTF8`).

**Пример:**

```sql
CREATE DATABASE mydatabase
    OWNER john_doe
    ENCODING 'UTF8';
```

**3. Создание базы данных из шаблона:**

PostgreSQL позволяет создавать новые базы данных на основе шаблонов. Шаблон - это предопределенный набор объектов и настроек, которые будут скопированы в новую базу данных. По умолчанию используется шаблон `template1`.

```sql
CREATE DATABASE <имя_базы_данных> TEMPLATE <имя_шаблона>;
```

*   `<имя_шаблона>` - имя шаблона, который будет использован для создания базы данных.

**Пример:**

```sql
CREATE DATABASE new_database TEMPLATE template0;
```

### Удаление баз данных

Для удаления баз данных в PostgreSQL используется команда `DROP DATABASE`. 

**1. Удаление базы данных:**

```sql
DROP DATABASE <имя_базы_данных>;
```

**Пример:**

```sql
DROP DATABASE mydatabase;
```

**2. Удаление базы данных с принудительным отключением подключений:**

Если к базе данных есть активные подключения, то ее удаление завершится ошибкой. Для принудительного отключения подключений и удаления базы данных используется параметр `WITH (FORCE)`:

```sql
DROP DATABASE <имя_базы_данных> WITH (FORCE);
```

**Пример:**

```sql
DROP DATABASE mydatabase WITH (FORCE);
```

**Важно:** Будьте осторожны при использовании параметра `WITH (FORCE)`, так как это может привести к потере данных.

### Проверка существования базы данных

Перед созданием или удалением базы данных рекомендуется проверить ее существование, чтобы избежать ошибок. Для этого используется функция `EXISTS`:

```sql
SELECT EXISTS (SELECT 1 FROM pg_database WHERE datname = '<имя_базы_данных>');
```

Функция `EXISTS` вернет `true`, если база данных существует, и `false` в противном случае.

**Пример:**

```sql
SELECT EXISTS (SELECT 1 FROM pg_database WHERE datname = 'mydatabase');
```

Данная команда вернет `true`, если база данных `mydatabase` существует. 
