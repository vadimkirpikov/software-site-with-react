## Соединение таблиц в PostgreSQL

Работа с базами данных часто подразумевает получение данных из нескольких таблиц одновременно. Для этого используются операции соединения (JOIN). PostgreSQL предоставляет несколько типов соединений, каждый из которых подходит для разных сценариев.

### INNER JOIN

`INNER JOIN`  - наиболее распространенный тип соединения. Он возвращает строки только при наличии совпадений в обеих соединяемых таблицах, основываясь на указанном условии.

**Пример:**

Представим две таблицы: "authors" (авторы) и "books" (книги).

**Таблица "authors":**

| id | name |
|---|---|
| 1 | Александр Пушкин |
| 2 | Лев Толстой |
| 3 | Федор Достоевский |

**Таблица "books":**

| id | title | author_id |
|---|---|---|
| 1 | Евгений Онегин | 1 |
| 2 | Война и мир | 2 |
| 3 | Анна Каренина | 2 |
| 4 | Преступление и наказание | 3 |

**Задача:**

Получить список книг с информацией об авторе.

**Запрос:**

```sql
SELECT 
    b.title AS "Название книги",
    a.name AS "Автор"
FROM 
    books AS b
INNER JOIN 
    authors AS a ON b.author_id = a.id;
```

**Результат:**

| Название книги | Автор |
|---|---|
| Евгений Онегин | Александр Пушкин |
| Война и мир | Лев Толстой |
| Анна Каренина | Лев Толстой |
| Преступление и наказание | Федор Достоевский |

**Пояснение:**

1. `SELECT b.title AS "Название книги", a.name AS "Автор"` - выбираем столбцы "title" из таблицы "books" (обозначаем его как "Название книги") и "name" из таблицы "authors" (обозначаем как "Автор").
2. `FROM books AS b` - указываем первую таблицу для соединения - "books", и присваиваем ей алиас "b".
3. `INNER JOIN authors AS a` - указываем вторую таблицу для соединения - "authors", и присваиваем ей алиас "a",  используем `INNER JOIN`.
4. `ON b.author_id = a.id` - указываем условие соединения: столбец "author_id" из таблицы "books" должен быть равен столбцу "id" из таблицы "authors".

### LEFT JOIN

`LEFT JOIN` возвращает все строки из левой таблицы (та, которая указана первой в запросе), даже если в правой таблице нет соответствующих строк. Если в правой таблице нет совпадений, то в результирующей таблице соответствующие столбцы будут заполнены значениями `NULL`.

**Пример:**

**Задача:**

Получить список всех авторов и их книг (если таковые имеются).

**Запрос:**

```sql
SELECT 
    a.name AS "Автор",
    b.title AS "Название книги"
FROM 
    authors AS a
LEFT JOIN 
    books AS b ON a.id = b.author_id;
```

**Результат:**

| Автор | Название книги |
|---|---|
| Александр Пушкин | Евгений Онегин |
| Лев Толстой | Война и мир |
| Лев Толстой | Анна Каренина |
| Федор Достоевский | Преступление и наказание |

**Пояснение:**

В данном случае, даже если автор не написал ни одной книги (в таблице "books" нет записи с соответствующим `author_id`), он все равно будет отображен в результирующей таблице, а в столбце "Название книги" будет значение `NULL`.

### RIGHT JOIN

`RIGHT JOIN` работает аналогично `LEFT JOIN`, но возвращает все строки из **правой** таблицы (вторая таблица в запросе), и дополняет результат строками из левой таблицы, если есть совпадения. 

**Пример:**

**Задача:**

Получить список всех книг и их авторов (даже если автор неизвестен).

**Запрос:**

```sql
SELECT 
    a.name AS "Автор",
    b.title AS "Название книги"
FROM 
    authors AS a
RIGHT JOIN 
    books AS b ON a.id = b.author_id;
```

**Результат:**

(Результат будет идентичен результату `INNER JOIN` в данном случае, так как все книги имеют авторов в базе данных)

**Пояснение:**

Если бы в таблице "books" была книга без указанного `author_id`, то в результирующей таблице в столбце "Автор" появилось бы значение `NULL`.


Это основные типы соединений таблиц в PostgreSQL. Выбор конкретного типа зависит от задачи и структуры данных. Важно понимать разницу между ними, чтобы писать эффективные и корректные SQL-запросы.
