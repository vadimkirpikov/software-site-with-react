## Условные операторы (WHERE, AND, OR, NOT) в PostgreSQL

Условные операторы играют важную роль в написании SQL-запросов, позволяя выбирать данные, соответствующие определенным критериям. В PostgreSQL для фильтрации данных используются операторы `WHERE`, `AND`, `OR` и `NOT`.

### Оператор WHERE

Оператор `WHERE` используется для определения условий, которым должны соответствовать строки, возвращаемые запросом. Он следует за предложением `FROM` и принимает логическое выражение в качестве аргумента.

**Синтаксис:**

```sql
SELECT column1, column2, ...
FROM table_name
WHERE condition;
```

**Пример:**

```sql
-- Выбрать все заказы, сделанные после 1 января 2023 года
SELECT *
FROM orders
WHERE order_date > '2023-01-01';
```

В этом примере оператор `WHERE` фильтрует таблицу `orders` и возвращает только те строки, где значение столбца `order_date` больше '2023-01-01'.

### Логические операторы: AND, OR, NOT

Логические операторы используются для комбинирования нескольких условий в операторе `WHERE`.

*   **AND:** Возвращает `TRUE`, только если оба операнда истинные.

```sql
-- Выбрать все заказы, сделанные после 1 января 2023 года и имеющие статус "выполнен"
SELECT *
FROM orders
WHERE order_date > '2023-01-01' AND status = 'выполнен';
```

*   **OR:** Возвращает `TRUE`, если хотя бы один из операндов истинный.

```sql
-- Выбрать все заказы, сделанные после 1 января 2023 года или имеющие статус "отменен"
SELECT *
FROM orders
WHERE order_date > '2023-01-01' OR status = 'отменен';
```

*   **NOT:** Инвертирует логическое значение своего операнда.

```sql
-- Выбрать все заказы, статус которых не "выполнен"
SELECT *
FROM orders
WHERE NOT status = 'выполнен';
```

### Приоритет операторов

Важно помнить о приоритете операторов при комбинировании `AND`, `OR` и `NOT`. `NOT` имеет наивысший приоритет, затем следует `AND`, а затем `OR`. 

**Пример:**

```sql
-- Выбрать заказы, сделанные после 1 января 2023 года, 
-- которые не имеют статус "выполнен" и не имеют статус "отменен"
SELECT *
FROM orders
WHERE order_date > '2023-01-01' AND NOT status = 'выполнен' AND NOT status = 'отменен';
```

В этом примере сначала выполняется операция `NOT`, затем `AND`, а затем `OR`. Для изменения порядка выполнения операций можно использовать скобки.

### Использование скобок для группировки условий

Скобки позволяют группировать условия и изменять порядок их выполнения. 

**Пример:**

```sql
-- Выбрать заказы, сделанные после 1 января 2023 года, 
-- которые имеют статус "выполнен" или "отправлен"
SELECT *
FROM orders
WHERE order_date > '2023-01-01' AND (status = 'выполнен' OR status = 'отправлен');
```

В этом примере сначала оценивается выражение в скобках, а затем результат комбинируется с условием `order_date > '2023-01-01'` с помощью оператора `AND`.

### Комбинирование операторов

Логические операторы можно комбинировать для создания сложных условий фильтрации.

**Пример:**

```sql
-- Выбрать заказы, сделанные после 1 января 2023 года, 
-- которые имеют статус "выполнен" или "отправлен", 
-- но не "отменен"
SELECT *
FROM orders
WHERE order_date > '2023-01-01' 
  AND (status = 'выполнен' OR status = 'отправлен')
  AND NOT status = 'отменен';
```

В этом примере комбинируются операторы `AND`, `OR` и `NOT` для создания комплексного условия фильтрации.

### Заключение

Условные операторы `WHERE`, `AND`, `OR` и `NOT` предоставляют мощный механизм фильтрации данных в PostgreSQL. Используя эти операторы, вы можете создавать сложные условия для выбора только тех данных, которые вам нужны. Не забывайте о приоритете операторов и используйте скобки для группировки условий и изменения порядка их выполнения. 
