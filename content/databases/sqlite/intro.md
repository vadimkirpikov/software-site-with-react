## Сортировка данных (ORDER BY) в SQLite

Зачастую при выборке данных из таблицы возникает необходимость вывести их в определенном порядке. Для этого в SQLite используется предложение `ORDER BY`. С его помощью можно отсортировать строки результирующего набора по значениям одного или нескольких столбцов.

### Базовый синтаксис

Общий синтаксис предложения `ORDER BY` выглядит следующим образом:

```sql
SELECT column1, column2, ...
FROM table_name
ORDER BY column1 [ASC | DESC], column2 [ASC | DESC], ...;
```

* **column1, column2, ...** – имена столбцов, по которым будет производиться сортировка.
* **table_name** – имя таблицы, из которой выбираются данные.
* **ASC** – ключевое слово, указывающее на сортировку по возрастанию (по умолчанию).
* **DESC** – ключевое слово, указывающее на сортировку по убыванию.

### Сортировка по одному столбцу

Рассмотрим простой пример сортировки данных по одному столбцу. Предположим, у нас есть таблица `employees` со следующими данными:

| id | name | salary | department |
|---|---|---|---|
| 1 | Иван | 50000 | IT |
| 2 | Петр | 60000 | Sales |
| 3 | Анна | 45000 | Marketing |
| 4 | Ольга | 70000 | IT |

**Пример 1:** Вывести список сотрудников, отсортированных по имени в алфавитном порядке:

```sql
SELECT * FROM employees ORDER BY name;
```

Результатом выполнения запроса будет следующий набор данных:

| id | name | salary | department |
|---|---|---|---|
| 3 | Анна | 45000 | Marketing |
| 1 | Иван | 50000 | IT |
| 2 | Петр | 60000 | Sales |
| 4 | Ольга | 70000 | IT |

**Пример 2:** Вывести список сотрудников, отсортированных по зарплате в порядке убывания:

```sql
SELECT * FROM employees ORDER BY salary DESC;
```

Результат:

| id | name | salary | department |
|---|---|---|---|
| 4 | Ольга | 70000 | IT |
| 2 | Петр | 60000 | Sales |
| 1 | Иван | 50000 | IT |
| 3 | Анна | 45000 | Marketing |

### Сортировка по нескольким столбцам

`ORDER BY` позволяет сортировать данные и по нескольким столбцам одновременно. В этом случае SQLite сначала сортирует строки по первому указанному столбцу. Затем, если в нескольких строках значения первого столбца совпадают, сортировка производится по второму столбцу и так далее.

**Пример 3:** Вывести список сотрудников, отсортированных по отделу, а внутри каждого отдела – по зарплате в порядке убывания:

```sql
SELECT * FROM employees ORDER BY department, salary DESC;
```

Результат:

| id | name | salary | department |
|---|---|---|---|
| 1 | Иван | 50000 | IT |
| 4 | Ольга | 70000 | IT |
| 3 | Анна | 45000 | Marketing |
| 2 | Петр | 60000 | Sales |

### Сортировка по числовым и текстовым значениям

Важно помнить, что SQLite сортирует текстовые значения в лексикографическом порядке, учитывая регистр символов. 

**Пример 4:** Сортировка строк с разным регистром:

```sql
SELECT 'apple', 'Apple', 'Banana'
ORDER BY 1;
```

Результат:

| | |
|---|---|
| Apple | |
| Banana | |
| apple | |

Для сортировки текстовых значений без учета регистра можно использовать функции `UPPER()` или `LOWER()`.

**Пример 5:** Сортировка без учета регистра:

```sql
SELECT 'apple', 'Apple', 'Banana'
ORDER BY LOWER(1);
```

Результат:

| | |
|---|---|
| apple | |
| Apple | |
| Banana | |

### Сортировка по результатам выражений

В предложении `ORDER BY` можно использовать не только имена столбцов, но и результаты вычислений.

**Пример 6:** Вывести список сотрудников с рассчитанной премией (10% от зарплаты), отсортированный по размеру премии:

```sql
SELECT name, salary, salary * 0.1 AS bonus
FROM employees
ORDER BY bonus DESC; 
```

Результат:

| name | salary | bonus |
|---|---|---|
| Ольга | 70000 | 7000 |
| Петр | 60000 | 6000 |
| Иван | 50000 | 5000 |
| Анна | 45000 | 4500 |


## Заключение

Предложение `ORDER BY` является мощным инструментом для управления порядком вывода данных в SQLite. Оно позволяет гибко настраивать сортировку по одному или нескольким столбцам, с учетом различных условий и типов данных. 
