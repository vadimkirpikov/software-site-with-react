## Интерфейсы для работы с SQLite

SQLite предоставляет несколько интерфейсов для взаимодействия с базой данных. Выбор подходящего интерфейса зависит от ваших потребностей и предпочтений в программировании. Рассмотрим основные из них.

### Интерфейс командной строки

Простейший способ взаимодействия с SQLite – использование интерфейса командной строки (CLI). Он позволяет выполнять SQL-запросы напрямую, без необходимости написания кода. 

**Шаг 1:** Откройте терминал или командную строку.

**Шаг 2:** Запустите SQLite CLI, передав имя файла базы данных:

```bash
sqlite3 mydatabase.db
```

Если файл не существует, он будет создан.

**Шаг 3:** Выполняйте SQL-запросы, завершая каждый точкой с запятой:

```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY,
    name TEXT NOT NULL,
    email TEXT UNIQUE
);
```

**Шаг 4:** Для выхода из CLI используйте команду `.quit`:

```sql
.quit
```

CLI удобен для администрирования, тестирования и выполнения разовых запросов.

### C API

C API – это низкоуровневый интерфейс, предоставляющий полный доступ к функциональности SQLite. Он подходит для разработчиков, которым требуется максимальная производительность и гибкость.

**Пример использования C API:**

```c
#include <stdio.h>
#include <sqlite3.h>

int main(void) {
  sqlite3 *db;
  char *err_msg = 0;
  
  // Открытие соединения с базой данных
  int rc = sqlite3_open("mydatabase.db", &db);
  if (rc != SQLITE_OK) {
    fprintf(stderr, "Ошибка открытия базы данных: %s\n", sqlite3_errmsg(db));
    sqlite3_close(db);
    return 1;
  }

  // Выполнение SQL-запроса
  rc = sqlite3_exec(db, "CREATE TABLE IF NOT EXISTS products (id INTEGER PRIMARY KEY, name TEXT, price REAL)", 0, 0, &err_msg);
  if (rc != SQLITE_OK) {
    fprintf(stderr, "Ошибка SQL: %s\n", err_msg);
    sqlite3_free(err_msg);
    sqlite3_close(db);
    return 1;
  }

  // Закрытие соединения
  sqlite3_close(db);
  return 0;
}
```

**Описание кода:**

1. Подключение необходимых заголовочных файлов.
2. Открытие соединения с базой данных с помощью `sqlite3_open()`.
3. Выполнение SQL-запроса с помощью `sqlite3_exec()`.
4. Обработка ошибок с помощью `sqlite3_errmsg()`.
5. Закрытие соединения с базой данных с помощью `sqlite3_close()`.

### Языковые обёртки

Для большинства популярных языков программирования существуют обёртки над C API, упрощающие работу с SQLite. 

| Язык программирования | Название обёртки |
|---|---|
| Python | sqlite3, APSW |
| PHP | PDO, SQLite3 |
| Java | JDBC, SQLiteJDBC |
| JavaScript (Node.js) | sqlite3, better-sqlite3 |

**Пример использования Python обёртки `sqlite3`:**

```python
import sqlite3

# Соединение с базой данных
conn = sqlite3.connect('mydatabase.db')

# Создание курсора
cursor = conn.cursor()

# Выполнение SQL-запроса
cursor.execute("CREATE TABLE IF NOT EXISTS customers (id INTEGER PRIMARY KEY, name TEXT, address TEXT)")

# Зафиксировать изменения
conn.commit()

# Закрыть соединение
conn.close()
```

**Описание кода:**

1. Импортирование модуля `sqlite3`.
2. Соединение с базой данных с помощью `sqlite3.connect()`.
3. Создание курсора для выполнения запросов.
4. Выполнение SQL-запроса с помощью `cursor.execute()`.
5. Фиксация изменений с помощью `conn.commit()`.
6. Закрытие соединения с базой данных с помощью `conn.close()`.

Языковые обёртки обеспечивают более высокоуровневый и удобный способ работы с SQLite, чем C API.

### Выбор интерфейса

Выбор оптимального интерфейса зависит от конкретной задачи:

* **CLI** подходит для администрирования, тестирования и разовых запросов.
* **C API** обеспечивает максимальную производительность и гибкость, но требует большего количества кода.
* **Языковые обёртки** предоставляют удобный и простой в использовании интерфейс, но могут незначительно снижать производительность.

В дальнейшем руководстве мы будем использовать Python обёртку `sqlite3`, как наиболее распространенный и удобный способ работы с SQLite. 
