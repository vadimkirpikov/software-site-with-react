## Индексы в SQLite

Индексы - это структуры данных, которые используются для ускорения поиска данных в таблице. Они похожи на оглавление книги: вместо того, чтобы просматривать каждую страницу в поисках нужной информации, вы можете использовать оглавление, чтобы найти нужную страницу гораздо быстрее.

В SQLite индексы могут быть созданы для одного или нескольких столбцов таблицы. Когда вы создаете индекс, SQLite создает отдельную структуру данных, которая содержит значения индексированных столбцов и указатель на соответствующую строку в таблице.

### Типы индексов в SQLite

SQLite поддерживает несколько типов индексов:

* **UNIQUE**: Этот тип индекса гарантирует, что все значения в индексированных столбцах уникальны. 
* **FULLTEXT**: Этот тип индекса используется для полнотекстового поиска. Подробнее о полнотекстовом поиске можно узнать в соответствующем разделе руководства.
* **R-Tree**:  Этот тип индекса используется для пространственных данных. R-Tree индексы не рассматриваются в рамках данного раздела.

Если тип индекса не указан явно при создании, по умолчанию используется индекс типа **B-Tree**.

### Создание индексов

Для создания индекса используется команда `CREATE INDEX`:

```sql
CREATE [UNIQUE] INDEX <имя_индекса>
ON <имя_таблицы> (<имя_столбца> [, <имя_столбца> ...]);
```

* `UNIQUE`: Ключевое слово, указывающее на создание уникального индекса.
* `<имя_индекса>`: Имя создаваемого индекса.
* `<имя_таблицы>`: Имя таблицы, для которой создается индекс.
* `<имя_столбца>`: Имя столбца, по которому будет создан индекс. Можно указать несколько столбцов.

#### Пример создания индекса:

```sql
-- Создание таблицы "users"
CREATE TABLE users (
    id INTEGER PRIMARY KEY,
    name TEXT,
    email TEXT
);

-- Создание индекса на столбец "email"
CREATE INDEX users_email_idx ON users (email);

-- Создание уникального индекса на столбцы "name" и "email"
CREATE UNIQUE INDEX users_name_email_idx ON users (name, email);
```

В этом примере мы сначала создаем таблицу `users`, а затем создаем два индекса:

* `users_email_idx`: Индекс типа B-Tree на столбец `email`.
* `users_name_email_idx`: Уникальный индекс на столбцы `name` и `email`. 

### Использование индексов

После создания индексы автоматически используются SQLite для ускорения выполнения запросов. Вам не нужно указывать, какой индекс использовать - SQLite сделает это за вас.

Рассмотрим пример. У нас есть таблица `users` с миллионом записей. Мы хотим найти пользователя с адресом электронной почты `example@example.com`. 

Без индекса SQLite пришлось бы просмотреть все миллион записей в таблице, чтобы найти нужную.

С индексом на столбец `email` SQLite может быстро найти нужную запись, используя индекс.

### Когда создавать индексы

Индексы могут значительно ускорить выполнение запросов, но они также занимают место на диске. Поэтому важно создавать индексы только для тех столбцов, которые часто используются в условиях поиска (`WHERE`) запросов. 

#### Рекомендации по созданию индексов:

* Создавайте индексы для столбцов, используемых в условиях `WHERE`, `JOIN`, `ORDER BY` и `GROUP BY`.
* Не создавайте индексы для таблиц с небольшим количеством строк.
* Не создавайте индексы для столбцов, содержащих большое количество повторяющихся значений.
* Не создавайте слишком много индексов для одной таблицы. 

### Удаление индексов

Для удаления индекса используется команда `DROP INDEX`:

```sql
DROP INDEX <имя_индекса>;
```

#### Пример удаления индекса:

```sql
-- Удаление индекса "users_email_idx"
DROP INDEX users_email_idx;
```

### Просмотр индексов

Для просмотра информации о существующих индексах можно воспользоваться командой `.indices`:

```sql
.indices <имя_таблицы>
```

### Заключение

Использование индексов является важным аспектом оптимизации производительности базы данных SQLite. Правильное использование индексов позволяет значительно ускорить выполнение запросов. 
