## Вставка данных в таблицы SQLite

Оператор `INSERT INTO` используется для добавления новых записей в таблицу базы данных SQLite. Существует два основных способа вставки данных:

1. **Вставка значений в определенные столбцы:**

   В этом случае, мы указываем имена столбцов, в которые хотим добавить значения, и соответствующие значения для каждого столбца. 

   **Синтаксис:**

   ```sql
   INSERT INTO имя_таблицы (столбец1, столбец2, ...) VALUES (значение1, значение2, ...);
   ```

   **Пример:**

   Допустим, у нас есть таблица `users` со столбцами `id`, `name` и `email`:

   ```sql
   CREATE TABLE users (
       id INTEGER PRIMARY KEY,
       name TEXT,
       email TEXT
   );
   ```

   Чтобы добавить нового пользователя с именем "Иван" и адресом электронной почты "ivan@example.com", мы выполним следующий запрос:

   ```sql
   INSERT INTO users (name, email) VALUES ('Иван', 'ivan@example.com');
   ```

   Обратите внимание: 

   * Столбец `id` не указан в запросе, так как он имеет тип `INTEGER PRIMARY KEY` и автоматически увеличивается.
   * Значения текстовых данных заключаются в одинарные кавычки.

2. **Вставка значений во все столбцы:**

   Если требуется добавить значения во все столбцы таблицы, можно не указывать их имена. 

   **Синтаксис:**

   ```sql
   INSERT INTO имя_таблицы VALUES (значение1, значение2, ...);
   ```

   **Пример:**

   Чтобы добавить нового пользователя с `id` 2, именем "Петр" и адресом "petr@example.com" в таблицу `users`, выполните:

   ```sql
   INSERT INTO users VALUES (2, 'Петр', 'petr@example.com');
   ```

   **Важно:**

   * При использовании этого метода, порядок значений должен строго соответствовать порядку столбцов в таблице.
   * Необходимо указать значения для всех столбцов, включая столбцы с ограничением `NOT NULL`, если оно не обрабатывается значением по умолчанию.

### Вставка нескольких строк данных

SQLite позволяет вставлять несколько строк данных с помощью одного оператора `INSERT INTO`. Для этого используется синтаксис с ключевым словом `VALUES` и списком значений для каждой строки, разделенных запятыми.

**Пример:**

Добавим двух пользователей в таблицу `users`:

```sql
INSERT INTO users (name, email) VALUES 
    ('Мария', 'maria@example.com'),
    ('Алексей', 'alex@example.com');
```

### Обработка ошибок при вставке данных

При выполнении оператора `INSERT INTO` могут возникать ошибки, например, нарушение ограничений целостности данных. SQLite предоставляет следующие способы обработки ошибок:

* **Использование кода возврата:**

  Функция `sqlite3_exec()` возвращает код, указывающий на успешность выполнения запроса. Код `SQLITE_OK` (0) означает успешное выполнение.

* **Проверка переменной `sqlite3_errmsg()`:**

  В случае ошибки, функция `sqlite3_errmsg()` возвращает текстовое описание ошибки.

**Пример:**

```c
#include <stdio.h>
#include <sqlite3.h>

int main() {
  sqlite3 *db;
  char *err_msg = 0;
  int rc = sqlite3_open("test.db", &db);

  if (rc != SQLITE_OK) {
    fprintf(stderr, "Cannot open database: %s\n", sqlite3_errmsg(db));
    sqlite3_close(db);
    return 1;
  }

  char *sql = "INSERT INTO users (id, name, email) VALUES (1, 'Иван', 'ivan@example.com')";

  rc = sqlite3_exec(db, sql, 0, 0, &err_msg);

  if (rc != SQLITE_OK ) {
    fprintf(stderr, "SQL error: %s\n", err_msg);
    sqlite3_free(err_msg);        
  } else {
    fprintf(stdout, "Запись успешно добавлена\n");
  }

  sqlite3_close(db);
  return 0;
}
```

В этом примере:

* Проверяется код возврата функции `sqlite3_exec()`.
* В случае ошибки выводится сообщение, полученное с помощью `sqlite3_errmsg()`.
* Память, выделенная для сообщения об ошибке, освобождается с помощью `sqlite3_free()`.

### Заключение

Вставка данных -  важная часть работы с базами данных. SQLite предоставляет простой и гибкий синтаксис оператора `INSERT INTO`, который позволяет добавлять как одиночные, так и множественные записи в таблицу, а также обрабатывать возникающие ошибки. 
