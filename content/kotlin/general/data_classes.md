## Data-классы в Kotlin

Data-классы в Kotlin - это классы, основное назначение которых хранение данных. Компилятор Kotlin предоставляет множество полезных функций для data-классов "из коробки", что делает их использование более лаконичным и удобным по сравнению с обычными классами.

### Объявление data-класса

Для объявления data-класса используется ключевое слово `data` перед ключевым словом `class`:

```kotlin
data class User(val name: String, val age: Int)
```

В этом примере мы объявили data-класс `User` с двумя свойствами: `name` типа `String` и `age` типа `Int`. Оба свойства объявлены как неизменяемые (`val`).

### Функции, генерируемые компилятором

Для каждого data-класса компилятор Kotlin автоматически генерирует следующие функции:

* `equals()` и `hashCode()`: для сравнения экземпляров data-классов по значению их свойств.
* `toString()`: для получения строкового представления экземпляра data-класса.
* `componentN()`: функции-компоненты для деструктуризации data-класса.
* `copy()`: для создания копии экземпляра data-класса с возможностью изменения значений некоторых свойств.

#### Пример использования сгенерированных функций:

```kotlin
fun main() {
    val user1 = User("Иван", 30)
    val user2 = User("Иван", 30)

    // equals() и hashCode()
    println(user1 == user2) // true
    println(user1.hashCode() == user2.hashCode()) // true

    // toString()
    println(user1) // User(name=Иван, age=30)

    // componentN()
    val (name, age) = user1
    println("Имя: $name, Возраст: $age")

    // copy()
    val user3 = user1.copy(age = 35)
    println(user3) // User(name=Иван, age=35)
}
```

### Деструктуризация объявлений

Одной из удобных особенностей data-классов является возможность их деструктуризации. Деструктуризация позволяет разложить экземпляр data-класса на составляющие его свойства:

```kotlin
val user = User("Иван", 30)

val (name, age) = user 

println("Имя: $name, Возраст: $age") // Имя: Иван, Возраст: 30
```

В этом примере мы деструктурировали экземпляр класса `User` на две переменные: `name` и `age`.

### Копирование data-классов

Функция `copy()` позволяет создавать копии data-классов с возможностью изменения значений некоторых свойств:

```kotlin
val user1 = User("Иван", 30)

val user2 = user1.copy(age = 35) // создаем копию user1 с измененным возрастом

println(user1) // User(name=Иван, age=30)
println(user2) // User(name=Иван, age=35)
```

В этом примере мы создали новый экземпляр `user2`, который является копией `user1`, но с возрастом 35.

### Data-классы и наследование

Data-классы могут наследоваться от других классов и интерфейсов, однако сами не могут быть объявлены как `open`. Это означает, что от data-классов нельзя наследоваться.

```kotlin
interface Printable {
    fun printInfo()
}

data class User(val name: String, val age: Int) : Printable {
    override fun printInfo() {
        println("Имя: $name, Возраст: $age")
    }
}
```

### Ограничения data-классов

Data-классы имеют некоторые ограничения:

* Data-классы не могут быть `open`, `abstract`, `sealed` или `inner`.
* Первичный конструктор data-класса должен иметь как минимум один параметр.
* Все параметры первичного конструктора data-класса должны быть помечены как `val` или `var`.
* Data-классы не могут содержать явных объявлений `equals()`, `hashCode()` и `toString()`.

### Заключение

Data-классы - это мощный инструмент в Kotlin, который упрощает работу с данными. Они позволяют писать более лаконичный и выразительный код, а автоматическая генерация полезных функций избавляет от необходимости писать рутинный код. 
