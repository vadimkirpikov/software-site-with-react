## Коллекции в Kotlin: Map

В Kotlin, помимо списков и множеств, важную роль играют коллекции типа `Map`. 
Они позволяют хранить данные в формате "ключ-значение", где каждый уникальный ключ 
связан с определенным значением. 

### Создание Map

Существует два основных способа создания `Map` в Kotlin:

1. **Использование функции `mapOf()`**:

```kotlin
val myMap = mapOf("apple" to 1, "banana" to 2, "orange" to 3)
```

В данном примере мы создаем неизменяемую `Map` с помощью функции `mapOf()`. 
Ключами являются строки ("apple", "banana", "orange"), а значениями - числа (1, 2, 3).
 Обратите внимание на использование оператора `to`, который создает пару "ключ-значение".

2. **Использование функций `mutableMapOf()` и добавления элементов:**

```kotlin
val myMutableMap = mutableMapOf<String, Int>()
myMutableMap["apple"] = 1
myMutableMap["banana"] = 2
myMutableMap["orange"] = 3
```

Здесь мы создаем изменяемую `Map` с помощью `mutableMapOf()`. 
Изначально она пуста, но мы можем добавлять элементы, используя синтаксис 
`map[ключ] = значение`.

### Типы Map

Kotlin предоставляет два основных типа `Map`:

* **`Map`**: Неизменяемая коллекция. После создания изменить ее содержимое невозможно. 
* **`MutableMap`**: Изменяемая коллекция. Позволяет добавлять, удалять и изменять элементы после создания.

### Доступ к элементам Map

Для доступа к значению по ключу используется оператор `[]`:

```kotlin
val bananaCount = myMap["banana"] // значение: 2
```

Если ключа нет в `Map`, то вернется `null`. 
Чтобы избежать потенциальной ошибки `NullPointerException`, можно использовать оператор `?:`:

```kotlin
val grapeCount = myMap["grape"] ?: 0 // значение: 0
```

В данном случае, если ключа "grape" нет в `Map`, 
то переменной `grapeCount` будет присвоено значение 0.

### Итерация по Map

Для итерации по элементам `Map` можно использовать цикл `for`:

```kotlin
for ((fruit, count) in myMap) {
    println("There are $count $fruit(s).")
}
```

В данном примере мы используем деструктуризацию для одновременного получения 
ключа (`fruit`) и значения (`count`) из каждой пары "ключ-значение".

### Полезные функции и свойства Map

`Map` в Kotlin предоставляет множество полезных функций и свойств, 
которые упрощают работу с коллекцией:

* **`size`**: Возвращает количество пар "ключ-значение" в `Map`.
* **`isEmpty()`**: Проверяет, пуста ли `Map`.
* **`containsKey(key)`**: Проверяет, содержит ли `Map` заданный ключ.
* **`containsValue(value)`**: Проверяет, содержит ли `Map` заданное значение.
* **`keys`**: Возвращает множество ключей `Map`.
* **`values`**: Возвращает коллекцию значений `Map`.

### Пример использования Map

Представим, что нам нужно создать программу, которая будет хранить количество 
товаров на складе. В этом случае `Map` идеально подходит для хранения 
данных в формате "название товара - количество":

```kotlin
fun main() {
    val stock = mutableMapOf<String, Int>()

    // Добавляем товары на склад
    stock["apple"] = 10
    stock["banana"] = 5
    stock["orange"] = 7

    // Выводим количество товаров
    println("На складе:")
    for ((item, quantity) in stock) {
        println("$item: $quantity шт.")
    }

    // Продаем 3 яблока
    stock["apple"] = stock["apple"]!! - 3

    // Проверяем наличие груш
    if (stock.containsKey("pear")) {
        println("Груши есть в наличии.")
    } else {
        println("Груш нет в наличии.")
    }

    // Выводим обновленное количество товаров
    println("\nПосле продажи:")
    for ((item, quantity) in stock) {
        println("$item: $quantity шт.")
    }
}
```

В этом примере мы создаем изменяемую `Map` для хранения данных о товарах. 
Затем мы добавляем товары на склад, изменяем количество яблок, 
проверяем наличие груш и выводим информацию о товарах.

### Заключение

`Map` - мощный инструмент для работы с данными в формате "ключ-значение". 
Kotlin предоставляет удобные способы создания, изменения и итерации по `Map`, 
что делает их незаменимыми во многих задачах программирования. 
