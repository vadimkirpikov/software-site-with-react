## Типы исключений в C++

Исключения в C++ - это механизм обработки ошибок, позволяющий передавать информацию об ошибке из точки возникновения в точку, где ее можно обработать.  Ключевой элемент этого механизма - типы исключений, которые определяют вид возникшей ошибки. 

### Встроенные типы исключений

Стандартная библиотека C++ предоставляет набор встроенных типов исключений, наследуемых от класса `std::exception`.  Они представляют типичные ошибки, возникающие во время выполнения программы.  

| Тип исключения | Описание |
|---|---|
| `std::exception` | Базовый класс для всех исключений стандартной библиотеки. |
| `std::logic_error` | Исключения, возникающие из-за логических ошибок в коде. |
| `std::runtime_error` | Исключения, возникающие во время выполнения программы. |
| `std::bad_alloc` | Исключение, генерируемое при неудачном выделении памяти. |
| `std::bad_cast` | Исключение, генерируемое при неудачном динамическом приведении типов. |
| `std::out_of_range` | Исключение, генерируемое при выходе за пределы допустимого диапазона. |

### Пользовательские типы исключений

Помимо встроенных, C++ позволяет создавать собственные типы исключений, наследуя их от `std::exception` или его наследников. 

```c++
#include <iostream>
#include <exception>

class MyCustomException : public std::exception {
public:
    // Конструктор с сообщением об ошибке
    MyCustomException(const std::string& message) : msg(message) {}

    // Переопределение метода what() для вывода сообщения
    const char* what() const noexcept override {
        return msg.c_str();
    }

private:
    std::string msg; // Сообщение об ошибке
};

int main() {
    try {
        // Код, который может вызвать исключение
        throw MyCustomException("Произошла пользовательская ошибка!"); 
    }
    catch (const MyCustomException& e) { 
        // Обработка пользовательского исключения
        std::cerr << "Ошибка: " << e.what() << std::endl;
    }
    catch (const std::exception& e) {
        // Обработка других исключений стандартной библиотеки
        std::cerr << "Стандартное исключение: " << e.what() << std::endl; 
    }
    return 0;
}
```

В данном примере определяется пользовательский тип исключения `MyCustomException`, наследуемый от `std::exception`. Он хранит текстовое сообщение об ошибке и переопределяет метод `what()` для его вывода. 

### Иерархия исключений

Иерархическая структура типов исключений позволяет обрабатывать ошибки на разных уровнях абстракции. Ловля исключения по базовому типу позволяет обрабатывать сразу группу ошибок.

```c++
#include <iostream>
#include <stdexcept>

void func() {
    try {
        // Код, который может вызвать исключение
        throw std::runtime_error("Ошибка времени выполнения!");
    }
    catch (const std::exception& e) {
        // Ловим исключение по базовому типу std::exception
        std::cerr << "Поймано исключение: " << e.what() << std::endl;
        // ... обработка ошибки ...
        throw; //  Передача исключения дальше
    }
}

int main() {
    try {
        func(); 
    }
    catch (const std::exception& e) { 
        // Повторная обработка исключения
        std::cerr << "Ошибка в main(): " << e.what() << std::endl; 
    }

    return 0;
}
```

### Выбор типа исключения

Выбор правильного типа исключения - важный аспект проектирования надежного приложения. Необходимо учитывать:

* **Ясность**: Тип исключения должен четко отражать тип произошедшей ошибки.
* **Иерархия**:  Используйте иерархию исключений для группировки и обработки ошибок на разных уровнях.
* **Специализация**: Вместо использования общих исключений, создавайте собственные типы для специфичных ошибок.

### Заключение

Типы исключений - мощный инструмент обработки ошибок в C++. Использование встроенных и создание собственных типов исключений,  а также понимание принципов иерархии, позволяет писать более надежный, понятный и легко поддерживаемый код.
