## Оператор индексирования []

Оператор индексирования `[]` предоставляет доступ к элементам массива или объекта, имитирующего поведение массива.  Он принимает один аргумент - индекс элемента, к которому нужно получить доступ.

### Работа с массивами

В случае с массивами, индекс указывает на смещение от начала массива. Первый элемент массива имеет индекс 0, второй - 1 и так далее.

```c++
int numbers[5] = {1, 2, 3, 4, 5};

// Получаем доступ к элементам массива
std::cout << numbers[0] << std::endl; // Вывод: 1
std::cout << numbers[3] << std::endl; // Вывод: 4

// Изменяем значение элемента массива
numbers[2] = 10;
std::cout << numbers[2] << std::endl; // Вывод: 10
```

В этом примере мы сначала создаем массив `numbers` из 5 целых чисел. Затем мы используем оператор `[]` для доступа и изменения элементов массива. Важно помнить, что выход за границы массива приводит к неопределенному поведению программы.

### Перегрузка оператора []

Оператор `[]` можно перегрузить для пользовательских типов данных. Это позволяет использовать привычный синтаксис для доступа к элементам объектов, которые ведут себя подобно массивам.

#### Пример перегрузки оператора []

```c++
#include <iostream>

class MyArray {
private:
    int* data;
    size_t size;

public:
    MyArray(size_t size) : size(size), data(new int[size]) {}

    ~MyArray() { delete[] data; }

    // Перегрузка оператора [] для доступа к элементам
    int& operator[](size_t index) {
        if (index >= size) {
            throw std::out_of_range("Индекс вне диапазона");
        }
        return data[index];
    }

    // Перегрузка оператора [] для константных объектов
    const int& operator[](size_t index) const {
        if (index >= size) {
            throw std::out_of_range("Индекс вне диапазона");
        }
        return data[index];
    }
};

int main() {
    MyArray arr(5);

    for (size_t i = 0; i < 5; ++i) {
        arr[i] = i * 2; // Используем перегруженный оператор []
    }

    for (size_t i = 0; i < 5; ++i) {
        std::cout << arr[i] << " "; // Вывод: 0 2 4 6 8
    }
    std::cout << std::endl;

    return 0;
}
```

В этом примере мы создаем класс `MyArray`, который хранит динамический массив целых чисел. Мы перегружаем оператор `[]` дважды:

* **Для неконстантных объектов:** Возвращает ссылку на элемент, что позволяет изменять его значение.
* **Для константных объектов:** Возвращает константную ссылку на элемент, предотвращая его изменение.

Обе версии проверяют границы массива и генерируют исключение `std::out_of_range` при выходе за границы.

### Заключение

Оператор индексирования `[]` является важной частью языка C++, обеспечивая простой и удобный способ доступа к элементам массивов и объектам, имитирующим поведение массива. Перегрузка оператора `[]` позволяет создавать собственные типы данных с удобным синтаксисом доступа к элементам.
