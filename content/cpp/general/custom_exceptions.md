## Создание своих типов исключений в C++

Механизм исключений в C++ позволяет обрабатывать ошибки и нештатные ситуации, возникающие во время выполнения программы. Стандартная библиотека предоставляет набор предопределённых типов исключений, но часто бывает полезно создавать собственные типы, чтобы более точно отражать специфику ошибок в вашем приложении.

### Наследование от std::exception

Базовый класс для всех исключений в C++ — `std::exception`, определённый в заголовочном файле `<exception>`.  Создавая собственный тип исключения, рекомендуется наследовать его от `std::exception` или одного из его потомков. Это обеспечивает совместимость с обработчиками исключений, ожидающими базовый тип, и позволяет использовать стандартные методы класса `std::exception`:

| Метод      | Описание                                                                                   |
|------------|-----------------------------------------------------------------------------------------------|
| what()     | Возвращает строку с описанием ошибки.                                                        |

### Определение класса исключения

Определение класса исключения аналогично определению любого другого класса в C++. Обычно класс исключения содержит только данные-члены для хранения информации об ошибке и переопределяет метод `what()` для вывода описания. 

**Пример:**

```c++
#include <exception>
#include <string>

class InvalidInputError : public std::exception {
public:
    InvalidInputError(const std::string& message) : message_(message) {}
    const char* what() const noexcept override { return message_.c_str(); }

private:
    std::string message_;
};
```

В этом примере:

* Класс `InvalidInputError` наследуется публично от `std::exception`.
* Конструктор класса принимает строку `message` и сохраняет её в поле `message_`.
* Метод `what()` переопределяется для возврата сохранённого сообщения об ошибке.
* Ключевое слово `noexcept` указывает, что метод `what()` не генерирует исключений. 

### Генерация и обработка собственных исключений

Для генерации исключения используется оператор `throw`:

```c++
#include <iostream>

int divide(int a, int b) {
  if (b == 0) {
    throw InvalidInputError("Деление на ноль недопустимо"); 
  }
  return a / b;
}

int main() {
  try {
    int result = divide(10, 0); 
    std::cout << "Результат: " << result << std::endl;
  } catch (const InvalidInputError& e) {
    std::cerr << "Ошибка: " << e.what() << std::endl; 
  }
  return 0;
}
```

В данном примере:

* Функция `divide` генерирует исключение `InvalidInputError`, если делитель равен нулю. 
* Блок `try` окружает код, который может потенциально сгенерировать исключение.
* Блок `catch` перехватывает исключение типа `InvalidInputError` (или его потомков) и выводит сообщение об ошибке, полученное с помощью метода `what()`.

### Рекомендации по созданию собственных исключений

* Давайте классам исключений информативные имена, отражающие характер ошибки.
* Используйте наследование для создания иерархии исключений, отражающей логику вашего приложения.
* Не перегружайте конструкторы исключений большим количеством параметров. Передавайте только необходимую информацию.
* Предоставляйте понятное описание ошибки в методе `what()`, которое может быть использовано для логирования или вывода пользователю.
* Используйте собственные исключения для обработки исключительных ситуаций, а не для управления потоком выполнения программы. 

Создание собственных типов исключений делает код более читаемым, понятным и простым в сопровождении. Тщательно продуманная иерархия исключений помогает разработчикам быстро локализовать и исправить ошибки, а также создавать надёжные и отказоустойчивые приложения. 
