## Переопределение операторов ввода и вывода в C++

C++ позволяет управлять поведением операторов ввода-вывода, таких как `>>` и `<<`, для пользовательских типов данных. Это делает код более читаемым и интуитивно понятным. Вместо использования функций с длинными именами, можно использовать знакомые операторы, что делает код более похожим на естественный язык.

### Перегрузка оператора вывода `<<`

Оператор `<<` используется для отправки данных в поток вывода, например, в консоль или файл. Для перегрузки этого оператора необходимо определить его как функцию-член или как дружественную функцию. 

#### Перегрузка как дружественной функции

Дружественная функция может получать доступ к закрытым и защищенным членам класса.

```c++
#include <iostream>

class Point {
private:
    int x;
    int y;

public:
    Point(int x = 0, int y = 0) : x(x), y(y) {}

    friend std::ostream& operator<<(std::ostream& out, const Point& point);
};

// Перегрузка оператора << как дружественной функции
std::ostream& operator<<(std::ostream& out, const Point& point) {
    out << "(" << point.x << ", " << point.y << ")";
    return out;
}

int main() {
    Point p(10, 20);
    std::cout << "Point coordinates: " << p << std::endl; // Вывод: Point coordinates: (10, 20)
    return 0;
}
```

**Пояснение:**

1. Объявляем класс `Point` с координатами `x` и `y`.
2. Определяем дружественную функцию `operator<<`, которая принимает два аргумента: ссылку на объект `std::ostream` и константную ссылку на объект `Point`.
3. Внутри функции получаем доступ к координатам `x` и `y` объекта `Point` и записываем их в поток вывода `out`.
4. Функция возвращает ссылку на объект `std::ostream`, чтобы обеспечить возможность конкатенации операторов `<<`.
5. В функции `main` создаем объект `Point` и используем перегруженный оператор `<<` для вывода его координат в консоль.

#### Перегрузка как функции-члена

Функция-член имеет доступ ко всем членам класса, но должна быть объявлена внутри класса.

```c++
#include <iostream>

class Point {
private:
    int x;
    int y;

public:
    Point(int x = 0, int y = 0) : x(x), y(y) {}

    std::ostream& operator<<(std::ostream& out) const;
};

// Перегрузка оператора << как функции-члена
std::ostream& Point::operator<<(std::ostream& out) const {
    out << "(" << x << ", " << y << ")";
    return out;
}

int main() {
    Point p(10, 20);
    std::cout << "Point coordinates: " << p << std::endl; // Вывод: Point coordinates: (10, 20)
    return 0;
}
```

**Пояснение:**

1. Объявляем класс `Point` с координатами `x` и `y`.
2. Внутри класса объявляем перегруженный оператор `<<` как функцию-член. 
3. Определяем функцию `operator<<`, которая принимает один аргумент: ссылку на объект `std::ostream`. 
4. Внутри функции получаем доступ к координатам `x` и `y` объекта `Point` и записываем их в поток вывода `out`.
5. Функция возвращает ссылку на объект `std::ostream`, чтобы обеспечить возможность конкатенации операторов `<<`.
6. В функции `main` создаем объект `Point` и используем перегруженный оператор `<<` для вывода его координат в консоль.

### Перегрузка оператора ввода `>>`

Оператор `>>` используется для чтения данных из потока ввода, например, с клавиатуры или из файла. Перегрузка этого оператора позволяет считывать данные непосредственно в объекты пользовательских типов.

#### Перегрузка как дружественной функции

```c++
#include <iostream>

class Point {
private:
    int x;
    int y;

public:
    Point(int x = 0, int y = 0) : x(x), y(y) {}

    friend std::istream& operator>>(std::istream& in, Point& point);
};

// Перегрузка оператора >> как дружественной функции
std::istream& operator>>(std::istream& in, Point& point) {
    char ch;
    in >> ch >> point.x >> ch >> point.y >> ch;
    return in;
}

int main() {
    Point p;
    std::cout << "Enter point coordinates (format: (x, y)): ";
    std::cin >> p;
    std::cout << "Point coordinates: " << p << std::endl;
    return 0;
}
```

**Пояснение:**

1. Объявляем класс `Point` с координатами `x` и `y`.
2. Определяем дружественную функцию `operator>>`, которая принимает два аргумента: ссылку на объект `std::istream` и ссылку на объект `Point`.
3. Внутри функции считываем координаты `x` и `y` объекта `Point` из потока ввода `in`.
4. Функция возвращает ссылку на объект `std::istream`, чтобы обеспечить возможность конкатенации операторов `>>`.
5. В функции `main` создаем объект `Point` и используем перегруженный оператор `>>` для чтения его координат из консоли.

#### Перегрузка как функции-члена

```c++
#include <iostream>

class Point {
private:
    int x;
    int y;

public:
    Point(int x = 0, int y = 0) : x(x), y(y) {}

    std::istream& operator>>(std::istream& in);
};

// Перегрузка оператора >> как функции-члена
std::istream& Point::operator>>(std::istream& in) {
    char ch;
    in >> ch >> x >> ch >> y >> ch;
    return in;
}

int main() {
    Point p;
    std::cout << "Enter point coordinates (format: (x, y)): ";
    std::cin >> p;
    std::cout << "Point coordinates: " << p << std::endl;
    return 0;
}
```

**Пояснение:**

1. Объявляем класс `Point` с координатами `x` и `y`.
2. Внутри класса объявляем перегруженный оператор `>>` как функцию-член. 
3. Определяем функцию `operator>>`, которая принимает один аргумент: ссылку на объект `std::istream`. 
4. Внутри функции считываем координаты `x` и `y` объекта `Point` из потока ввода `in`.
5. Функция возвращает ссылку на объект `std::istream`, чтобы обеспечить возможность конкатенации операторов `>>`.
6. В функции `main` создаем объект `Point` и используем перегруженный оператор `>>` для чтения его координат из консоли.

### Вывод

Перегрузка операторов ввода-вывода - мощный инструмент C++, который позволяет создавать более читаемый, интуитивно понятный и удобный в использовании код. Используйте этот инструмент с умом, чтобы сделать ваш код более выразительным и лаконичным.
