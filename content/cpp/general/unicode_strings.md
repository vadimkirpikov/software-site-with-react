## Строки с поддержкой Unicode в C++20

C++ изначально разрабатывался с фокусом на однобайтовые кодировки, такие как ASCII. С течением времени и глобализацией программного обеспечения возникла необходимость в поддержке многобайтовых кодировок, которые могут представлять символы из различных языков мира. Одним из таких стандартов является Unicode. 

Unicode - это стандарт кодирования символов, который ставит своей целью представить каждый символ из каждого языка мира. Он определяет кодовые точки для более чем 143 000 символов, охватывающих 154 современных и исторических письменностей.

C++20 предоставляет удобные инструменты для работы со строками Unicode. 

### Типы символов и строк Unicode

В C++ для работы с Unicode используются следующие основные типы символов и строк:

| Тип           | Описание                                             |
|----------------|-----------------------------------------------------|
| `char`         | Обычно представляет один байт, используется для ASCII |
| `char16_t`    | 16-битный символ, используется для UTF-16             |
| `char32_t`    | 32-битный символ, используется для UTF-32             |
| `wchar_t`     | Символ широкого типа, размер зависит от компилятора  |
| `std::u16string` | Строка из символов `char16_t`                   |
| `std::u32string` | Строка из символов `char32_t`                   |
| `std::wstring`  | Строка из символов `wchar_t`                      |

UTF-8, UTF-16 и UTF-32 - это форматы преобразования Unicode, которые определяют, как кодовые точки Unicode представляются в памяти компьютера. 

### Литералы Unicode

C++ поддерживает литералы для всех типов символов Unicode:

```cpp
char c = 'A'; // Символ ASCII
char16_t c16 = u'β'; // 16-битный символ Unicode
char32_t c32 = U'Γ'; // 32-битный символ Unicode
wchar_t wc = L'Ω'; // Символ широкого типа
```

### Преобразование между кодировками

Для преобразования строк между различными кодировками Unicode можно использовать `std::codecvt` из заголовка `<locale>`, однако этот подход считается устаревшим. Более современным и рекомендуемым способом является использование специализированных библиотек, таких как ICU (International Components for Unicode).

### Пример использования

```cpp
#include <iostream>
#include <string>
#include <codecvt>
#include <locale>

int main() {
  // Создаем строку UTF-8
  std::string utf8_str = "Привет, мир!";

  // Преобразуем строку UTF-8 в UTF-16
  std::wstring_convert<std::codecvt_utf8_utf16<char16_t>, char16_t> converter;
  std::u16string utf16_str = converter.from_bytes(utf8_str);

  // Выводим строку UTF-16
  std::cout << "UTF-16 string: ";
  for (char16_t c : utf16_str) {
    std::cout << c;
  }
  std::cout << std::endl;

  return 0;
}
```

В этом примере мы создаем строку UTF-8 `utf8_str`, содержащую текст "Привет, мир!". Затем мы используем `std::wstring_convert` и `std::codecvt_utf8_utf16` для преобразования строки UTF-8 в строку UTF-16 `utf16_str`. Наконец, мы выводим строку UTF-16 на консоль.

### Заключение

C++ предоставляет базовые инструменты для работы со строками Unicode, позволяя представлять символы из различных языков мира. Для более сложных задач, таких как преобразование между кодировками, рекомендуется использовать специализированные библиотеки, такие как ICU. 
