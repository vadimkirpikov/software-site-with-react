## Использование движка Pug в Node.js

Pug – это высокопроизводительный шаблонизатор, который компилируется в HTML на стороне сервера. Он предоставляет лаконичный синтаксис, упрощающий написание и поддержку HTML-кода. Pug особенно полезен в Node.js-приложениях, где часто требуется динамически генерировать HTML-страницы.

### Установка Pug

Перед использованием Pug необходимо установить его в проект Node.js. Для этого выполните следующую команду в терминале:

```
npm install pug
```

### Базовый синтаксис Pug

В отличие от HTML, Pug использует отступы для определения вложенности элементов. 

**Пример:**

```pug
doctype html
html(lang="ru")
  head
    title Мое приложение
  body
    h1 Заголовок
    p Привет, мир!
```

Этот код сгенерирует следующий HTML:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
  <title>Мое приложение</title>
</head>
<body>
  <h1>Заголовок</h1>
  <p>Привет, мир!</p>
</body>
</html>
```

### Интерполяция переменных

Pug позволяет легко внедрять значения переменных в HTML-код с помощью интерполяции. 

**Пример:**

```javascript
const pug = require('pug');

const имя = 'Иван';
const данные = {
  title: 'Профиль пользователя',
  age: 30
};

const html = pug.renderFile('template.pug', { имя, данные });

console.log(html);
```

```pug
doctype html
html(lang="ru")
  head
    title= данные.title
  body
    h1 Профиль пользователя: #{имя}
    p Возраст: #{данные.age}
```

В данном примере мы используем `renderFile` для рендеринга файла `template.pug` и передаем объект с переменными `имя` и `данные`. Внутри шаблона Pug мы используем символ `#{}` для вставки значений переменных.

### Условия и циклы

Pug поддерживает условные операторы и циклы для создания динамического HTML-кода.

**Пример:**

```pug
ul
  each продукт in ['Яблоки', 'Бананы', 'Груши']
    li #{продукт}

- const скидка = true;
if скидка
  p Товар со скидкой!
```

Этот код сгенерирует следующий HTML:

```html
<ul>
  <li>Яблоки</li>
  <li>Бананы</li>
  <li>Груши</li>
</ul>
<p>Товар со скидкой!</p>
```

### Шаблоны и миксины

Pug позволяет создавать многоразовые шаблоны и миксины для сокращения дублирования кода.

**Пример:**

```pug
mixin кнопка(текст, ссылка)
  a(href=ссылка)= текст

+кнопка('Главная', '/')
+кнопка('О нас', '/about')
```

В данном примере мы создаем миксин `кнопка`, который принимает два аргумента: текст кнопки и ссылку. 

### Наследование шаблонов

Pug поддерживает наследование шаблонов, что позволяет создавать базовый шаблон с общими элементами и расширять его в дочерних шаблонах.

**Пример:**

**base.pug**

```pug
doctype html
html(lang="ru")
  head
    block title
      title По умолчанию
  body
    block content
```

**page.pug**

```pug
extends base.pug

block title
  title Моя страница

block content
  h1 Моя страница
  p Содержимое страницы
```

В данном примере `base.pug` - это базовый шаблон с блоками `title` и `content`. Шаблон `page.pug` наследует `base.pug` и переопределяет блоки `title` and `content` своим собственным контентом.

### Подключение Pug к Express.js

Pug легко интегрируется с фреймворком Express.js для создания веб-приложений.

**Пример:**

```javascript
const express = require('express');
const app = express();

app.set('view engine', 'pug');
app.set('views', './views');

app.get('/', (req, res) => {
  res.render('index', { title: 'Главная страница' });
});

app.listen(3000, () => {
  console.log('Сервер запущен на порту 3000');
});
```

В данном примере мы устанавливаем Pug в качестве движка представлений для Express.js и указываем папку `views` для хранения шаблонов. 

### Заключение

Pug - это мощный и удобный инструмент для создания динамических HTML-страниц в Node.js. Его лаконичный синтаксис, интерполяция переменных, условные операторы, циклы, шаблоны и наследование значительно упрощают разработку веб-приложений. 
