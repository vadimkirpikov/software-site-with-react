## Функции как объекты: методы call и apply

В JavaScript функции - это не просто блоки кода, предназначенные для многократного выполнения. Функции в JavaScript являются объектами первого класса, что предоставляет им широкие возможности и гибкость. Как и другие объекты, функции могут:

* Храниться в переменных и структурах данных.
* Передаваться в качестве аргументов другим функциям.
* Возвращаться из других функций.
* Обладать свойствами и методами.

Именно возможность обладать методами делает функции в JavaScript по-настоящему мощным инструментом. В этой статье мы рассмотрим два важных метода, присущих объектам функций: `call` и `apply`.

### Метод `call`

Метод `call` позволяет вызвать функцию с заданным контекстом `this` и передачей аргументов по одному.

#### Синтаксис:

```javascript
function.call(thisArg, arg1, arg2, ...);
```

где:

* **function** - вызываемая функция.
* **thisArg** - значение, используемое в качестве `this` внутри вызываемой функции. Если не указано, по умолчанию используется глобальный объект (в браузере - `window`).
* **arg1, arg2, ...** - аргументы, передаваемые в вызываемую функцию.

#### Пример использования:

```javascript
const person = {
  firstName: "Иван",
  lastName: "Иванов",
  getFullName: function() {
    return this.firstName + " " + this.lastName;
  }
};

const anotherPerson = {
  firstName: "Петр",
  lastName: "Петров",
};

// Вызов метода getFullName с контекстом объекта anotherPerson
console.log(person.getFullName.call(anotherPerson)); // Вывод: "Петр Петров"
```

В этом примере мы определяем объект `person` с методом `getFullName`, который возвращает полное имя. Затем создаем другой объект `anotherPerson` с другими значениями имени и фамилии. 

При помощи `call` мы вызываем метод `getFullName` объекта `person`, но устанавливаем контекст `this` на объект `anotherPerson`. В результате, внутри функции `getFullName` значение `this` будет указывать на `anotherPerson`, и функция вернет "Петр Петров".

### Метод `apply`

Метод `apply` похож на `call`, но принимает аргументы в виде массива.

#### Синтаксис:

```javascript
function.apply(thisArg, [arg1, arg2, ...]);
```

где:

* **function** - вызываемая функция.
* **thisArg** - значение, используемое в качестве `this` внутри вызываемой функции. Если не указано, по умолчанию используется глобальный объект (в браузере - `window`).
* **[arg1, arg2, ...]** - массив аргументов, передаваемых в вызываемую функцию.

#### Пример использования:

```javascript
function sum(a, b) {
  return a + b;
}

const numbers = [10, 5];

// Вызов функции sum с аргументами из массива numbers
console.log(sum.apply(null, numbers)); // Вывод: 15
```

В этом примере мы определяем функцию `sum`, которая принимает два аргумента и возвращает их сумму. Затем создаем массив `numbers`.

При помощи `apply` мы вызываем функцию `sum`, передавая первый аргумент `null` (так как в данном случае контекст `this` не важен) и второй аргумент - массив `numbers`. В результате, функция `sum` получит доступ к элементам массива как к отдельным аргументам и вернет их сумму.

###  Применение `call` и `apply`

Методы `call` и `apply` обладают широким спектром применения. Вот некоторые примеры:

* **Заимствование методов:** 
    ```javascript
    const person1 = {
      name: "Иван",
      greet: function() {
        console.log("Привет, я " + this.name + "!");
      }
    };

    const person2 = {
      name: "Мария"
    };

    // Заимствование метода greet у объекта person1 для объекта person2
    person1.greet.call(person2); // Вывод: "Привет, я Мария!"
    ```

* **Работа с массивами:**
    ```javascript
    const numbers = [5, 10, 2, 8];

    // Нахождение максимального числа в массиве с помощью apply и Math.max
    const maxNumber = Math.max.apply(null, numbers); 
    console.log(maxNumber); // Вывод: 10
    ```

* **Создание конструкторов-наследников:**
    ```javascript
    function Product(name, price) {
      this.name = name;
      this.price = price;
    }

    function Book(name, price, author) {
      Product.call(this, name, price); // Вызов конструктора Product с контекстом this
      this.author = author;
    }

    const book = new Book("JavaScript: The Good Parts", 25, "Douglas Crockford");
    console.log(book.name); // Вывод: "JavaScript: The Good Parts"
    ```

**Заключение**

Методы `call` и `apply` являются мощными инструментами, которые позволяют управлять контекстом `this` и передачей аргументов при вызове функций. Они открывают  возможности для создания гибкого и выразительного кода, а также являются неотъемлемой частью продвинутых техник программирования на JavaScript. 
