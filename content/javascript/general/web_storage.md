## Хранение данных в браузере: Web Storage API

Веб-приложения становятся все более сложными и интерактивными, и часто возникает необходимость сохранять данные на стороне клиента (в браузере).  Для этих целей браузер предоставляет API **Web Storage**.  Он позволяет хранить данные в виде пар "ключ-значение", причем данные сохраняются локально и доступны даже после перезагрузки страницы.

**Web Storage** предоставляет два механизма хранения:

* **localStorage**:  хранит данные перманентно, пока они не будут удалены вручную (пользователем или скриптом).
* **sessionStorage**: хранит данные только в течение сессии работы с вкладкой или окном браузера.

### Работа с localStorage

**localStorage** предоставляет простой интерфейс для работы с данными:

**Добавление данных:**

```javascript
// Сохраняем имя пользователя
localStorage.setItem('username', 'John Doe');

// Сохраняем количество посещений сайта
localStorage.setItem('visits', 1); 
```

**Получение данных:**

```javascript
// Получаем имя пользователя
let username = localStorage.getItem('username'); 
console.log(username); // Вывод: "John Doe"

// Получаем количество посещений, преобразуя строку в число
let visits = parseInt(localStorage.getItem('visits'), 10) || 0;
console.log(visits); // Вывод: 1
```

**Обновление данных:**

```javascript
// Увеличиваем количество посещений на 1
visits++;
localStorage.setItem('visits', visits);
```

**Удаление данных:**

```javascript
// Удаляем имя пользователя
localStorage.removeItem('username');

// Очищаем все данные localStorage
localStorage.clear(); 
```

**Особенности localStorage:**

*  Данные хранятся в виде строк. 
*  Максимальный размер хранилища ограничен (обычно 5-10 МБ, зависит от браузера).
*  Доступ к данным можно получить только по ключу.

**Пример использования localStorage:**

```javascript
// Проверяем, посещал ли пользователь сайт ранее
if (localStorage.getItem('visited')) {
  console.log('Добро пожаловать снова!');
} else {
  console.log('Добро пожаловать на наш сайт!');
  localStorage.setItem('visited', true);
}
```

### Работа с sessionStorage

**sessionStorage** работает аналогично **localStorage**, но хранит данные только в рамках текущей сессии:

**Добавление данных:**

```javascript
// Сохраняем выбранную тему
sessionStorage.setItem('theme', 'dark'); 
```

**Получение данных:**

```javascript
let theme = sessionStorage.getItem('theme');
console.log(theme); // Вывод: "dark"
```

**Удаление данных:**

```javascript
// Удаляем выбранную тему
sessionStorage.removeItem('theme');

// Очищаем все данные sessionStorage
sessionStorage.clear(); 
```

**Особенности sessionStorage:**

* Данные удаляются при закрытии вкладки или окна браузера.
* Данные недоступны другим вкладкам или окнам, даже с того же сайта.

**Пример использования sessionStorage:**

```javascript
// Сохраняем состояние формы при переходе между страницами
const form = document.querySelector('form');

form.addEventListener('submit', (event) => {
  event.preventDefault(); // Предотвращаем отправку формы

  // Сохраняем значения полей формы в sessionStorage
  sessionStorage.setItem('name', form.name.value);
  sessionStorage.setItem('email', form.email.value);

  // Перенаправляем пользователя на другую страницу
  window.location.href = '/confirm.html';
});
```

### Сравнение localStorage и sessionStorage:

| Характеристика | localStorage | sessionStorage |
|---|---|---|
| Время жизни данных | Перманентно | До закрытия вкладки/окна |
| Область видимости | Доступен для всех вкладок с тем же доменом | Доступен только текущей вкладке/окну |
| Применение | Хранение настроек пользователя, данных приложения, кеширование данных | Хранение временных данных, состояния сессии, данных формы |

### Выбор между localStorage и sessionStorage

Выбор между **localStorage** и **sessionStorage** зависит от конкретной задачи:

* **localStorage**: Используйте для хранения данных, которые должны быть доступны  после закрытия и открытия браузера.
* **sessionStorage**: Используйте для хранения временных данных, которые нужны только в течение одной сессии.

**Важно:** 

* Не храните конфиденциальную информацию в Web Storage, так как она доступна JavaScript коду на сайте.
*  Ограничьте размер хранимых данных, чтобы не замедлять работу сайта.

Web Storage API – это мощный инструмент для хранения данных на стороне клиента. Используйте его с умом, чтобы создавать более интерактивные и удобные веб-приложения.
