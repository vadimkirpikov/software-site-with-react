## Копирование и сравнение объектов в JavaScript

Объекты — это основа JavaScript, и понимание того, как их копировать и сравнивать, имеет решающее значение для написания эффективного и предсказуемого кода. 

### Копирование объектов

В JavaScript простое присваивание объекта новой переменной не создает его копию. Вместо этого обе переменные будут ссылаться на один и тот же объект в памяти. 

```javascript
const obj1 = { a: 1, b: 2 };
const obj2 = obj1;
obj2.a = 3;
console.log(obj1.a); // Вывод: 3
```

В этом примере изменение свойства `a` в `obj2` также изменило `obj1`, потому что они ссылаются на один объект.

Для создания настоящей копии объекта, где изменения в копии не затрагивают оригинал, существует несколько способов:

#### 1. Поверхностное копирование

Поверхностное копирование создает новый объект и копирует в него свойства исходного объекта. Однако, если свойством является вложенный объект, то копируется только ссылка на этот объект, а не сам объект.

##### Методы поверхностного копирования:

* **Spread-оператор (`...`)**: 

```javascript
const obj1 = { a: 1, b: { c: 3 } };
const obj2 = { ...obj1 };
obj2.a = 4;
console.log(obj1.a); // Вывод: 1
obj2.b.c = 5;
console.log(obj1.b.c); // Вывод: 5 
```

* **Object.assign()**:

```javascript
const obj1 = { a: 1, b: { c: 3 } };
const obj2 = Object.assign({}, obj1);
obj2.a = 4;
console.log(obj1.a); // Вывод: 1
obj2.b.c = 5;
console.log(obj1.b.c); // Вывод: 5 
```

#### 2. Глубокое копирование

Глубокое копирование создает полностью независимую копию объекта, включая все вложенные объекты. Изменения во вложенных объектах копии не повлияют на оригинал.

##### Методы глубокого копирования:

* **JSON.parse(JSON.stringify())**:

```javascript
const obj1 = { a: 1, b: { c: 3 } };
const obj2 = JSON.parse(JSON.stringify(obj1));
obj2.b.c = 5;
console.log(obj1.b.c); // Вывод: 3
```

**Важно:** Этот метод работает только с данными, которые могут быть представлены в формате JSON. Он не подходит для объектов с методами или циклическими ссылками.

* **Библиотеки**: 

Для более сложных случаев, таких как объекты с методами или циклическими ссылками, рекомендуется использовать специализированные библиотеки, такие как Lodash (`_.cloneDeep()`).

### Сравнение объектов

В JavaScript прямое сравнение объектов с помощью операторов `==` или `===` проверяет только, ссылаются ли объекты на одно и то же место в памяти, а не на равенство их содержимого. 

```javascript
const obj1 = { a: 1, b: 2 };
const obj2 = { a: 1, b: 2 };
console.log(obj1 === obj2); // Вывод: false
```

Для сравнения содержимого объектов можно использовать следующие подходы:

#### 1. Поверхностное сравнение

Поверхностное сравнение проверяет, равны ли значения свойств на одном уровне вложенности.

##### Методы поверхностного сравнения:

* **Ручная проверка свойств**:

```javascript
function shallowEqual(obj1, obj2) {
  for (const key in obj1) {
    if (obj1[key] !== obj2[key]) {
      return false;
    }
  }
  return true;
}
```

* **Библиотеки**:

Библиотеки, такие как Lodash (`_.isEqual()`), предоставляют функции для поверхностного сравнения объектов.

#### 2. Глубокое сравнение

Глубокое сравнение проверяет равенство всех значений, включая вложенные объекты.

##### Методы глубокого сравнения:

* **Рекурсивная проверка свойств**:

```javascript
function deepEqual(obj1, obj2) {
  if (typeof obj1 !== 'object' || typeof obj2 !== 'object') {
    return obj1 === obj2;
  }
  for (const key in obj1) {
    if (!deepEqual(obj1[key], obj2[key])) {
      return false;
    }
  }
  return true;
}
```

* **Библиотеки**:

Библиотеки, такие как Lodash (`_.isEqualWith()`), предоставляют функции для глубокого сравнения объектов с возможностью настройки поведения сравнения.

### Заключение

Копирование и сравнение объектов являются важными аспектами работы с JavaScript. 

* Используйте поверхностное копирование, когда вам нужно создать новую копию объекта с собственными ссылками на вложенные объекты. 
* Используйте глубокое копирование, когда вам нужна полностью независимая копия объекта. 
* Помните, что прямое сравнение объектов с помощью `==` или `===` проверяет только равенство ссылок. 
* Используйте методы поверхностного или глубокого сравнения, чтобы сравнить содержимое объектов.

Выбор метода зависит от конкретной ситуации и требований вашего кода.
