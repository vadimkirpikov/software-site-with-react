## Обзор маршрутов в Next.js

Next.js — это фреймворк для создания веб-приложений на основе React.js, который предоставляет мощную и гибкую систему маршрутизации. Маршрутизация в Next.js позволяет легко создавать одностраничные приложения (SPA) с несколькими представлениями, не требуя сложной настройки.

### Основы маршрутизации

В Next.js маршрутизация основана на файловой системе. Это означает, что структура каталогов вашего проекта напрямую определяет URL-адреса страниц вашего приложения. Каждый файл JavaScript или TypeScript в каталоге `app` (начиная с версии 13) или `pages` (для версий до 13) автоматически становится маршрутом.

Например, файл `app/about.js` будет доступен по URL-адресу `/about`, а файл `app/blog/[slug].js` будет динамически создавать маршруты для каждого блога.

### Динамические маршруты

Next.js поддерживает динамические маршруты, которые позволяют создавать страницы с URL-адресами, содержащими переменные. Динамические маршруты определяются с помощью квадратных скобок `[]` в имени файла.

Например, файл `app/products/[id].js` будет обрабатывать все маршруты, соответствующие шаблону `/products/:id`, где `:id` — это переменная, которая может принимать любое значение.

Внутри компонента страницы вы можете получить доступ к значению переменной маршрута, используя объект `params` из `useRouter`:

```javascript
// app/products/[id].js
import { useRouter } from 'next/router';

export default function ProductPage() {
  const router = useRouter();
  const { id } = router.query;

  // ... логика для получения данных продукта по id
}
```

### Вложенные маршруты

Next.js позволяет создавать вложенные маршруты, чтобы лучше организовать структуру вашего приложения. Для этого создайте подкаталоги внутри каталога `app` или `pages`.

Например, структура каталогов для приложения блога может выглядеть следующим образом:

```
app/
  blog/
    [slug].js
    index.js
  about.js
  index.js
```

В этом случае файл `app/blog/index.js` будет доступен по URL-адресу `/blog`, а файл `app/blog/[slug].js` — по URL-адресу `/blog/:slug`.

### Перенаправления и псевдонимы

Next.js позволяет перенаправлять пользователей на другие страницы или URL-адреса с помощью функции `redirect`. Это может быть полезно, например, для обработки устаревших URL-адресов.

```javascript
// app/old-page.js
import { redirect } from 'next/navigation';

export default function OldPage() {
  redirect('/new-page');
  return null;
}
```

Также можно создавать псевдонимы для маршрутов, используя свойство `redirects` в файле `next.config.js`.

```javascript
// next.config.js
module.exports = {
  redirects: async () => {
    return [
      {
        source: '/old-path',
        destination: '/new-path',
        permanent: true,
      },
    ];
  },
};
```

### Обработка 404 ошибок

Next.js позволяет создавать страницу 404 для обработки несуществующих маршрутов. Для этого создайте файл `app/not-found.js` или `pages/404.js`.

```javascript
// app/not-found.js
export default function NotFoundPage() {
  return <h1>Страница не найдена</h1>;
}
```

### Заключение

Маршрутизация в Next.js предоставляет простой и гибкий способ создания многостраничных приложений. Файловая система используется для определения маршрутов, а динамические маршруты позволяют создавать страницы с переменными в URL-адресе. 

В этой статье мы рассмотрели основные концепции маршрутизации в Next.js, такие как динамические маршруты, вложенные маршруты, перенаправления, псевдонимы и обработка 404 ошибок. 
