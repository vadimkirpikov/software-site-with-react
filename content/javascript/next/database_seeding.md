## Наполнение базы данных сидерами в Next.js проекте

При разработке веб-приложений часто возникает необходимость заполнения базы данных начальными данными. Эти данные, называемые сидерами (seed data), используются для тестирования, демонстрации функциональности или первоначальной настройки приложения. В контексте Next.js проекта, сидеры позволяют быстро создать реалистичную среду разработки, не прибегая к ручному вводу данных.

### Создание скрипта для сидеров

Для начала создадим скрипт, отвечающий за заполнение базы данных. 

1. **Создайте директорию `scripts` в корне вашего проекта.**
2. **Создайте файл `seed.js` (или любое другое название) внутри директории `scripts`.**

```javascript
// scripts/seed.js
const { PrismaClient } = require('@prisma/client');
const prisma = new PrismaClient();

async function main() {
  // Удалите все существующие данные (будьте осторожны!)
  await prisma.post.deleteMany({});
  await prisma.user.deleteMany({});

  // Создайте пользователей
  const user1 = await prisma.user.create({
    data: {
      email: 'alice@example.com',
      name: 'Alice',
    },
  });

  const user2 = await prisma.user.create({
    data: {
      email: 'bob@example.com',
      name: 'Bob',
    },
  });

  // Создайте посты
  await prisma.post.create({
    data: {
      title: 'Первый пост',
      content: 'Это мой первый пост!',
      authorId: user1.id,
    },
  });

  await prisma.post.create({
    data: {
      title: 'Привет, мир!',
      content: 'Приветствую всех!',
      authorId: user2.id,
    },
  });

  console.log('Данные успешно добавлены!');
}

main()
  .catch((e) => {
    console.error(e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
```

В этом примере мы используем Prisma ORM для взаимодействия с базой данных. Скрипт сначала удаляет все существующие данные (будьте осторожны при использовании в production среде!), а затем создает двух пользователей и два поста. 

### Настройка package.json

Для удобного запуска скрипта, добавим команду в `package.json`:

```json
{
  "scripts": {
    "seed": "node scripts/seed.js"
  }
}
```

Теперь вы можете запустить скрипт командой `npm run seed`.

### Запуск скрипта

После запуска скрипта `npm run seed`, ваша база данных будет заполнена начальными данными. Вы можете проверить это, подключившись к базе данных или запросив данные в вашем приложении.

### Рекомендации

- **Используйте переменные окружения**:  Вместо того, чтобы жестко прописывать данные в скрипте, используйте переменные окружения. Это позволит вам легко изменять данные для разных сред (разработка, тестирование, production).

- **Разделите скрипты**:  Для больших проектов рекомендуется разделить скрипты на несколько файлов, например, по типам сущностей.

- **Используйте асинхронность**: При работе с большим объемом данных, используйте асинхронные функции для предотвращения блокировки основного потока.

### Заключение

Наполнение базы данных сидерами является важной частью разработки веб-приложений. С помощью скриптов сидеров вы можете быстро создавать реалистичные среды разработки, тестировать функциональность и демонстрировать работу приложения.
