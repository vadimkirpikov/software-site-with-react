## Обертывание элементов. Метод wrap()

Метод `wrap()` в jQuery – это мощный инструмент, позволяющий динамически оборачивать выбранные элементы HTML в другие элементы. Это открывает широкие возможности для манипуляции структурой документа и изменения внешнего вида веб-страницы с помощью JavaScript.

### Основной синтаксис

Метод `wrap()` имеет следующий базовый синтаксис:

```javascript
$(selector).wrap(wrappingElement);
```

где:

- `$(selector)` – это jQuery-объект, содержащий коллекцию элементов, которые необходимо обернуть.
- `wrappingElement` – это элемент HTML, который будет использован для обертывания каждого выбранного элемента. 

**Пример:**

Допустим, у нас есть следующий HTML-код:

```html
<p>Первый абзац.</p>
<p>Второй абзац.</p>
```

Мы хотим обернуть каждый абзац в тег `<div>` с классом "container". Код jQuery будет выглядеть следующим образом:

```javascript
$("p").wrap("<div class='container'></div>");
```

В результате выполнения этого кода HTML-структура изменится следующим образом:

```html
<div class="container">
  <p>Первый абзац.</p>
</div>
<div class="container">
  <p>Второй абзац.</p>
</div>
```

### Различные варианты использования метода wrap()

Метод `wrap()` предоставляет несколько способов определения обертывающего элемента:

1. **Передача HTML-строки:**

   Как было показано в предыдущем примере, вы можете передать строку, содержащую HTML-код обертывающего элемента.

2. **Передача jQuery-объекта:**

   Вы можете создать jQuery-объект, представляющий обертывающий элемент, и передать его в метод `wrap()`:

   ```javascript
   const wrapper = $("<div>").addClass("container");
   $("p").wrap(wrapper);
   ```

3. **Передача селектора:**

   Вы можете передать селектор CSS, который будет использоваться для поиска существующего элемента на странице. Этот элемент будет клонирован и использован для обертывания выбранных элементов:

   ```javascript
   $("#template").wrap("#existingElement");
   ```

   **Важно:** В этом случае обертывающий элемент будет клонирован для каждого выбранного элемента.

### Примеры использования метода wrap()

Рассмотрим несколько практических примеров использования метода `wrap()`:

**1. Добавление общих стилей:**

   Предположим, у вас есть список элементов, и вы хотите добавить одинаковые стили к каждому элементу списка. Вместо того, чтобы добавлять стили к каждому элементу по отдельности, вы можете обернуть их в контейнер и применить стили к контейнеру:

   ```html
   <ul>
     <li>Элемент 1</li>
     <li>Элемент 2</li>
     <li>Элемент 3</li>
   </ul>
   ```

   ```javascript
   $("li").wrap("<div class='list-item'></div>");
   ```

   Теперь вы можете добавить стили к классу `list-item` в вашем CSS-файле.

**2. Группировка элементов для дальнейшей обработки:**

   Вы можете использовать `wrap()` для группировки элементов с целью дальнейшей обработки. Например, вам нужно добавить кнопку "Удалить" после каждого третьего элемента в списке:

   ```html
   <ul>
     <li>Элемент 1</li>
     <li>Элемент 2</li>
     <li>Элемент 3</li>
     <li>Элемент 4</li>
     <li>Элемент 5</li>
     <li>Элемент 6</li>
   </ul>
   ```

   ```javascript
   $("li:nth-child(3n)").each(function() {
     $(this).next().addBack().wrapAll("<div class='group'></div>");
   });
   $(".group").append("<button>Удалить</button>");
   ```

   В этом примере мы используем `:nth-child(3n)` для выбора каждого третьего элемента списка. Затем мы используем `each()` для итерации по выбранным элементам, оборачивая каждый третий элемент и следующий за ним в `<div>` с классом `group`. Наконец, мы добавляем кнопку "Удалить" к каждому элементу с классом `group`.

**3. Динамическое создание разметки:**

   Метод `wrap()` полезен при создании динамической разметки на основе данных, полученных с сервера. Например, вы можете получить список продуктов с сервера и динамически сгенерировать HTML-код для отображения этих продуктов:

   ```javascript
   $.getJSON("/products", function(data) {
     $.each(data, function(index, product) {
       const productElement = $("<div>")
         .addClass("product")
         .append("<h3>" + product.name + "</h3>")
         .append("<p>" + product.description + "</p>");
       productElement.wrap("<a href='/products/" + product.id + "'></a>");
       $("#products-container").append(productElement);
     });
   });
   ```

   В этом примере мы получаем данные о продуктах с сервера с помощью `$.getJSON()`. Затем мы используем `$.each()` для итерации по полученным данным, создавая для каждого продукта элемент `<div>`, содержащий название и описание. После этого мы оборачиваем каждый `<div>` в ссылку `<a>` с помощью `wrap()`, чтобы сделать продукт кликабельным. 

### Заключение

Метод `wrap()` предоставляет удобный способ динамического управления структурой HTML-документа с помощью jQuery. Он позволяет легко добавлять общие стили, группировать элементы для дальнейшей обработки и создавать динамическую разметку на основе данных. Гибкость метода `wrap()` делает его незаменимым инструментом для разработчиков, использующих jQuery.
