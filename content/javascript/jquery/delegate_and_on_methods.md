## Работа с событиями: методы .delegate() и .on()

В jQuery обработка событий является ключевым аспектом для создания интерактивных веб-страниц.  Методы `.delegate()` и `.on()` предоставляют гибкий механизм для назначения обработчиков событий элементам страницы, даже тем, которые будут добавлены динамически. 

### Метод .delegate() 

Метод `.delegate()` в jQuery версии 3.8.0 уже помечен как устаревший (deprecated), но его понимание все еще может быть полезным для работы со старым кодом. 

**Синтаксис:**

```javascript
$(selector).delegate(childSelector, event, function(eventObj){
    // Код обработчика события
});
```

**Описание параметров:**

* **selector:** Селектор jQuery, определяющий элементы, к которым будет привязан обработчик событий. 
* **childSelector:**  Селектор, указывающий на дочерние элементы внутри выбранных элементов (selector), которые будут реагировать на событие.
* **event:**  Имя события, на которое будет реагировать обработчик.
* **function(eventObj):** Функция, которая будет выполняться при наступлении события. `eventObj` — объект события, содержащий информацию о произошедшем событии.

**Пример:**

Допустим, у нас есть список задач, и мы хотим обрабатывать клики по кнопкам "Удалить" внутри каждого элемента списка. 

```html
<ul id="taskList">
  <li>Задача 1 <button class="deleteBtn">Удалить</button></li>
  <li>Задача 2 <button class="deleteBtn">Удалить</button></li>
</ul>
```

```javascript
$(document).ready(function(){
  $("#taskList").delegate(".deleteBtn", "click", function(){
    // Удаляем элемент списка, содержащий кнопку "Удалить"
    $(this).parent().remove(); 
  });
});
```

В этом примере обработчик события `click` назначается не напрямую кнопкам, а элементу `#taskList`.  Когда происходит клик по любой кнопке с классом `deleteBtn` внутри `#taskList`, срабатывает делегирование: jQuery проверяет, какой элемент соответствует селектору `.deleteBtn` и вызывает для него обработчик. 

### Метод .on() 

Метод `.on()` является более современным и рекомендуемым способом назначения обработчиков событий в jQuery. Он обладает большей гибкостью по сравнению с `.delegate()`, предоставляя больше возможностей для управления событиями.

**Синтаксис:**

```javascript
$(selector).on(event, childSelector, data, function(eventObj){
    // Код обработчика события
});
```

**Описание параметров:**

* **selector:** Селектор jQuery, определяющий элементы, к которым будет привязан обработчик событий. 
* **event:**  Имя события, на которое будет реагировать обработчик.
* **childSelector (опционально):** Селектор, указывающий на дочерние элементы внутри выбранных элементов (selector), которые будут реагировать на событие.
* **data (опционально):** Данные, которые будут переданы в обработчик события.
* **function(eventObj):** Функция, которая будет выполняться при наступлении события. `eventObj` — объект события.

**Пример с использованием .on():**

```javascript
$(document).ready(function(){
  $("#taskList").on("click", ".deleteBtn", function(){
    $(this).parent().remove();
  });
});
```

Этот код выполняет ту же функцию, что и пример с `.delegate()`.  Однако, `.on()` предлагает больше возможностей:

**1. Привязка нескольких обработчиков к одному событию:**

```javascript
$("#taskList").on("click", ".deleteBtn", function(){ 
    // Первый обработчик
}).on("click", ".deleteBtn", function(){ 
    // Второй обработчик 
});
```

**2. Передача данных в обработчик:**

```javascript
$("#taskList").on("click", ".deleteBtn", {taskId: 123}, function(event){
    console.log("ID задачи:", event.data.taskId); 
});
```

**3. Делегирование событий для динамически созданных элементов:**

Метод `.on()` особенно полезен при работе с элементами, которые добавляются на страницу уже после загрузки DOM. 

**Пример:**

```html
<button id="addButton">Добавить задачу</button>
<ul id="taskList">
</ul>
```

```javascript
$(document).ready(function(){
  $("#addButton").click(function(){
    $("#taskList").append('<li>Новая задача <button class="deleteBtn">Удалить</button></li>');
  });

  // Обработчик для динамически добавленных кнопок:
  $("#taskList").on("click", ".deleteBtn", function(){
    $(this).parent().remove();
  });
});
```

В этом примере новые элементы списка с кнопками "Удалить" добавляются динамически. Метод `.on()`, привязанный к `#taskList`, продолжает корректно обрабатывать события `click` для всех кнопок `.deleteBtn`, даже для добавленных после загрузки страницы.

### Заключение

Методы `.delegate()` и `.on()` являются важными инструментами для работы с событиями в jQuery.  Хотя `.delegate()` считается устаревшим, его понимание полезно при работе со старым кодом. Метод `.on()` является более современным и гибким инструментом, предоставляя широкие возможности для обработки событий, особенно в контексте динамически изменяющихся веб-страниц.
