## Глобальные события AJAX в jQuery

Библиотека jQuery предоставляет возможность отслеживать и обрабатывать AJAX-запросы глобально, вне зависимости от того, где и как они были инициированы. Это особенно полезно для реализации таких функций, как отображение индикатора загрузки во время выполнения запроса, обработка ошибок или логирование.

### Типы глобальных событий AJAX

jQuery поддерживает следующие глобальные события AJAX:

| Событие           | Описание                                                                                                     |
|--------------------|--------------------------------------------------------------------------------------------------------------|
| `ajaxStart`       | Вызывается перед отправкой первого AJAX-запроса, если до этого не было активных запросов.                  |
| `ajaxSend`        | Вызывается непосредственно перед отправкой каждого AJAX-запроса.                                           |
| `ajaxSuccess`     | Вызывается, если AJAX-запрос успешно завершился (код ответа 200 OK).                                         |
| `ajaxError`       | Вызывается, если AJAX-запрос завершился ошибкой.                                                          |
| `ajaxComplete`    | Вызывается после завершения каждого AJAX-запроса (как успешного, так и завершившегося ошибкой).             |
| `ajaxStop`        | Вызывается после завершения последнего AJAX-запроса, если до этого были активные запросы.                   |

### Подписка на глобальные события AJAX

Для подписки на глобальные события AJAX используется метод `.on()` с именем события и функцией-обработчиком. 

**Пример:**

```javascript
$(document).on('ajaxStart', function() {
  // Код, выполняемый при старте AJAX-запроса
  console.log('AJAX запрос начался');
});
```

### Обработчики событий

Функции-обработчики глобальных событий AJAX получают следующие аргументы:

* `event` - объект события.
* `jqXHR` - объект jqXHR (jQuery XMLHttpRequest), представляющий текущий AJAX-запрос.
* `settings` - объект настроек, переданных в функцию `$.ajax()` или ее сокращенные версии.

**Пример:**

```javascript
$(document).on('ajaxError', function(event, jqXHR, settings) {
  // Код, выполняемый при ошибке AJAX-запроса
  console.error('Ошибка AJAX запроса:', settings.url);
});
```

### Практические примеры

**1. Отображение индикатора загрузки:**

```javascript
$(document).on('ajaxStart', function() {
  $('#loading-indicator').show(); // Показать индикатор загрузки
});

$(document).on('ajaxStop', function() {
  $('#loading-indicator').hide(); // Скрыть индикатор загрузки
});
```

**2. Обработка ошибок AJAX:**

```javascript
$(document).on('ajaxError', function(event, jqXHR, settings, thrownError) {
  // Вывести сообщение об ошибке пользователю
  alert('Произошла ошибка при выполнении запроса: ' + thrownError);
  // Дополнительная обработка ошибки
});
```

**3. Логирование AJAX-запросов:**

```javascript
$(document).on('ajaxComplete', function(event, jqXHR, settings) {
  // Логирование информации о запросе
  console.log('URL:', settings.url);
  console.log('Статус:', jqXHR.status);
});
```

### Отмена подписки на глобальные события AJAX

Для отмены подписки на глобальное событие AJAX используется метод `.off()`.

**Пример:**

```javascript
// Отмена подписки на событие ajaxStart
$(document).off('ajaxStart');
```

### Заключение

Глобальные события AJAX в jQuery предоставляют мощный инструмент для централизованной обработки AJAX-запросов. Используя их, вы можете легко реализовать функциональность, которая будет работать для всех AJAX-запросов на вашем сайте, обеспечивая согласованный пользовательский опыт и упрощая разработку. 
