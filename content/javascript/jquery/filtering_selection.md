## Фильтрация выборки в jQuery

Работа с DOM-элементами редко ограничивается выбором всех элементов определенного типа. Гораздо чаще требуется выбрать подмножество элементов, удовлетворяющих определенным критериям. JQuery предоставляет мощные инструменты для фильтрации выборок, позволяя точно выбирать нужные элементы.

### Базовая фильтрация

Простейший способ фильтрации — использование селекторов CSS в сочетании с методами jQuery. Например, чтобы выбрать все активные ссылки (`<a>`) внутри элемента с id `menu`:

```javascript
$("#menu a.active") 
```

Этот код сначала выберет все элементы `<a>` внутри элемента с id `menu`, а затем отфильтрует их, оставив только те, у которых есть класс `active`.

### Методы фильтрации

jQuery предоставляет множество специализированных методов для фильтрации выборок:

| Метод           | Описание                                                                              |
|-----------------|---------------------------------------------------------------------------------------|
| `:first`         | Выбирает первый элемент в выборке.                                                    |
| `:last`          | Выбирает последний элемент в выборке.                                                   |
| `:even`         | Выбирает все элементы с четным индексом (начиная с 0).                               |
| `:odd`          | Выбирает все элементы с нечетным индексом.                                              |
| `:eq(index)`    | Выбирает элемент с указанным индексом (начиная с 0).                                   |
| `:gt(index)`    | Выбирает все элементы с индексом больше указанного.                                      |
| `:lt(index)`    | Выбирает все элементы с индексом меньше указанного.                                      |
| `:has(selector)`| Выбирает элементы, содержащие хотя бы один элемент, соответствующий указанному селектору. |
| `:not(selector)`| Выбирает все элементы, кроме тех, что соответствуют указанному селектору.              |

**Пример:**

```html
<ul>
  <li>Первый</li>
  <li class="active">Второй</li>
  <li>Третий</li>
  <li>Четвертый</li>
</ul>
```

```javascript
// Выбрать второй элемент списка:
$("li:eq(1)").css("color", "red"); 

// Выбрать все элементы списка, кроме второго:
$("li:not(:eq(1))").css("font-weight", "bold");
```

### Фильтрация с помощью функций

Для более сложной фильтрации можно использовать функции. Функция передается в метод `filter()` и должна возвращать `true` для элементов, которые нужно оставить в выборке, и `false` для остальных.

**Пример:**

```html
<ul>
  <li data-price="10">Товар 1</li>
  <li data-price="25">Товар 2</li>
  <li data-price="15">Товар 3</li>
</ul>
```

```javascript
// Выбрать все товары с ценой больше 15:
$("li").filter(function() {
  return $(this).data("price") > 15;
}).css("background-color", "yellow");
```

В этом примере функция обращается к атрибуту `data-price` каждого элемента списка с помощью метода `data()` и сравнивает его с 15.

### Методы обхода 

Помимо фильтрации, jQuery предоставляет методы для обхода выборки и выбора связанных элементов:

| Метод      | Описание                                                     |
|------------|--------------------------------------------------------------|
| `children()`  | Выбирает все прямые дочерние элементы каждого элемента выборки. |
| `find()`     | Выбирает все потомки, соответствующие селектору.              |
| `parent()`   | Выбирает родительский элемент для каждого элемента выборки.    |
| `siblings()` | Выбирает всех соседей (братьев/сестер) каждого элемента.       |
| `next()`     | Выбирает следующий соседний элемент для каждого элемента.      |
| `prev()`     | Выбирает предыдущий соседний элемент для каждого элемента.      |

**Пример:**

```html
<div class="container">
  <p>Параграф 1</p>
  <ul>
    <li>Элемент списка 1</li>
    <li>Элемент списка 2</li>
  </ul>
  <p>Параграф 2</p>
</div>
```

```javascript
// Выбрать все элементы списка внутри контейнера:
$(".container").find("li").css("text-decoration", "underline");

// Выбрать родительский элемент для первого параграфа:
$("p:first").parent().css("border", "1px solid black");
```

Фильтрация и обход выборок – неотъемлемая часть работы с jQuery. Мастерское владение этими инструментами позволяет писать лаконичный и эффективный код, легко манипулируя DOM-структурой веб-страницы. 
