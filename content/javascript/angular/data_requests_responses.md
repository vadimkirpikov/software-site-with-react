## Отправка и получение данных в AngularJS 1.8.3

В разработке веб-приложений критически важным аспектом является взаимодействие с сервером для получения и отправки данных. AngularJS предоставляет мощные и гибкие механизмы для реализации этой задачи. 

### Сервис $http

AngularJS предлагает встроенный сервис `$http` для выполнения HTTP-запросов. Этот сервис значительно упрощает взаимодействие с сервером, предоставляя простой и интуитивно понятный интерфейс.

#### Выполнение GET-запроса

Для получения данных с сервера используется метод `$http.get()`. 

**Пример:**

```javascript
angular.module('myApp', [])
  .controller('MyController', function($scope, $http) {
    $http.get('/api/users')
      .then(function(response) {
        // Обработка успешного ответа
        $scope.users = response.data;
      }, function(error) {
        // Обработка ошибки
        console.error('Ошибка при получении данных:', error);
      });
  });
```

В этом примере мы:

1. Создаем модуль AngularJS с именем `myApp`.
2. Создаем контроллер `MyController`.
3. Внедряем зависимости `$scope` и `$http`.
4. Выполняем GET-запрос на URL `/api/users` с помощью `$http.get()`.
5. Используем `.then()` для обработки ответа сервера.
    * В случае успеха, данные из ответа (доступны в `response.data`) сохраняются в переменную `$scope.users`.
    * В случае ошибки, выводится сообщение об ошибке в консоль.

#### Выполнение POST-запроса

Для отправки данных на сервер используется метод `$http.post()`.

**Пример:**

```javascript
angular.module('myApp', [])
  .controller('MyController', function($scope, $http) {
    $scope.newUser = {}; // Объект для хранения данных нового пользователя

    $scope.createUser = function() {
      $http.post('/api/users', $scope.newUser)
        .then(function(response) {
          // Обработка успешного ответа
          console.log('Пользователь успешно создан:', response.data);
        }, function(error) {
          // Обработка ошибки
          console.error('Ошибка при создании пользователя:', error);
        });
    };
  });
```

В этом примере мы:

1. Создаем пустой объект `$scope.newUser` для хранения данных нового пользователя.
2. Создаем функцию `$scope.createUser()`, которая будет вызываться при отправке формы.
3. Внутри `createUser()` выполняем POST-запрос на URL `/api/users` с помощью `$http.post()`.
4. Передаем объект `$scope.newUser` в качестве данных запроса.
5. Обрабатываем ответ сервера аналогично предыдущему примеру.

#### Другие типы запросов

`$http` поддерживает все основные HTTP-методы, такие как PUT, DELETE, PATCH и другие. 

**Пример:**

```javascript
// Обновление пользователя
$http.put('/api/users/1', { name: 'John Doe' });

// Удаление пользователя
$http.delete('/api/users/1');
```

#### Настройка заголовков запросов

Для настройки заголовков HTTP-запросов можно передать третий аргумент в методы `$http`.

**Пример:**

```javascript
$http.get('/api/users', {}, {
  headers: {
    'Authorization': 'Bearer ' + token // Добавление токена авторизации
  }
});
```

### Обработка ответов сервера

Объект ответа, возвращаемый сервисом `$http`, содержит следующую информацию:

| Свойство | Описание |
|---|---|
| `data` | Данные, возвращаемые сервером (например, объект JSON). |
| `status` | HTTP-статус ответа (например, 200, 404). |
| `headers` | Заголовки ответа. |
| `config` | Конфигурация запроса. |

### Обработка ошибок

Для обработки ошибок HTTP-запросов можно использовать второй callback-функцию метода `.then()` или блок `.catch()`.

**Пример:**

```javascript
$http.get('/api/users')
  .then(function(response) {
    // ...
  })
  .catch(function(error) {
    if (error.status === 404) {
      // Обработка ошибки "не найдено"
    } else {
      // Обработка других ошибок
    }
  });
```

### Заключение

Сервис `$http` является мощным инструментом для взаимодействия с сервером в AngularJS-приложениях. Он предоставляет простой и удобный интерфейс для выполнения HTTP-запросов, обработки ответов и ошибок. 
