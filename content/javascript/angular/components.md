## Компоненты в AngularJS 1.8.3

Компоненты - это ключевой элемент архитектуры AngularJS, позволяющий создавать модульные и многократно используемые части приложения. Они представляют собой изолированные блоки функциональности с собственным шаблоном, контроллером и логикой. Компоненты упрощают разработку, тестирование и поддержку сложных приложений.

### Создание компонента

Для создания компонента используется метод `component()` модуля приложения. 

```javascript
angular.module('myApp', [])
  .component('myComponent', {
    // определение компонента
  });
```

В данном примере `myApp` - имя модуля, `myComponent` - имя компонента, а объект внутри метода `component()` содержит конфигурацию компонента.

### Конфигурация компонента

Объект конфигурации компонента может содержать следующие свойства:

| Свойство | Описание |
|---|---|
| `template` | HTML-шаблон компонента |
| `templateUrl` | Путь к HTML-файлу шаблона |
| `controller` | Функция-контроллер компонента |
| `controllerAs` | Псевдоним для контроллера в шаблоне |
| `bindings` | Объект, определяющий входные данные компонента |

#### Пример простой реализации компонента

```javascript
angular.module('myApp', [])
  .component('myComponent', {
    template: '<h1>Привет, это компонент {{ $ctrl.name }}!</h1>',
    controller: function() {
      this.name = 'MyComponent';
    },
    controllerAs: '$ctrl'
  });
```

В этом примере мы создали компонент `myComponent`, который отображает заголовок `h1` с текстом "Привет, это компонент MyComponent!". 

- `template` содержит HTML-код шаблона компонента. 
- `controller` - функция-контроллер, которая определяет свойство `name` со значением "MyComponent". 
- `controllerAs` задает псевдоним `$ctrl` для контроллера, используемый в шаблоне для доступа к свойству `name`.

### Использование компонента

Для использования компонента в HTML-коде используется его имя в виде HTML-тега:

```html
<!DOCTYPE html>
<html ng-app="myApp">
<head>
  <title>Пример компонента</title>
</head>
<body>
  <my-component></my-component>

  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
```

В данном примере тег `<my-component></my-component>` отобразит компонент `myComponent` на странице.

### Входные данные компонента (bindings)

Компоненты могут получать данные от родительских компонентов через входные данные (`bindings`).  Для определения входных данных используется свойство `bindings` в конфигурации компонента.

#### Типы входных данных:

| Тип | Описание |
|---|---|
| `=` | Двусторонняя привязка данных |
| `@` | Привязка строки |
| `<` | Односторонняя привязка данных |

#### Пример использования входных данных:

```javascript
// Родительский компонент
angular.module('myApp', [])
  .component('parentComponent', {
    template: '<child-component message="Привет из родительского компонента!"></child-component>'
  });

// Дочерний компонент
angular.module('myApp')
  .component('childComponent', {
    template: '<p>{{$ctrl.message}}</p>',
    bindings: {
      message: '@'
    }
  });
```

В этом примере:

- `parentComponent` передает строку "Привет из родительского компонента!" в `childComponent` через атрибут `message`.
- `childComponent` принимает значение через свойство `message` типа `@` (привязка строки) и отображает его в параграфе.

### Жизненный цикл компонента

Компоненты в AngularJS имеют свой жизненный цикл, который представляет собой последовательность событий от создания до уничтожения компонента. Доступны следующие методы жизненного цикла:

| Метод | Описание |
|---|---|
| `$onInit()` | Вызывается один раз, когда компонент инициализирован и все входные данные привязаны |
| `$onChanges(changesObj)` | Вызывается при изменении входных данных. `changesObj` - объект с информацией об изменениях |
| `$onDestroy()` | Вызывается перед уничтожением компонента |

#### Пример использования методов жизненного цикла:

```javascript
angular.module('myApp', [])
  .component('myComponent', {
    template: '<p>Счетчик: {{$ctrl.counter}}</p>',
    bindings: {
      startValue: '<'
    },
    controller: function($interval) {
      this.$onInit = function() {
        this.counter = this.startValue || 0;
        this.timer = $interval(() => this.counter++, 1000);
      };

      this.$onChanges = function(changes) {
        if (changes.startValue) {
          this.counter = changes.startValue.currentValue;
        }
      };

      this.$onDestroy = function() {
        $interval.cancel(this.timer);
      };
    }
  });
```

В этом примере:

-  `$onInit()` инициализирует счетчик и запускает таймер.
- `$onChanges()` обрабатывает изменения входного параметра `startValue` и обновляет счетчик.
- `$onDestroy()` останавливает таймер при уничтожении компонента.

### Заключение

Компоненты являются важным инструментом для создания модульных и поддерживаемых приложений AngularJS. Они обеспечивают изоляцию, многократное использование кода и упрощают разработку комплексных интерфейсов. Понимание принципов работы компонентов и их жизненного цикла является ключевым для эффективной работы с AngularJS. 
