## Создание и использование компонентов в AngularJS 1.8.3

Компоненты - это мощный инструмент AngularJS, позволяющий создавать модульные и переиспользуемые части пользовательского интерфейса. Они инкапсулируют логику, шаблон и стили, делая ваш код чище, понятнее и проще в поддержке.

### Что такое компонент?

Компонент - это директива, сконфигурированная для использования упрощенного синтаксиса. Он определяет изолированную область видимости, что означает, что его шаблон не имеет прямого доступа к области видимости родительского контроллера. 

### Создание компонента

Для создания компонента используется метод `component()` модуля `angular.module()`. Он принимает два аргумента:

* **Имя компонента**: camelCase строка, начинающаяся с префикса, например, `myComponent`.
* **Объект конфигурации**: определяет свойства компонента, такие как шаблон, контроллер и область видимости.

```javascript
// Определение модуля приложения (если еще не определен)
angular.module('myApp', []);

// Создание компонента
angular.module('myApp').component('myComponent', {
  // Свойства компонента
});
```

### Свойства компонента

| Свойство          | Описание                                                                                               |
|--------------------|--------------------------------------------------------------------------------------------------------|
| `template`         | HTML-шаблон компонента.                                                                              |
| `templateUrl`      | Путь к HTML-файлу шаблона компонента.                                                                |
| `controller`       | Конструктор контроллера, отвечающий за логику компонента.                                           |
| `controllerAs`   | Псевдоним контроллера в шаблоне, по умолчанию `$ctrl`.                                                 |
| `bindings`         | Определяет входные параметры компонента.                                                              |

### Пример простого компонента

Создадим простой компонент, который отображает приветственное сообщение:

**Файл: my-component.component.js**

```javascript
angular.module('myApp').component('myComponent', {
  template: '<h1>Привет, {{$ctrl.name}}!</h1>',
  bindings: {
    name: '<' // Одностороннее связывание
  }
});
```

**Файл: index.html**

```html
<!DOCTYPE html>
<html ng-app="myApp">
<head>
  <title>Пример компонента</title>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular.min.js"></script>
  <script src="my-component.component.js"></script>
</head>
<body>
  <my-component name="'Мир'"></my-component>
</body>
</html>
```

В этом примере:

* Мы определили компонент `myComponent`.
* В свойстве `template` указали простой HTML-шаблон с интерполяцией `{{$ctrl.name}}`.
* В свойстве `bindings` определили входной параметр `name` с односторонним связыванием (`<`).
* В HTML-файле использовали тег `<my-component>` с атрибутом `name`, передавая значение 'Мир'.

### Контроллер компонента

Контроллер компонента используется для добавления логики и обработки событий. 

**Файл: my-component.component.js**

```javascript
angular.module('myApp').component('myComponent', {
  template: '<h1>Привет, {{$ctrl.name}}!</h1><button ng-click="$ctrl.changeName()">Сменить имя</button>',
  bindings: {
    name: '<'
  },
  controller: function() {
    this.changeName = function() {
      this.name = 'AngularJS';
    };
  }
});
```

В этом примере мы добавили кнопку и функцию `changeName` в контроллер, которая изменяет значение `name` при нажатии на кнопку.

### Изолированная область видимости

Компоненты имеют изолированную область видимости, что означает:

* Изменения в области видимости компонента не влияют на родительскую область видимости.
* Шаблон компонента не имеет прямого доступа к переменным и функциям родительского контроллера.

### Взаимодействие с родительской областью видимости

Для взаимодействия с родительской областью видимости используются:

* **Входные параметры (`bindings`)**: передают данные от родительского контроллера к компоненту.
* **Функции обратного вызова**: передаются от родительского контроллера к компоненту и вызываются при необходимости.

**Пример:**

**Файл: my-component.component.js**

```javascript
angular.module('myApp').component('myComponent', {
  template: '<button ng-click="$ctrl.onNameChange({newName: $ctrl.newName})">Сохранить имя</button>',
  bindings: {
    name: '<',
    onNameChange: '&' // Функция обратного вызова
  },
  controller: function() {
    this.newName = this.name;
  }
});
```

**Файл: index.html**

```html
<my-component name="userName" on-name-change="updateName(newName)"></my-component>
```

**Файл: app.js**

```javascript
angular.module('myApp').controller('myController', function() {
  this.userName = 'Мир';
  
  this.updateName = function(newName) {
    this.userName = newName;
  };
});
```

В этом примере:

* Компонент получает `name` и функцию обратного вызова `onNameChange` через `bindings`.
* При нажатии на кнопку внутри компонента, вызывается `onNameChange` с новым значением имени.
* Родительский контроллер обрабатывает изменение имени.

### Заключение

Компоненты - это мощный инструмент для создания модульных и переиспользуемых UI-элементов в AngularJS. Они помогают писать чище, понятнее и легче в поддержке код. Используйте компоненты для создания сложных приложений с минимальным количеством кода и большей гибкостью. 
