## Основные команды Memcached

Memcached - это высокопроизводительная система кэширования в оперативной памяти, которая позволяет хранить и извлекать данные с высокой скоростью. Понимание основных команд Memcached является необходимым условием для эффективной работы с этой системой.

### Подключение к серверу Memcached

Для работы с Memcached необходимо установить соединение с сервером. Это можно сделать с помощью различных инструментов, таких как telnet, nc (netcat) или специализированные библиотеки для различных языков программирования.

**Пример подключения с помощью telnet:**

```bash
telnet localhost 11211
```

В этом примере `localhost` - это имя хоста, а `11211` - порт по умолчанию для Memcached. После успешного подключения вы увидите приглашение:

```
>
```

### Основные команды

#### 1. `set`

Команда `set` используется для сохранения данных в кэше Memcached.

**Синтаксис:**

```
set <ключ> <флаг> <время жизни> <размер данных> [данные]
```

**Параметры:**

* `<ключ>`: Строковый идентификатор для хранения данных.
* `<флаг>`: Целочисленное значение, которое может использоваться для хранения метаданных о ключе.
* `<время жизни>`: Целочисленное значение, указывающее время жизни ключа в секундах. После истечения времени жизни ключ будет удален из кэша.
* `<размер данных>`: Целочисленное значение, указывающее размер данных в байтах.
* `[данные]`: Сами данные, которые нужно сохранить.

**Пример:**

```
set my_key 0 10 5 hello
```

В этом примере ключ `my_key` будет хранить строку `hello` в течение 10 секунд.

#### 2. `get`

Команда `get` используется для извлечения данных из кэша Memcached по ключу.

**Синтаксис:**

```
get <ключ>
```

**Пример:**

```
get my_key
```

**Ответ:**

```
VALUE my_key 0 5
hello
END
```

В этом примере команда `get` возвращает значение ключа `my_key`, которое хранит строку `hello`.

#### 3. `add`

Команда `add` используется для сохранения данных в кэше Memcached только в том случае, если ключ еще не существует.

**Синтаксис:**

```
add <ключ> <флаг> <время жизни> <размер данных> [данные]
```

**Пример:**

```
add my_key 0 10 5 hello
```

В этом примере ключ `my_key` будет хранить строку `hello` в течение 10 секунд, если ключ еще не существовал. В противном случае команда ничего не сделает.

#### 4. `replace`

Команда `replace` используется для замены существующих данных в кэше Memcached.

**Синтаксис:**

```
replace <ключ> <флаг> <время жизни> <размер данных> [данные]
```

**Пример:**

```
replace my_key 0 10 5 world
```

В этом примере ключ `my_key` будет заменен на значение `world`, если ключ уже существует. В противном случае команда ничего не сделает.

#### 5. `delete`

Команда `delete` используется для удаления ключа из кэша Memcached.

**Синтаксис:**

```
delete <ключ>
```

**Пример:**

```
delete my_key
```

В этом примере ключ `my_key` будет удален из кэша Memcached.

#### 6. `stats`

Команда `stats` используется для получения статистической информации о сервере Memcached.

**Синтаксис:**

```
stats
```

**Ответ:**

```
STAT pid 12345
STAT uptime 12345678
STAT time 1234567890
STAT version 1.6.20
...
```

В этом примере команда `stats` возвращает статистику о сервере, такую как PID процесса, время работы, время последнего обновления и версию Memcached.

#### 7. `flush_all`

Команда `flush_all` используется для удаления всех ключей из кэша Memcached.

**Синтаксис:**

```
flush_all
```

**Пример:**

```
flush_all
```

В этом примере все ключи будут удалены из кэша Memcached.

#### 8. `incr`

Команда `incr` используется для увеличения значения ключа, хранящего целое число, на заданное значение.

**Синтаксис:**

```
incr <ключ> <значение>
```

**Пример:**

```
incr my_counter 1
```

В этом примере значение ключа `my_counter` будет увеличено на 1.

#### 9. `decr`

Команда `decr` используется для уменьшения значения ключа, хранящего целое число, на заданное значение.

**Синтаксис:**

```
decr <ключ> <значение>
```

**Пример:**

```
decr my_counter 1
```

В этом примере значение ключа `my_counter` будет уменьшено на 1.

### Дополнительные команды

Memcached предоставляет дополнительные команды, которые могут быть полезны в некоторых сценариях.

**Примеры:**

* `append`: Добавление данных в конец существующего значения ключа.
* `prepend`: Добавление данных в начало существующего значения ключа.
* `cas`: Условное сохранение данных, только если значение ключа не изменилось.
* `gets`: Извлечение значения ключа с проверкой его времени жизни.
* `touch`: Обновление времени жизни ключа.

### Использование Memcached в программах

Memcached может быть интегрирован в программы для различных языков программирования с помощью специализированных библиотек. Эти библиотеки предоставляют API для работы с Memcached и позволяют использовать его функциональность в приложениях.

**Примеры библиотек:**

* **PHP:** `php-memcached`, `memcached`
* **Python:** `python-memcached`
* **Java:** `spymemcached`, `xmemcached`
* **Node.js:** `node-memcached`

### Выводы

Понимание основных команд Memcached является ключевым для эффективной работы с этой системой. В этой статье были рассмотрены основные команды, такие как `set`, `get`, `add`, `replace`, `delete`, `stats`, `flush_all`, `incr` и `decr`. Дополнительные команды могут быть полезны в определенных сценариях и могут быть изучены в дальнейшем. Использование Memcached в программах может значительно повысить производительность приложений за счет кэширования данных в оперативной памяти.
