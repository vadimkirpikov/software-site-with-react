## Основные команды для работы с кэшем

В этом разделе мы рассмотрим базовые команды для взаимодействия с memcached, позволяющие выполнять основные операции с кэшем.

### Создание и получение данных

**1. Запись данных в кэш:**

Команда `set` используется для записи данных в кэш. 

```
set <ключ> <флаг> <время_жизни> <количество_байтов> <данные>
```

* **<ключ>**: Строковый идентификатор для доступа к данным.
* **<флаг>**: Целое число, которое может использоваться для хранения дополнительной информации.
* **<время_жизни>**: Время в секундах, после которого данные будут удалены из кэша. 
* **<количество_байтов>**: Число байтов в данных.
* **<данные>**: Собственно данные, которые необходимо сохранить.

**Пример:**

```
set my_key 0 300 10 "Hello, world!" 
```

Этот код записывает строку "Hello, world!" под ключом "my_key" с флагом 0 и временем жизни 300 секунд (5 минут).

**2. Получение данных из кэша:**

Команда `get` используется для получения данных по заданному ключу.

```
get <ключ>
```

**Пример:**

```
get my_key
```

В ответ сервер memcached отправит строку "VALUE my_key 0 10\r\nHello, world!\r\nEND\r\n".  
* **VALUE**: Указывает, что данные были найдены.
* **my_key**: Ключ, по которому получены данные.
* **0**: Флаг, сохраненный при записи.
* **10**: Число байтов в данных.
* **Hello, world!:**  Сохраненные данные.
* **END**:  Конец данных.

**3. Проверка наличия ключа:**

Команда `stats cachedump` позволяет получить список всех ключей, которые в настоящее время хранятся в кэше.

**Пример:**

```
stats cachedump 1 1000
```

Эта команда покажет список ключей, хранящихся в первом слоте, с ограничением в 1000 записей.

### Управление данными

**1. Удаление данных из кэша:**

Команда `delete` удаляет данные из кэша по заданному ключу.

```
delete <ключ>
```

**Пример:**

```
delete my_key
```

**2. Увеличение и уменьшение значения:**

Команды `incr` и `decr` используются для увеличения или уменьшения значения, хранящегося под заданным ключом.

```
incr <ключ> <шаг>
decr <ключ> <шаг>
```

* **<ключ>**: Ключ, для которого требуется выполнить операцию.
* **<шаг>**: Значение, на которое необходимо изменить текущее значение.

**Пример:**

```
incr my_counter 1
```

Эта команда увеличит значение, хранящееся под ключом "my_counter" на 1.

**3. Получение статистики:**

Команда `stats` предоставляет информацию о текущем состоянии кэша.

```
stats
```

В ответ сервер memcached выдаст различные статистические данные, такие как количество элементов в кэше, количество промахов, время последнего обновления, размер кэша и другие.

### Работа с ключами

**1. Создание ключей:**

Ключи в memcached должны соответствовать следующим правилам:

* Ключи должны быть строками.
* Ключи не должны быть пустыми.
* Ключи не должны содержать пробелов.
* Ключи не должны содержать управляющих символов.

**2. Максимальная длина ключа:**

Максимальная длина ключа зависит от версии memcached, но обычно составляет 250 байт.

**3. Уникальность ключей:**

Ключи должны быть уникальными. Если вы попытаетесь записать данные под ключом, который уже используется, новые данные перезапишут старые.


### Дополнительные команды

Memcached предлагает множество других команд для более продвинутого управления кэшем.

**1. `flush_all`**: Удаляет все данные из кэша.

**2. `get_multi`**: Получает данные по нескольким ключам.

**3. `append`**: Добавляет данные к существующим данным.

**4. `prepend`**: Добавляет данные в начало существующих данных.

**5. `cas`**: Заменяет данные под ключом, если данные не были изменены с момента последнего получения.

### Заключение

Этот раздел предоставил обзор основных команд memcached для работы с кэшем. 

В следующих разделах мы рассмотрим более продвинутые темы, включая:

* Использование различных протоколов для взаимодействия с memcached.
* Настройка и оптимизация memcached для максимальной производительности.
* Интеграция memcached с различными языками программирования.

Изучив основные команды и принципы работы с memcached, вы будете готовы использовать эту мощную технологию для кэширования данных и повышения производительности ваших приложений.
