## Узлы и связи

Neo4j - это графовая база данных, в которой информация хранится в виде узлов (nodes) и связей (relationships). Эта структура позволяет эффективно моделировать сложные связи между объектами и оптимизировать поиск информации по этим связям.

### Узлы

Узел - это базовый элемент графа, представляющий собой объект, сущность или понятие. Каждый узел имеет уникальный идентификатор (ID), который используется для его идентификации в базе данных. 

**Пример:**

Представьте, что мы создаем модель социальной сети. В этой модели узлы могут представлять пользователей:

```cypher
CREATE (user:User { name: 'Иван Иванов', age: 30 });
```

В этом примере мы создаем узел с меткой `User` и свойствами `name` и `age`.

**Свойства узлов**

Узлы могут иметь свойства, которые хранят информацию об объекте. Свойства - это пары "ключ-значение", где ключ - это имя свойства, а значение - это его значение.

**Пример:**

```cypher
CREATE (city:City { name: 'Москва', population: 12.5M });
```

В этом примере мы создаем узел с меткой `City` и свойствами `name` и `population`.

### Связи

Связи представляют собой отношения между узлами. Они могут иметь направление, то есть показывать, от какого узла к какому направлено отношение, и тип, который описывает характер отношения.

**Пример:**

Представим, что мы хотим показать, что пользователь Иван Иванов является другом пользователя Петр Петров. Для этого мы создадим связь между узлами `Иван Иванов` и `Петр Петров`:

```cypher
CREATE (user1:User { name: 'Иван Иванов' })-[:FRIEND]->(user2:User { name: 'Петр Петров' });
```

В этом примере мы создали связь с типом `FRIEND` и направлением от узла `user1` к узлу `user2`.

**Свойства связей**

Связи также могут иметь свойства, которые хранят дополнительную информацию об отношениях.

**Пример:**

```cypher
CREATE (user1:User { name: 'Иван Иванов' })-[:FRIEND { since: 2010 }]->(user2:User { name: 'Петр Петров' });
```

В этом примере мы добавили свойство `since` к связи `FRIEND`, которое показывает, с какого года пользователи являются друзьями.

### Создание узлов и связей

Для создания узлов и связей в Neo4j используется язык запросов Cypher.

**Создание узлов:**

```cypher
CREATE (node:Label { property: value });
```

Где:

* `Label` - метка узла, которая определяет его тип.
* `property` - имя свойства узла.
* `value` - значение свойства узла.

**Пример:**

```cypher
CREATE (user:User { name: 'Анна Сидорова', age: 25 });
```

**Создание связей:**

```cypher
CREATE (node1:Label1)-[:RelationshipType]->(node2:Label2);
```

Где:

* `node1` - первый узел.
* `Label1` - метка первого узла.
* `RelationshipType` - тип связи.
* `node2` - второй узел.
* `Label2` - метка второго узла.

**Пример:**

```cypher
CREATE (user1:User { name: 'Иван Иванов' })-[:FRIEND]->(user2:User { name: 'Петр Петров' });
```

### Извлечение информации о узлах и связях

Для извлечения информации о узлах и связях в Neo4j также используется язык запросов Cypher.

**Извлечение информации о узлах:**

```cypher
MATCH (node:Label)
RETURN node;
```

Где:

* `Label` - метка узла, который нужно найти.

**Пример:**

```cypher
MATCH (user:User)
RETURN user;
```

**Извлечение информации о связях:**

```cypher
MATCH (node1:Label1)-[relationship:RelationshipType]->(node2:Label2)
RETURN node1, relationship, node2;
```

Где:

* `Label1` - метка первого узла.
* `RelationshipType` - тип связи, которую нужно найти.
* `Label2` - метка второго узла.

**Пример:**

```cypher
MATCH (user1:User)-[relationship:FRIEND]->(user2:User)
RETURN user1, relationship, user2;
```

### Удаление узлов и связей

Для удаления узлов и связей в Neo4j используется язык запросов Cypher.

**Удаление узлов:**

```cypher
MATCH (node:Label)
DELETE node;
```

Где:

* `Label` - метка узла, который нужно удалить.

**Пример:**

```cypher
MATCH (user:User { name: 'Анна Сидорова' })
DELETE user;
```

**Удаление связей:**

```cypher
MATCH (node1:Label1)-[relationship:RelationshipType]->(node2:Label2)
DELETE relationship;
```

Где:

* `Label1` - метка первого узла.
* `RelationshipType` - тип связи, которую нужно удалить.
* `Label2` - метка второго узла.

**Пример:**

```cypher
MATCH (user1:User { name: 'Иван Иванов' })-[:FRIEND]->(user2:User { name: 'Петр Петров' })
DELETE relationship;
```

### Заключение

Узлы и связи являются основой графовой базы данных Neo4j. Понимание их роли и способов работы с ними - это первый шаг к освоению этой мощной технологии. В следующих разделах руководства мы рассмотрим более продвинутые операции с графами, такие как поиск пути, анализ связей и построение сложных моделей.
