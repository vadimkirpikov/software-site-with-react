## Операции CRUD в MongoDB

MongoDB, будучи NoSQL базой данных, использует документо-ориентированную модель данных.  Это означает, что данные хранятся в виде JSON-подобных документов, что делает MongoDB очень гибкой и удобной для работы с различными типами данных. 

В этом разделе мы рассмотрим основные операции CRUD (Create, Read, Update, Delete) в MongoDB, которые являются основой для взаимодействия с базой данных.

### Создание данных (Create)

Для добавления документов в коллекцию MongoDB использует методы `insertOne()` и `insertMany()`.

**`insertOne()`**

Метод `insertOne()` используется для вставки одного документа в коллекцию. 

**Синтаксис:**

```javascript
db.<collectionName>.insertOne(<document>)
```

**Пример:**

```javascript
// Вставка документа в коллекцию "users"
db.users.insertOne(
  { 
    name: "Иван", 
    age: 30, 
    city: "Москва" 
  }
)
```

**`insertMany()`**

Метод `insertMany()` используется для вставки нескольких документов в коллекцию. 

**Синтаксис:**

```javascript
db.<collectionName>.insertMany([<document1>, <document2>, ...])
```

**Пример:**

```javascript
// Вставка нескольких документов в коллекцию "products"
db.products.insertMany([
  { name: "Футболка", price: 1200 },
  { name: "Джинсы", price: 3500 },
  { name: "Кеды", price: 5000 }
])
```

### Чтение данных (Read)

MongoDB предоставляет мощные методы для поиска и выборки данных из коллекций.

**`find()`**

Метод `find()` является основным инструментом для поиска документов в коллекции. Он возвращает курсор, который можно использовать для итерации по результатам.

**Синтаксис:**

```javascript
db.<collectionName>.find(<query>, <projection>)
```

* **`<query>`:**  Критерии поиска документов (необязательный параметр).
* **`<projection>`:**  Поля, которые нужно включить или исключить из результатов (необязательный параметр).

**Пример:**

```javascript
// Найти все документы в коллекции "users"
db.users.find() 

// Найти пользователей старше 25 лет
db.users.find({ age: { $gt: 25 } })

// Найти пользователей из Москвы и вернуть только поля "name" и "age"
db.users.find(
  { city: "Москва" }, 
  { name: 1, age: 1, _id: 0 } 
)
```

**`findOne()`**

Метод `findOne()` возвращает первый документ, соответствующий заданным критериям поиска. 

**Синтаксис:**

```javascript
db.<collectionName>.findOne(<query>, <projection>)
```

**Пример:**

```javascript
// Найти пользователя с именем "Иван"
db.users.findOne({ name: "Иван" })
```

### Обновление данных (Update)

Для обновления документов в MongoDB используются методы `updateOne()`, `updateMany()` и `replaceOne()`.

**`updateOne()`**

Метод `updateOne()` обновляет первый документ, соответствующий заданным критериям поиска.

**Синтаксис:**

```javascript
db.<collectionName>.updateOne(<filter>, <update>, <options>)
```

* **`<filter>`:**  Критерии поиска документов для обновления.
* **`<update>`:**  Операторы обновления, определяющие изменения, которые необходимо внести в документ.
* **`<options>`:** Дополнительные параметры, такие как `upsert`.

**Пример:**

```javascript
// Увеличить возраст пользователя с именем "Иван" на 1 год
db.users.updateOne(
  { name: "Иван" },
  { $inc: { age: 1 } } 
)
```

**`updateMany()`**

Метод `updateMany()` обновляет все документы, соответствующие заданным критериям поиска.

**Синтаксис:**

```javascript
db.<collectionName>.updateMany(<filter>, <update>, <options>)
```

**Пример:**

```javascript
// Установить город "Санкт-Петербург" для всех пользователей с возрастом больше 35 лет
db.users.updateMany(
  { age: { $gt: 35 } }, 
  { $set: { city: "Санкт-Петербург" } } 
)
```

**`replaceOne()`**

Метод `replaceOne()` заменяет первый документ, соответствующий заданным критериям поиска, на новый документ.

**Синтаксис:**

```javascript
db.<collectionName>.replaceOne(<filter>, <replacement>, <options>)
```

**Пример:**

```javascript
// Заменить документ пользователя с именем "Иван"
db.users.replaceOne(
  { name: "Иван" },
  { name: "Иван Иванович", age: 31, city: "Москва" } 
)
```

### Удаление данных (Delete)

Для удаления документов из коллекции MongoDB использует методы `deleteOne()` и `deleteMany()`.

**`deleteOne()`**

Метод `deleteOne()` удаляет первый документ, соответствующий заданным критериям поиска.

**Синтаксис:**

```javascript
db.<collectionName>.deleteOne(<filter>)
```

**Пример:**

```javascript
// Удалить пользователя с именем "Иван"
db.users.deleteOne({ name: "Иван" })
```

**`deleteMany()`**

Метод `deleteMany()` удаляет все документы, соответствующие заданным критериям поиска.

**Синтаксис:**

```javascript
db.<collectionName>.deleteMany(<filter>)
```

**Пример:**

```javascript
// Удалить всех пользователей старше 50 лет
db.users.deleteMany({ age: { $gt: 50 } })
```

### Заключение

В этом разделе мы рассмотрели основные операции CRUD в MongoDB. 

Важно помнить, что MongoDB предоставляет множество дополнительных возможностей для работы с данными, таких как агрегация, индексирование, транзакции и многое другое.