## Основы MongoDB

MongoDB - это документоориентированная база данных NoSQL с открытым исходным кодом. В отличие от реляционных баз данных, использующих таблицы и строки, MongoDB хранит данные в документах JSON-подобного формата (BSON). Гибкая схема документов позволяет легко хранить и обрабатывать данные различных структур.

### Ключевые особенности MongoDB

* **Документоориентированная:** Хранит данные в документах BSON, обеспечивая гибкость и простоту масштабирования.
* **Схема без схемы:** Нет необходимости в предопределении структуры документов.
* **Высокая производительность:** Обеспечивает быструю запись и чтение данных благодаря оптимизированному механизму хранения.
* **Горизонтальное масштабирование:** Легко масштабируется горизонтально, распределяя данные по нескольким серверам.
* **Индексирование:** Поддерживает различные типы индексов для ускорения поиска данных.
* **Репликация:** Обеспечивает высокую доступность данных путем репликации данных на нескольких серверах.

### Установка MongoDB

Процесс установки MongoDB подробно описан в официальной документации. Для установки MongoDB 7.0 на вашу операционную систему, пожалуйста, обратитесь к [https://www.mongodb.com/docs/manual/installation/](https://www.mongodb.com/docs/manual/installation/).

### Базовые концепции

* **Документ:** Базовая единица данных в MongoDB, представленная в формате BSON.
* **Коллекция:** Группа документов MongoDB. Аналогична таблице в реляционных базах данных, но без жесткой схемы.
* **База данных:** Контейнер для коллекций.
* **Поле:** Именованное значение в документе.
* **Встроенный документ:** Документ, вложенный в другой документ.

### Подключение к MongoDB

Для подключения к MongoDB используется **MongoDB Shell** или **драйверы** для различных языков программирования. 

#### Подключение через MongoDB Shell

```
mongo <хост>:<порт>/<имя_базы_данных> -u <имя_пользователя> -p
```

**Пример:**

```
mongo localhost:27017/test_db -u testuser -p
```

#### Подключение через драйвер Python

```python
from pymongo import MongoClient

# Создание подключения
client = MongoClient('mongodb://localhost:27017/')

# Выбор базы данных
db = client['test_db']

# Выбор коллекции
collection = db['users']
```

### Базовые операции с данными

#### Вставка документов

**MongoDB Shell:**

```javascript
// Вставка одного документа
db.users.insertOne({ name: "Иван", age: 30 })

// Вставка нескольких документов
db.users.insertMany([
  { name: "Петр", age: 25 },
  { name: "Анна", age: 28 }
])
```

**Python:**

```python
# Вставка одного документа
user = { "name": "Иван", "age": 30 }
collection.insert_one(user)

# Вставка нескольких документов
users = [
  { "name": "Петр", "age": 25 },
  { "name": "Анна", "age": 28 }
]
collection.insert_many(users)
```

#### Поиск документов

**MongoDB Shell:**

```javascript
// Поиск по одному полю
db.users.find({ name: "Иван" })

// Поиск по нескольким полям
db.users.find({ name: "Иван", age: 30 })

// Поиск с операторами сравнения
db.users.find({ age: { $gt: 25 } }) // age больше 25
```

**Python:**

```python
# Поиск по одному полю
for user in collection.find({ "name": "Иван" }):
  print(user)

# Поиск по нескольким полям
for user in collection.find({ "name": "Иван", "age": 30 }):
  print(user)

# Поиск с операторами сравнения
for user in collection.find({ "age": { "$gt": 25 } }):
  print(user)
```

#### Обновление документов

**MongoDB Shell:**

```javascript
// Обновление одного документа
db.users.updateOne({ name: "Иван" }, { $set: { age: 31 } })

// Обновление нескольких документов
db.users.updateMany({ age: { $gt: 25 } }, { $inc: { age: 1 } }) // Увеличить age на 1
```

**Python:**

```python
# Обновление одного документа
collection.update_one({ "name": "Иван" }, { "$set": { "age": 31 } })

# Обновление нескольких документов
collection.update_many({ "age": { "$gt": 25 } }, { "$inc": { "age": 1 } })
```

#### Удаление документов

**MongoDB Shell:**

```javascript
// Удаление одного документа
db.users.deleteOne({ name: "Иван" })

// Удаление нескольких документов
db.users.deleteMany({ age: { $lt: 30 } }) // Удалить всех пользователей младше 30 лет
```

**Python:**

```python
# Удаление одного документа
collection.delete_one({ "name": "Иван" })

# Удаление нескольких документов
collection.delete_many({ "age": { "$lt": 30 } })
```

### Заключение

В этой статье мы рассмотрели основы работы с MongoDB, включая установку, подключение, базовые операции с данными и примеры кода на Python. MongoDB предлагает гибкость и масштабируемость для работы с различными типами данных.