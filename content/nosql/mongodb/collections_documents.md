<h2>Коллекции и документы</h2>

MongoDB хранит данные в **документах**, организованных в **коллекциях**. Понимание этих основных строительных блоков имеет решающее значение для эффективной работы с MongoDB.

<h3>Документы</h3>

Документ - это базовая единица данных в MongoDB. Он представлен в формате JSON (JavaScript Object Notation) и состоит из пар **ключ-значение**. Ключ - это строка, а значение может быть любым допустимым типом данных JSON, включая другие документы (вложенные документы) и массивы.

**Пример документа:**

```json
{
  "_id": ObjectId("64e7e6898e8b65a49d3a6b7d"),
  "name": "John Doe",
  "age": 30,
  "city": "New York",
  "hobbies": ["reading", "coding", "travel"],
  "address": {
    "street": "123 Main St",
    "city": "New York",
    "zip": "10001"
  }
}
```

**Ключевые особенности документов:**

* **Динамическая схема:**  В отличие от реляционных баз данных, вам не нужно заранее определять схему для документов. Каждый документ в коллекции может иметь различную структуру.
* **Вложенные документы и массивы:** Документы могут содержать вложенные документы и массивы, что позволяет создавать сложные структуры данных.
* **Идентификатор объекта (_id):** Каждый документ имеет уникальный идентификатор, называемый `_id`. Если вы не укажете его явно, MongoDB автоматически сгенерирует его для вас.

<h3>Коллекции</h3>

Коллекции - это группы документов MongoDB. Они аналогичны таблицам в реляционных базах данных. 

**Пример коллекции "users":**

```
users
  {
    "_id": ObjectId("64e7e6898e8b65a49d3a6b7d"),
    "name": "John Doe",
    "age": 30,
    // ... other fields
  }
  {
    "_id": ObjectId("64e7e68a8e8b65a49d3a6b7e"),
    "name": "Jane Doe",
    "age": 25,
    // ... other fields
  }
  // ... more documents
```

**Особенности коллекций:**

* **Динамическая схема:** Как и документы, коллекции в MongoDB имеют динамическую схему. Это означает, что документы в одной коллекции могут иметь разные поля.
* **Отсутствие связей:**  В отличие от реляционных баз данных, в MongoDB нет явного понятия внешних ключей или связей между коллекциями.
* **Чувствительность к регистру:** Имена коллекций чувствительны к регистру.

<h3>Работа с коллекциями и документами в MongoDB Shell</h3>

**Подключение к MongoDB Shell:**

Откройте терминал или командную строку и введите команду:

```bash
mongo
```

**Выбор базы данных:**

```javascript
use mydatabase
```

**Создание коллекции:**

```javascript
db.createCollection("users")
```

**Вставка документов:**

```javascript
db.users.insertOne({
  "name": "John Doe",
  "age": 30,
  "city": "New York"
})
```

```javascript
db.users.insertMany([
  { "name": "Jane Doe", "age": 25, "city": "Los Angeles" },
  { "name": "Peter Pan", "age": 20, "city": "London" }
])
```

**Поиск документов:**

```javascript
db.users.findOne() // возвращает первый найденный документ
db.users.find({ "age": 30 }) // возвращает все документы, где age = 30
```

**Обновление документов:**

```javascript
db.users.updateOne(
  { "name": "John Doe" }, // критерии поиска
  { $set: { "age": 31 } } // обновление
)
```

**Удаление документов:**

```javascript
db.users.deleteOne({ "name": "John Doe" })
```

**Удаление коллекции:**

```javascript
db.users.drop()
```

<h3>Основные типы данных JSON</h3>

| Тип данных | Описание |
|---|---|
| String | Строка |
| Number | Число (целое, с плавающей точкой) |
| Boolean | Логическое значение (true/false) |
| Array | Массив значений |
| Object | Вложенный документ |
| Null | Пустое значение |
| Date | Дата и время |
| ObjectId | Уникальный идентификатор |

**Пример документа с различными типами данных:**

```json
{
  "_id": ObjectId("64e7e6898e8b65a49d3a6b7d"),
  "name": "John Doe",
  "age": 30,
  "isEmployed": true,
  "hobbies": ["reading", "coding", "travel"],
  "address": {
    "street": "123 Main St",
    "city": "New York",
    "zip": "10001"
  },
  "registrationDate": ISODate("2023-08-22T10:00:00Z")
}
```

Это лишь краткое введение в коллекции и документы в MongoDB. В следующих разделах мы рассмотрим более сложные запросы, индексирование и другие важные концепции. 
