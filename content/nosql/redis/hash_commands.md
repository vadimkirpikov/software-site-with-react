## Команды для работы с хэшами

Хэши – это структуры данных, позволяющие хранить пары ключ-значение в Redis. Они идеальны для организации данных, требующих  структурирования и  быстрого доступа по ключу. 

В этом разделе мы рассмотрим основные команды для работы с хэшами. 

### Основные команды

#### HSET

Команда `HSET` позволяет установить значение для ключа в хэше. 

**Синтаксис:**

```
HSET key field value
```

**Аргументы:**

* `key`: Ключ, идентифицирующий хэш.
* `field`: Ключ, для которого устанавливается значение.
* `value`: Значение, которое необходимо установить.

**Пример:**

```
HSET users:1 name "John Doe"
```

Эта команда создаст хэш с ключом `users:1`, установит ключ `name` в `John Doe`.

#### HGET

Команда `HGET` позволяет получить значение, связанное с указанным ключом в хэше.

**Синтаксис:**

```
HGET key field
```

**Аргументы:**

* `key`: Ключ, идентифицирующий хэш.
* `field`: Ключ, для которого необходимо получить значение.

**Пример:**

```
HGET users:1 name
```

Эта команда вернет значение `John Doe`.

#### HMGET

Команда `HMGET` позволяет получить значения, связанные с несколькими ключами в хэше.

**Синтаксис:**

```
HMGET key field1 field2 ...
```

**Аргументы:**

* `key`: Ключ, идентифицирующий хэш.
* `field1`, `field2`... : Ключи, для которых необходимо получить значения.

**Пример:**

```
HMGET users:1 name age
```

Эта команда вернет список значений: `["John Doe", "30"]`.

#### HSETNX

Команда `HSETNX` позволяет установить значение для ключа в хэше, только если этот ключ ещё не существует.

**Синтаксис:**

```
HSETNX key field value
```

**Аргументы:**

* `key`: Ключ, идентифицирующий хэш.
* `field`: Ключ, для которого устанавливается значение.
* `value`: Значение, которое необходимо установить.

**Пример:**

```
HSETNX users:1 city "New York"
```

Эта команда установит ключ `city` в `New York`, только если он ещё не существует.

#### HMSET

Команда `HMSET` позволяет установить значения для нескольких ключей в хэше.

**Синтаксис:**

```
HMSET key field1 value1 field2 value2 ...
```

**Аргументы:**

* `key`: Ключ, идентифицирующий хэш.
* `field1`, `field2`... : Ключи, для которых устанавливаются значения.
* `value1`, `value2`... : Соответствующие значения для ключей.

**Пример:**

```
HMSET users:1 age 30 address "123 Main St"
```

Эта команда установит ключи `age` и `address` с соответствующими значениями.

#### HDEL

Команда `HDEL` позволяет удалить ключ из хэша.

**Синтаксис:**

```
HDEL key field1 field2 ...
```

**Аргументы:**

* `key`: Ключ, идентифицирующий хэш.
* `field1`, `field2`... : Ключи, которые необходимо удалить.

**Пример:**

```
HDEL users:1 address
```

Эта команда удалит ключ `address` из хэша `users:1`.

#### HEXISTS

Команда `HEXISTS` проверяет, существует ли ключ в хэше.

**Синтаксис:**

```
HEXISTS key field
```

**Аргументы:**

* `key`: Ключ, идентифицирующий хэш.
* `field`: Ключ, наличие которого необходимо проверить.

**Пример:**

```
HEXISTS users:1 age
```

Эта команда вернет `1`, если ключ `age` существует, и `0`, если он отсутствует.

#### HLEN

Команда `HLEN` позволяет получить количество ключей в хэше.

**Синтаксис:**

```
HLEN key
```

**Аргументы:**

* `key`: Ключ, идентифицирующий хэш.

**Пример:**

```
HLEN users:1
```

Эта команда вернет количество ключей в хэше `users:1`.

### Дополнительные команды

#### HKEYS

Команда `HKEYS` позволяет получить список всех ключей в хэше.

**Синтаксис:**

```
HKEYS key
```

**Аргументы:**

* `key`: Ключ, идентифицирующий хэш.

**Пример:**

```
HKEYS users:1
```

Эта команда вернет список всех ключей в хэше `users:1`.

#### HVALS

Команда `HVALS` позволяет получить список всех значений в хэше.

**Синтаксис:**

```
HVALS key
```

**Аргументы:**

* `key`: Ключ, идентифицирующий хэш.

**Пример:**

```
HVALS users:1
```

Эта команда вернет список всех значений в хэше `users:1`.

#### HSCAN

Команда `HSCAN` позволяет итеративно сканировать хэш для поиска определенных ключей.

**Синтаксис:**

```
HSCAN key cursor [MATCH pattern] [COUNT count]
```

**Аргументы:**

* `key`: Ключ, идентифицирующий хэш.
* `cursor`: Текущий курсор для сканирования.
* `MATCH pattern`: (Необязательно) Шаблон для фильтрации ключей.
* `COUNT count`: (Необязательно) Максимальное количество ключей, которое необходимо вернуть за один запрос.

**Пример:**

```
HSCAN users:1 0 MATCH "name*"
```

Эта команда итеративно сканирует хэш `users:1`, начиная с курсора `0`, ищет ключи, начинающиеся с "name", и возвращает список найденных ключей.

### Использование хэшей в приложениях

Хэши являются универсальным инструментом для организации данных в Redis.  Ниже приведены некоторые примеры использования хэшей:

* **Профили пользователей:**  Хэш может хранить информацию о пользователе, такую как имя, возраст, адрес, а также другие данные.
* **Корзина покупателя:** Хэш может использоваться для хранения товаров, добавленных в корзину покупателя, с указанием количества и цены каждого товара.
* **Данные настроек:** Хэш может хранить различные настройки приложения, такие как язык, темы, уведомления и т.д.
* **Данные кэша:** Хэш может использоваться для кэширования результатов запросов к внешним API или базам данных.


## В заключение

В этой статье мы рассмотрели основные команды для работы с хэшами в Redis. Хэши являются мощным инструментом для организации и хранения данных в Redis. Они предлагают гибкость и высокую производительность для различных задач, связанных с обработкой структурированных данных.