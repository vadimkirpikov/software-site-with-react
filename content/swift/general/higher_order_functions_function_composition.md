## Высокоуровневые функции и композиция в Swift

Swift, как современный язык программирования, предоставляет мощные инструменты для работы с функциями как с данными первого класса. Это открывает двери к элегантным и выразительным решениям, улучшая читаемость и переиспользуемость кода. В этой статье мы рассмотрим высокоуровневые функции — `map`, `filter`, `reduce` — и концепцию композиции функций.

### Высокоуровневые функции

Высокоуровневые функции оперируют коллекциями данных, применяя заданную логику к каждому элементу. Вместо написания громоздких циклов мы можем использовать лаконичные и выразительные функции, делая код чище и понятнее.

#### Map

Функция `map` трансформирует каждый элемент коллекции, возвращая новую коллекцию с преобразованными значениями. 

**Пример:** У нас есть массив чисел, и нам нужно получить массив их квадратов.

```swift
let numbers = [1, 2, 3, 4, 5]

// Классический подход с циклом for
var squaredNumbers: [Int] = []
for number in numbers {
  squaredNumbers.append(number * number)
}

// Использование map
let squaredNumbersMap = numbers.map { $0 * $0 } 

print(squaredNumbers) // [1, 4, 9, 16, 25]
print(squaredNumbersMap) // [1, 4, 9, 16, 25]
```

В примере видно, как `map` сокращает код до одной строки, делая его более лаконичным и читаемым. 

#### Filter

Функция `filter` создает новую коллекцию, содержащую только те элементы исходной коллекции, которые удовлетворяют заданному условию.

**Пример:** Отфильтруем четные числа из массива.

```swift
let numbers = [1, 2, 3, 4, 5]

// Фильтрация с помощью цикла for
var evenNumbers: [Int] = []
for number in numbers {
  if number % 2 == 0 {
    evenNumbers.append(number)
  }
}

// Использование filter
let evenNumbersFilter = numbers.filter { $0 % 2 == 0 }

print(evenNumbers) // [2, 4]
print(evenNumbersFilter) // [2, 4]
```

`filter` упрощает фильтрацию элементов, делая код чище и лаконичнее.

#### Reduce

Функция `reduce` позволяет объединить все элементы коллекции в одно значение, используя заданную операцию.

**Пример:** Найдем сумму всех элементов массива.

```swift
let numbers = [1, 2, 3, 4, 5]

// Подсчет суммы с помощью цикла for
var sum = 0
for number in numbers {
  sum += number
}

// Использование reduce
let sumReduce = numbers.reduce(0) { $0 + $1 }

print(sum) // 15
print(sumReduce) // 15
```

`reduce` предоставляет удобный способ агрегации данных из коллекции в одно результирующее значение.

### Композиция функций

Композиция функций — это мощный инструмент, позволяющий комбинировать несколько функций в одну.  Представьте, что у вас есть две функции: одна преобразует строку в верхний регистр, а другая удаляет все пробелы. С помощью композиции вы можете создать новую функцию, которая будет выполнять обе эти операции последовательно.

**Пример:** Создадим функцию, которая преобразует строку в верхний регистр и удаляет все пробелы.

```swift
func uppercase(_ string: String) -> String {
  return string.uppercased()
}

func removeSpaces(_ string: String) -> String {
  return string.replacingOccurrences(of: " ", with: "")
}

let string = "  Hello, World!  "

// Вызов функций по отдельности
let uppercaseString = uppercase(string)
let result = removeSpaces(uppercaseString)

// Создание составной функции
let uppercaseAndRemoveSpaces = { string in 
  removeSpaces(uppercase(string)) 
}

let resultComposition = uppercaseAndRemoveSpaces(string)

print(result) // "HELLO,WORLD!"
print(resultComposition) // "HELLO,WORLD!"
```

В примере показано, как композиция функций делает код более читаемым и лаконичным, особенно при работе с цепочками преобразований.

### Заключение

Высокоуровневые функции и композиция функций — это мощные инструменты, доступные в Swift. Они позволяют писать более лаконичный, выразительный и легко поддерживаемый код. Используя `map`, `filter`, `reduce` и композицию, вы можете создавать элегантные решения для широкого спектра задач, делая ваш код чище и эффективнее.
