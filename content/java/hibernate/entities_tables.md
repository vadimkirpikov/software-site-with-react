## Определение сущностей и таблиц

В Hibernate сущности представляют объекты вашего приложения, которые нужно сохранять в базе данных. Они являются мостом между объектно-ориентированным миром Java и реляционным миром СУБД. 

Сущности в Hibernate – это POJO (Plain Old Java Objects) классы, которые аннотируются специальными метаданными для описания их соответствия таблицам и столбцам базы данных. 

### Создание сущности

Рассмотрим пример создания простой сущности "Книга":

```java
package com.example.model;

import jakarta.persistence.*;

@Entity
@Table(name = "books")
public class Book {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "title", nullable = false)
    private String title;

    @Column(name = "author")
    private String author;

    // Конструкторы, геттеры и сеттеры
}
```

**Описание кода:**

1. **@Entity:** указывает, что данный класс является сущностью Hibernate.
2. **@Table(name = "books"):** связывает сущность с таблицей "books" в базе данных. 
3. **@Id:** указывает на поле-идентификатор сущности.
4. **@GeneratedValue(strategy = GenerationType.IDENTITY):**  определяет стратегию генерации значений идентификатора. `GenerationType.IDENTITY`  означает, что СУБД сама генерирует значение id при вставке новой записи.
5. **@Column(name = "title", nullable = false):**  указывает на соответствие поля "title" сущности столбцу "title" в таблице. Атрибут `nullable = false`  означает, что значение этого поля не может быть null.
6. **@Column(name = "author"):**  связывает поле "author" сущности со столбцом "author" в таблице.

### Создание таблицы

Hibernate может автоматически создавать таблицы в базе данных на основе аннотаций сущностей. Для этого нужно:

1. **Настроить свойство `hibernate.hbm2ddl.auto` в файле конфигурации Hibernate (`hibernate.cfg.xml`  или `persistence.xml`)**:

   ```xml
   <property name="hibernate.hbm2ddl.auto">create</property>
   ```

   Допустимые значения `hibernate.hbm2ddl.auto`:

   * **create:**  создает таблицы при старте приложения и удаляет при его завершении.
   * **create-drop:**  аналогично `create`, но удаляет таблицы и при завершении работы приложения.
   * **update:** обновляет схему базы данных, если она отличается от описания сущностей.
   * **validate:** проверяет соответствие схемы базы данных описанию сущностей.
   * **none:**  отключает автоматическое управление схемой базы данных.

2. **Запустить приложение.**

   Hibernate проанализирует аннотации сущностей и создаст соответствующие таблицы в базе данных.

**Важно:** 

* В производственной среде рекомендуется использовать `hibernate.hbm2ddl.auto=validate`  или  `none`, чтобы избежать случайного удаления или изменения данных. 
* Для управления схемой базы данных в производственной среде рекомендуется использовать миграции.

### Заключение

В этой статье мы рассмотрели основы определения сущностей и таблиц в Hibernate 6. Вы узнали, как создавать сущности с помощью аннотаций, связывать их с таблицами базы данных и настраивать автоматическое создание таблиц. В следующих статьях мы более подробно рассмотрим различные аспекты работы с сущностями и отношениями между ними. 
