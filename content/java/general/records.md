## Records: неизменяемые данные в Java

В Java 14 были представлены **records** - специальный вид классов, предназначенный для моделирования неизменяемых структур данных. Records значительно упрощают код, делая его более компактным и читаемым.

### Зачем нужны records?

До появления records для создания простого класса-контейнера данных приходилось писать много шаблонного кода: конструктор, геттеры, методы `equals()`, `hashCode()` и `toString()`.  Records автоматизируют создание всего этого, позволяя сосредоточиться на данных.

### Создание record

Объявление record похоже на объявление класса, но вместо ключевого слова `class` используется `record`:

```java
public record Person(String name, int age) {}
```

В этом примере мы создали record `Person` с двумя полями: `name` типа `String` и `age` типа `int`. 

При объявлении record компилятор автоматически генерирует:

* **Закрытый конструктор:** Он принимает значения для всех полей и инициализирует их.
* **Публичные геттеры:**  Имена геттеров совпадают с именами полей.
* **Методы `equals()`, `hashCode()` и `toString()`:**  Они реализованы таким образом, чтобы сравнивать объекты records на основе значений их полей.

### Использование record

Создадим экземпляр record `Person`:

```java
Person john = new Person("John Doe", 30);
```

Доступ к полям осуществляется с помощью геттеров:

```java
System.out.println(john.name()); // Выведет "John Doe"
System.out.println(john.age()); // Выведет 30
```

### Преимущества использования records

* **Краткость:** Records сокращают количество кода, необходимого для создания простых классов данных.
* **Неизменяемость:** Поля records неявно объявляются как `final`, что гарантирует неизменность данных после создания объекта.
* **Читаемость:** Код с использованием records становится более лаконичным и понятным.
* **Безопасность:** Неизменяемость данных упрощает отслеживание изменений и предотвращает случайные модификации.

###  Дополнительные возможности

#### 1. Кастомный конструктор

Records могут иметь кастомные конструкторы для дополнительной валидации данных:

```java
public record Product(String name, double price) {
    public Product {
        if (price < 0) {
            throw new IllegalArgumentException("Цена не может быть отрицательной");
        }
    }
}
```

Обратите внимание, что кастомный конструктор в record должен вызывать главный конструктор (конструктор, сгенерированный компилятором).

#### 2. Методы

Records могут иметь методы для реализации специфической логики:

```java
public record Point(int x, int y) {
    public double distanceFromOrigin() {
        return Math.sqrt(x * x + y * y);
    }
}
```

#### 3. Локальные переменные

Внутри record можно объявлять локальные переменные и использовать их в методах:

```java
public record Rectangle(int width, int height) {
    public int area() {
        int area = width * height;
        return area;
    }
}
```

#### 4. Интерфейсы

Records могут реализовывать интерфейсы:

```java
interface Drawable {
    void draw();
}

public record Circle(int radius) implements Drawable {
    @Override
    public void draw() {
        System.out.println("Рисуем круг радиусом " + radius);
    }
}
```

### Заключение

Records - это мощный инструмент для моделирования неизменяемых структур данных в Java. Они позволяют создавать более лаконичный, читаемый и безопасный код. Используйте records для представления данных, которые не должны изменяться после создания.
