## Работа с большими числами: BigInteger и BigDecimal

В языке программирования Java для работы с целыми числами используются примитивные типы `byte`, `short`, `int` и `long`. Для хранения чисел с плавающей точкой — `float` и `double`. Однако, что делать, если требуется выполнить вычисления с числами, выходящими за рамки этих типов данных? Например, вычислить факториал 100 или выполнить точные финансовые расчёты? В таких случаях на помощь приходят классы `BigInteger` и `BigDecimal`.

### Класс BigInteger

`BigInteger` представляет собой неизменяемый класс, предназначенный для работы с целыми числами произвольной длины. Он позволяет хранить и обрабатывать числа, значительно превосходящие по величине возможности типа `long`. 

#### Создание объектов BigInteger

Существует несколько способов создания объектов `BigInteger`:

* **Из строки:**

```java
BigInteger bigIntegerFromString = new BigInteger("12345678901234567890");
```
В данном случае создается объект `BigInteger`, инициализированный значением из строки.

* **Из примитивного типа:**

```java
longlongValue = 1234567890L;
BigInteger bigIntegerFromLong = BigInteger.valueOf(longValue);
```
Здесь значение типа `long` преобразуется в объект `BigInteger`.

#### Операции с BigInteger

Класс `BigInteger` предоставляет широкий набор методов для выполнения арифметических операций:

* **Сложение:** `add(BigInteger val)`
* **Вычитание:** `subtract(BigInteger val)`
* **Умножение:** `multiply(BigInteger val)`
* **Деление:** `divide(BigInteger val)`
* **Остаток от деления:** `remainder(BigInteger val)`
* **Возведение в степень:** `pow(int exponent)`
* **Абсолютное значение:** `abs()`
* **Сравнение:** `compareTo(BigInteger val)`

**Пример:**

```java
// Создаем два объекта BigInteger
BigInteger a = new BigInteger("12345678901234567890");
BigInteger b = new BigInteger("98765432109876543210");

// Выполняем арифметические операции
BigInteger sum = a.add(b);          // Сложение
BigInteger difference = a.subtract(b); // Вычитание
BigInteger product = a.multiply(b);    // Умножение
BigInteger quotient = b.divide(a);     // Деление
BigInteger remainder = b.remainder(a);  // Остаток от деления

// Выводим результаты
System.out.println("Сумма: " + sum);
System.out.println("Разность: " + difference);
System.out.println("Произведение: " + product);
System.out.println("Частное: " + quotient);
System.out.println("Остаток: " + remainder);
```

#### Полезные методы BigInteger

Помимо основных арифметических операций, `BigInteger` предоставляет ряд полезных методов:

* `gcd(BigInteger val)`: нахождение наибольшего общего делителя (НОД).
* `isProbablePrime(int certainty)`: проверка на простоту с заданной вероятностью.
* `nextProbablePrime()`: получение следующего простого числа.
* `longValue()`: преобразование в `long` (если значение выходит за рамки `long`, то выбрасывается исключение).
* `intValue()`: преобразование в `int` (аналогично `longValue()`).

### Класс BigDecimal

Класс `BigDecimal` предназначен для работы с числами с плавающей точкой произвольной точности. Он незаменим в ситуациях, где важна высокая точность вычислений, например, в финансовых приложениях. 

#### Создание объектов BigDecimal

Создать объект `BigDecimal` можно следующими способами:

* **Из строки:**

```java
BigDecimal bigDecimalFromString = new BigDecimal("12345.678901234567890");
```

* **Из `double`:**

```java
double doubleValue = 12345.678901234567890;
BigDecimal bigDecimalFromDouble = BigDecimal.valueOf(doubleValue); 
```

**Важно:** При создании `BigDecimal` из `double` могут возникнуть проблемы с точностью. Рекомендуется использовать конструктор из строки для обеспечения максимальной точности.

#### Операции с BigDecimal

`BigDecimal` поддерживает те же арифметические операции, что и `BigInteger`, а также дополнительные методы для работы с десятичными дробями:

* `setScale(int newScale, RoundingMode roundingMode)`: округление числа до заданного количества знаков после запятой с использованием указанного режима округления.
* `round(MathContext mc)`: округление числа в соответствии с заданным контекстом округления (`MathContext`).

**Пример:**

```java
// Создание объектов BigDecimal
BigDecimal price = new BigDecimal("12.99");
BigDecimal quantity = new BigDecimal("3");

// Вычисление общей стоимости
BigDecimal totalCost = price.multiply(quantity);

// Округление результата до двух знаков после запятой
totalCost = totalCost.setScale(2, RoundingMode.HALF_UP);

// Вывод результата
System.out.println("Общая стоимость: " + totalCost); 
```

#### Режимы округления

В `BigDecimal` доступны следующие режимы округления:

| Режим округления | Описание |
|---|---|
| `CEILING` | Округление в сторону положительной бесконечности. |
| `DOWN` | Округление в сторону нуля. |
| `FLOOR` | Округление в сторону отрицательной бесконечности. |
| `HALF_UP` | Округление к ближайшему целому, при равенстве — в большую сторону. |
| `HALF_DOWN` | Округление к ближайшему целому, при равенстве — в меньшую сторону. |
| `HALF_EVEN` | Округление к ближайшему четному числу. |
| `UNNECESSARY` | Не выполняет округление, если необходимо округлять, то генерируется исключение. |

### Заключение

Классы `BigInteger` и `BigDecimal` предоставляют мощный инструмент для работы с числами произвольной длины и точности. Используйте `BigInteger` для работы с целыми числами, а `BigDecimal` — для чисел с плавающей точкой, когда важна высокая точность вычислений. Помните о рекомендациях по созданию объектов этих классов и выбирайте подходящий режим округления для `BigDecimal` в зависимости от конкретной задачи. 
