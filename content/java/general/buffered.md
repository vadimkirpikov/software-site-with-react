## Буферизованные потоки ввода-вывода: BufferedInputStream и BufferedOutputStream

Работа с данными – неотъемлемая часть программирования. В Java для операций ввода-вывода используются потоки (streams).  Простые потоки, такие как FileInputStream и FileOutputStream, обеспечивают базовый функционал, но могут быть неэффективными при частых операциях чтения/записи небольших объемов данных. 

Решением этой проблемы становятся буферизованные потоки **BufferedInputStream** и **BufferedOutputStream**. Они выступают в роли промежуточного звена между программой и источником данных, оптимизируя процесс ввода-вывода.

### Принцип работы буферизованных потоков

Буферизованные потоки используют буфер – область памяти, предназначенную для временного хранения данных. Вместо того чтобы каждый раз обращаться к источнику данных (например, файл на диске), программа считывает или записывает данные в буфер. 

**Как это работает:**

1. **Чтение:** При чтении данных из **BufferedInputStream** сначала проверяется наличие данных в буфере. Если данные есть, они считываются из буфера. Если буфер пуст, происходит чтение блока данных из источника в буфер, и только затем данные передаются программе.
2. **Запись:** При записи данных в **BufferedOutputStream** они сначала помещаются в буфер. Когда буфер заполняется, происходит запись всего блока данных из буфера в источник. 

**Преимущества использования буферизованных потоков:**

* **Уменьшение количества обращений к источнику данных.** Чтение и запись блоками данных значительно эффективнее, чем побайтовое взаимодействие, особенно при работе с медленными носителями, такими как жесткие диски.
* **Увеличение скорости работы программы.** Буферизация данных ускоряет операции ввода-вывода, что положительно сказывается на общей производительности приложения.

### Создание и использование BufferedInputStream

**Создание объекта BufferedInputStream:**

```java
// Создаем FileInputStream для чтения из файла
FileInputStream fileInputStream = new FileInputStream("input.txt");

// Создаем BufferedInputStream, используя FileInputStream в качестве аргумента
BufferedInputStream bufferedInputStream = new BufferedInputStream(fileInputStream);
```

В этом примере мы сначала создаем объект **FileInputStream** для чтения данных из файла "input.txt". Затем мы создаем объект **BufferedInputStream**, передавая ему **FileInputStream** в качестве аргумента. 

**Чтение данных из BufferedInputStream:**

```java
int data;

// Читаем данные из файла до конца
while ((data = bufferedInputStream.read()) != -1) {
    // Обрабатываем прочитанный байт
    System.out.print((char) data);
}

// Закрываем поток
bufferedInputStream.close();
```

В этом примере мы используем метод `read()` для чтения байта данных из **BufferedInputStream**. Чтение продолжается до тех пор, пока метод `read()` не вернет значение -1, что сигнализирует о достижении конца файла.  

### Создание и использование BufferedOutputStream

**Создание объекта BufferedOutputStream:**

```java
// Создаем FileOutputStream для записи в файл
FileOutputStream fileOutputStream = new FileOutputStream("output.txt");

// Создаем BufferedOutputStream, используя FileOutputStream в качестве аргумента
BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(fileOutputStream);
```

Аналогично **BufferedInputStream**, мы сначала создаем объект **FileOutputStream** для записи данных в файл "output.txt". Затем мы создаем объект **BufferedOutputStream**, передавая ему **FileOutputStream** в качестве аргумента.

**Запись данных в BufferedOutputStream:**

```java
String text = "Пример текста для записи в файл.";

// Преобразуем строку в массив байтов
byte[] buffer = text.getBytes();

// Записываем массив байтов в поток
bufferedOutputStream.write(buffer);

// Очищаем буфер и записываем оставшиеся данные
bufferedOutputStream.flush();

// Закрываем поток
bufferedOutputStream.close();
```

В этом примере мы сначала преобразуем строку "Пример текста для записи в файл." в массив байтов с помощью метода `getBytes()`. Затем мы используем метод `write()` для записи массива байтов в **BufferedOutputStream**. Важно вызвать метод `flush()` после записи данных, чтобы убедиться, что все данные из буфера были записаны в файл.

### Заключение

Использование буферизованных потоков **BufferedInputStream** и **BufferedOutputStream** –  простой и эффективный способ оптимизации операций ввода-вывода в Java. Они позволяют сократить количество обращений к источнику данных, ускорить работу программы и сделать ваш код более производительным. 
