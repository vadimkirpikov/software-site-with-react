## Операции сведения

Операции сведения в Java – это механизм, позволяющий выполнять одинаковые вычисления над последовательностью значений и получать агрегированный результат. Проще говоря, это удобный способ "свести" множество значений в одно. 

### Stream API и операции сведения

Операции сведения неразрывно связаны со Stream API – мощным инструментом Java для функциональной обработки данных. Stream API позволяет вам преобразовывать коллекции данных (массивы, списки и т.д.) в потоки данных (streams) и применять к ним различные операции, включая операции сведения.

### Виды операций сведения

Существует два основных вида операций сведения:

1. **Терминальные операции сведения (terminal operations)**: Возвращают один результирующий объект, такой как число, строка или объект Optional. 
2. **Нетерминальные операции сведения (non-terminal operations)**:  Возвращают новый поток данных, к которому можно применять дальнейшие операции.

### Терминальные операции сведения

Рассмотрим некоторые распространенные терминальные операции сведения:

* **count()**: Возвращает количество элементов в потоке.

```java
List<String> fruits = List.of("apple", "banana", "orange");

long count = fruits.stream().count();

System.out.println("Количество фруктов: " + count); // Выведет: 3
```

* **min() и max()**: Возвращают минимальное и максимальное значения в потоке соответственно. 
 
 ```java
 List<Integer> numbers = List.of(5, 2, 8, 1, 9);

 Optional<Integer> min = numbers.stream().min(Comparator.naturalOrder());
 Optional<Integer> max = numbers.stream().max(Comparator.naturalOrder());

 System.out.println("Минимальное значение: " + min.get()); // Выведет: 1
 System.out.println("Максимальное значение: " + max.get()); // Выведет: 9
 ```
 
* **sum()**:  Возвращает сумму всех элементов в потоке (только для числовых типов данных).

```java
List<Integer> numbers = List.of(1, 2, 3, 4, 5);

int sum = numbers.stream().mapToInt(Integer::intValue).sum();

System.out.println("Сумма чисел: " + sum); // Выведет: 15
```

* **average()**:  Возвращает среднее арифметическое всех элементов в потоке (только для числовых типов данных).

```java
List<Double> prices = List.of(10.5, 12.0, 8.75, 9.99);

OptionalDouble average = prices.stream().mapToDouble(Double::doubleValue).average();

System.out.println("Средняя цена: " + average.getAsDouble()); // Выведет: 10.56
```

* **findFirst() и findAny()**: Возвращают первый или любой элемент в потоке соответственно.

```java
List<String> colors = List.of("red", "green", "blue", "red");

Optional<String> first = colors.stream().findFirst();
Optional<String> any = colors.stream().findAny();

System.out.println("Первый цвет: " + first.get()); // Выведет: red
System.out.println("Любой цвет: " + any.get()); // Выведет: red
```

### Нетерминальные операции сведения

**reduce()**: Позволяет выполнять пользовательские операции сведения, комбинируя элементы потока по заданному правилу. Эта операция принимает два аргумента:

1. **Идентификатор**: Начальное значение для аккумулятора.
2. **Аккумулятор**: Бинарная функция, которая принимает текущее значение аккумулятора и следующий элемент потока, а затем возвращает новое значение аккумулятора.

```java
List<String> words = List.of("Hello", "world", "!");

String sentence = words.stream().reduce("", (acc, word) -> acc + " " + word);

System.out.println(sentence); // Выведет:  Hello world !
```

### Работа с примитивными типами данных

Для эффективной работы с примитивными типами данных Stream API предоставляет специализированные потоки: IntStream, LongStream и DoubleStream.  Эти потоки имеют оптимизированные версии операций сведения, таких как sum(), average(), min() и max(), которые работают непосредственно с примитивными типами, избегая автоупаковки и повышая производительность.

### Параллельная обработка

Операции сведения можно выполнять параллельно, используя метод parallelStream() вместо stream(). Это позволяет распределить вычисления по нескольким ядрам процессора и ускорить обработку больших объемов данных.

```java
List<Integer> numbers = List.of(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);

int sum = numbers.parallelStream().mapToInt(Integer::intValue).sum();

System.out.println("Сумма чисел: " + sum); // Выведет: 55
```

Операции сведения являются важной частью Stream API в Java, позволяющей эффективно обрабатывать данные и получать агрегированные результаты. 
