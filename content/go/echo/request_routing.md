## Маршрутизация запросов в Echo

Маршрутизация - это механизм сопоставления входящих HTTP-запросов с определенными функциями обработчиками в вашем приложении.  Echo предоставляет мощный и гибкий API для определения маршрутов и обработки различных HTTP-методов, путей URL и параметров запроса.

### Основы маршрутизации

Для начала определим простой маршрут, который будет обрабатывать GET-запросы по пути "/":

```Go
package main

import (
	"net/http"

	"github.com/labstack/echo/v4"
)

func main() {
	e := echo.New()

	// Определяем маршрут для GET-запроса по пути "/"
	e.GET("/", func(c echo.Context) error {
		return c.String(http.StatusOK, "Hello, World!")
	})

	// Запускаем сервер на порту 8080
	e.Logger.Fatal(e.Start(":8080"))
}
```

В этом примере:

1. Мы создаем новый экземпляр Echo с помощью `echo.New()`.
2. Используем метод `e.GET()`, чтобы зарегистрировать обработчик для GET-запросов по пути "/".
3. Функция обработчик принимает объект `echo.Context`, который содержит информацию о запросе и позволяет управлять ответом.
4. `c.String()` отправляет текстовый ответ клиенту.

Запустите этот код и откройте в браузере адрес `http://localhost:8080/`. Вы должны увидеть сообщение "Hello, World!".

### Маршруты с параметрами

Echo позволяет извлекать динамические данные из URL с помощью параметров пути. Параметры пути определяются с помощью двоеточия (`:`) перед именем параметра.

```Go
e.GET("/users/:id", func(c echo.Context) error {
    // Получаем значение параметра "id" из URL
    userID := c.Param("id")

    return c.String(http.StatusOK, "User ID: "+userID)
})
```

Теперь, если вы обратитесь к адресу `http://localhost:8080/users/123`, то в ответе увидите "User ID: 123".

### HTTP-методы

Echo поддерживает все основные HTTP-методы: GET, POST, PUT, DELETE, PATCH и другие. Вы можете использовать соответствующие методы объекта `echo`:

```Go
e.POST("/users", createUser)
e.PUT("/users/:id", updateUser)
e.DELETE("/users/:id", deleteUser)
```

### Группы маршрутов

Для лучшей организации кода и группировки схожих маршрутов можно использовать группы маршрутов. Группа создается с помощью метода `e.Group()`:

```Go
// Создаем группу маршрутов "/api/v1"
api := e.Group("/api/v1")

// Определяем маршруты внутри группы
api.GET("/users", getUsers)
api.POST("/users", createUser)
```

Все маршруты внутри группы `api` будут доступны по префиксу `/api/v1`.

### Обработчики маршрутов

Обработчик маршрута - это функция, которая вызывается при совпадении маршрута с входящим запросом. Обработчик принимает объект `echo.Context` и возвращает объект `error`.

```Go
func getUsers(c echo.Context) error {
	// Логика получения списка пользователей
	users := []string{"John", "Jane", "Alice"}
	return c.JSON(http.StatusOK, users)
}
```

### Middleware

Middleware - это функции, которые выполняются до или после основного обработчика маршрута. Middleware используются для выполнения таких задач, как аутентификация, авторизация, логирование и обработка ошибок.

```Go
// Middleware для логирования запросов
func logMiddleware(next echo.HandlerFunc) echo.HandlerFunc {
	return func(c echo.Context) error {
		println("Запрос:", c.Request().Method, c.Request().URL.Path)
		return next(c)
	}
}

// Применяем middleware к группе маршрутов
api.Use(logMiddleware)
```

### Заключение

В этом разделе мы рассмотрели основы маршрутизации в Echo. Вы узнали, как определять простые маршруты, использовать параметры пути, обрабатывать различные HTTP-методы, создавать группы маршрутов и использовать middleware. Echo предоставляет множество других возможностей для настройки маршрутизации, которые вы можете изучить в официальной документации.
