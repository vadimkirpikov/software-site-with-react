## Контейнеры и Образы Docker

В мире разработки ПО Docker стал незаменимым инструментом, предлагая простой и эффективный способ упаковки, распространения и запуска приложений. В основе Docker лежат два ключевых понятия: **образы** и **контейнеры**. Понимание этих концепций — первый шаг к освоению Docker.

### Образы Docker: Шаблоны для контейнеров

Образ Docker можно представить как шаблон или снимок приложения, готового к запуску. Он содержит все необходимое для работы приложения: код, библиотеки, зависимости, конфигурационные файлы и среду выполнения. Важно отметить, что образы Docker неизменяемы, то есть после создания их нельзя изменить.

#### Создание образов Docker

Создание образа Docker происходит с помощью файла `Dockerfile`. Этот файл содержит набор инструкций, описывающих этапы сборки образа. Давайте рассмотрим пример простого `Dockerfile` для веб-приложения на Python:

```dockerfile
# Используем образ Python 3.9 как основу
FROM python:3.9

# Устанавливаем рабочую директорию
WORKDIR /app

# Копируем файлы приложения
COPY . .

# Устанавливаем зависимости
RUN pip install -r requirements.txt

# Указываем команду для запуска при старте контейнера
CMD ["python", "app.py"]
```

**Описание инструкций:**

| Инструкция | Описание |
|---|---|
| `FROM` | Указывает базовый образ, на основе которого будет построен новый образ. |
| `WORKDIR` | Задает рабочую директорию внутри образа. |
| `COPY` | Копирует файлы из локальной системы в образ. |
| `RUN` | Выполняет команду в контексте образа. |
| `CMD` | Определяет команду, которая будет выполнена при запуске контейнера. |

#### Сборка образа

Для сборки образа используем команду `docker build`:

```bash
docker build -t my-python-app .
```

* `-t my-python-app`: Присваиваем образу имя "my-python-app".
* `.`: Указывает Docker использовать текущую директорию как контекст сборки.

#### Хранилище образов

Docker Hub — это публичный реестр образов Docker, где можно найти готовые образы для различных приложений и сервисов. Вы также можете создавать собственные репозитории и хранить там свои образы.

#### Скачивание образа

Для скачивания образа используем команду `docker pull`:

```bash
docker pull nginx:latest
```

* `nginx`: Имя образа.
* `latest`: Тег образа, указывающий на последнюю версию.

### Контейнеры Docker: Запущенные экземпляры образов

Контейнер Docker — это запущенный экземпляр образа. Можно представить образ как шаблон, а контейнер — как готовый к использованию объект, созданный по этому шаблону. Каждый контейнер изолирован от других контейнеров и хост-системы, что обеспечивает безопасность и предсказуемость работы приложений.

#### Запуск контейнера

Для запуска контейнера используется команда `docker run`:

```bash
docker run -d -p 80:80 nginx:latest
```

* `-d`: Запускает контейнер в фоновом режиме.
* `-p 80:80`: Пробрасывает порт 80 из контейнера на порт 80 хост-системы.
* `nginx:latest`: Имя и тег образа, из которого будет запущен контейнер.

#### Управление контейнерами

Docker предоставляет набор команд для управления контейнерами:

* `docker ps`: Показать список запущенных контейнеров.
* `docker stop <container_id>`: Остановить контейнер.
* `docker start <container_id>`: Запустить остановленный контейнер.
* `docker restart <container_id>`: Перезапустить контейнер.
* `docker kill <container_id>`: Принудительно остановить контейнер.
* `docker rm <container_id>`: Удалить контейнер.
* `docker logs <container_id>`: Посмотреть логи контейнера.
* `docker exec -it <container_id> bash`: Подключиться к консоли контейнера.

### Заключение

Образы и контейнеры Docker — фундаментальные понятия, лежащие в основе технологии. Образы предоставляют стандартизированный способ упаковки и распространения приложений, а контейнеры обеспечивают изолированную и предсказуемую среду для их запуска. Осваивая Docker, важно понимать разницу между образами и контейнерами и то, как они взаимодействуют друг с другом.
