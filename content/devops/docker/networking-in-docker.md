## Сети и связность в Docker

Docker значительно упрощает развертывание и запуск приложений в изолированной среде. Однако для полноценной работы приложениям часто требуется взаимодействие друг с другом и с внешним миром. В этой статье мы рассмотрим, как Docker обеспечивает сетевую связность контейнеров и как настраивать различные типы сетей для различных сценариев использования.

### Основы сетей Docker

При установке Docker автоматически создает три сетевых драйвера по умолчанию: `bridge`, `host` и `none`. 

* **`bridge`:** Мостовая сеть - это сетевой драйвер по умолчанию. При запуске контейнера без явного указания сети он будет подключен к виртуальному мосту Docker (`docker0`). Контейнеры в одной мостовой сети могут взаимодействовать друг с другом по IP-адресам, назначенным Docker. 
* **`host`:** Этот драйвер позволяет контейнеру использовать сетевой стек хост-системы. Это обеспечивает максимальную производительность сети, но делает контейнер менее изолированным. 
* **`none`:** Отключает сетевые возможности контейнера.

### Работа с сетями Docker

Для управления сетями Docker используйте команду `docker network`. 

#### Создание пользовательской сети

Вы можете создавать собственные сети Docker, например, для изоляции групп контейнеров друг от друга.  

```
docker network create my-custom-network
```

Эта команда создаст новую мостовую сеть с именем `my-custom-network`.

#### Просмотр сетей

Для просмотра списка доступных сетей выполните команду:

```
docker network ls
```

#### Подключение контейнера к сети

Чтобы подключить контейнер к сети во время его запуска, используйте флаг `--network`:

```
docker run -d --name my-container --network my-custom-network nginx:latest
```

Эта команда запустит контейнер `nginx` и подключит его к сети `my-custom-network`.

#### Отключение контейнера от сети

Для отключения контейнера от сети используйте команду `docker network disconnect`:

```
docker network disconnect my-custom-network my-container
```

#### Удаление сети

Для удаления сети используйте команду `docker network rm`:

```
docker network rm my-custom-network
```

### Общение между контейнерами

Контейнеры в одной сети Docker могут взаимодействовать друг с другом, используя имена контейнеров в качестве имен хостов. 

#### Пример:

1. Запустите два контейнера в одной сети:

```
docker network create my-network
docker run -d --name webserver --network my-network nginx:latest
docker run -d --name client --network my-network alpine:latest ping webserver -c 5
```

2. Проверьте, что контейнер `client` может успешно выполнить ping контейнера `webserver`, используя его имя:

```
docker logs client
```

### Порты и связывание портов

Docker позволяет публиковать порты контейнеров на хост-системе, делая сервисы, запущенные в контейнерах, доступными извне.

#### Публикация портов

Для публикации порта во время запуска контейнера используйте флаг `-p`:

```
docker run -d -p 8080:80 --name webserver nginx:latest
```

Эта команда запустит контейнер `nginx` и опубликует порт 80 контейнера на порту 8080 хост-системы. Теперь вы можете получить доступ к веб-серверу nginx, запущенному в контейнере, по адресу `http://localhost:8080`.

### Заключение

Сети Docker - важный аспект работы с Docker. Понимание того, как работают сети Docker, необходимо для создания сложных приложений и обеспечения их взаимодействия. В этой статье мы рассмотрели основы сетей Docker,  управление сетями,  коммуникацию между контейнерами и публикацию портов. 

Более подробную информацию о сетях Docker можно найти в официальной документации Docker: [https://docs.docker.com/](https://docs.docker.com/) 
