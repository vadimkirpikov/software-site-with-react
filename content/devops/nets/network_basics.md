## Основы сетевого уровня

В этой части руководства мы погрузимся в основы сетевого уровня (уровень 3 модели OSI), который играет ключевую роль в передаче данных по компьютерным сетям. Именно на этом уровне реализована возможность соединения различных сетей и доставки пакетов данных от отправителя к получателю, независимо от их физического местоположения.

### IP-адресация

Фундаментальным понятием сетевого уровня является **IP-адрес** (Internet Protocol address) - уникальный идентификатор, присваиваемый каждому устройству в сети. IP-адрес позволяет однозначно идентифицировать устройство и взаимодействовать с ним.

Существуют две версии IP-адресов: IPv4 и IPv6.  

* **IPv4** использует 32-битный адрес, который обычно представляется в десятичном формате с четырьмя десятичными числами, разделенными точками, например, 192.168.1.100. 
* **IPv6**  использует 128-битный адрес, представленный в шестнадцатеричной системе счисления с использованием восьми групп по четыре шестнадцатеричных цифры, разделенных двоеточиями, например, 2001:0db8:85a3:0000:0000:8a2e:0370:7334.

IP-адрес состоит из двух частей: идентификатора сети и идентификатора узла. Идентификатор сети определяет сеть, к которой принадлежит устройство, а идентификатор узла - конкретное устройство в этой сети. 

### Маска подсети

Для разделения IP-адреса на идентификатор сети и идентификатор узла используется **маска подсети**.  Маска подсети - это 32-битное число (для IPv4), которое используется для определения того, какие биты IP-адреса относятся к идентификатору сети, а какие - к идентификатору узла.

Маска подсети записывается в том же формате, что и IP-адрес. Например, маска подсети 255.255.255.0 означает, что первые 24 бита IP-адреса относятся к идентификатору сети, а последние 8 бит - к идентификатору узла.

### Маршрутизация

**Маршрутизаторы** - это сетевые устройства, которые работают на сетевом уровне и отвечают за пересылку пакетов данных между сетями.  Маршрутизаторы используют таблицы маршрутизации для определения оптимального пути для доставки пакета данных. 

**Таблица маршрутизации** - это база данных, хранящаяся на маршрутизаторе, которая содержит информацию о том, как достичь различных сетей. Каждый маршрут в таблице маршрутизации включает в себя:

* Целевую сеть - сеть, к которой необходимо доставить пакет.
* Маску подсети -  используется для определения, относится ли целевая сеть к данному маршруту.
* Шлюз - IP-адрес следующего маршрутизатора, через который нужно переслать пакет.
* Интерфейс - сетевой интерфейс маршрутизатора, через который нужно переслать пакет.

### Протокол ICMP

**ICMP** (Internet Control Message Protocol) - это протокол сетевого уровня, используемый для обмена управляющими и сообщениями об ошибках. ICMP используется для следующих целей:

* Уведомление об ошибках доставки пакетов данных.
* Диагностика неполадок в сети.
* Получение информации о состоянии сети.

Одним из наиболее известных применений ICMP является утилита **ping**, которая отправляет ICMP-запрос на указанный IP-адрес и ожидает ICMP-ответа.  

### Пример кода: использование ping в Python

```python
import os

# IP-адрес или имя хоста для проверки
hostname = "google.com"

# Выполнение команды ping с помощью os.system()
response = os.system("ping -c 1 " + hostname)

# Проверка кода ответа
if response == 0:
    print(f"{hostname} доступен")
else:
    print(f"{hostname} недоступен")

```

### Заключение

В этой статье мы рассмотрели основные понятия сетевого уровня, включая IP-адресацию, маски подсети, маршрутизацию и протокол ICMP. Знание этих основ важно для понимания работы компьютерных сетей и настройки сетевых устройств.  В следующих разделах мы рассмотрим более сложные аспекты работы сетевого уровня и протоколы, используемые на этом уровне.
