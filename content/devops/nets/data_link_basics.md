## Основы канального уровня

В этой статье мы погрузимся в основы канального уровня модели OSI, который отвечает за надежную передачу данных между узлами сети, находящимися в одном сегменте.  

### Функции канального уровня

Канальный уровень выполняет несколько важных функций:

* **Обрамление данных:** Добавляет заголовки и трейлеры к пакетам данных, полученным с сетевого уровня, формируя кадры. Заголовки и трейлеры содержат управляющую информацию, такую как адреса MAC, контрольные суммы и типы протоколов.
* **Физическая адресация:** Использует MAC-адреса для идентификации устройств в локальной сети. 
* **Обнаружение и исправление ошибок:**  Обеспечивает целостность данных путем добавления контрольных сумм в кадры. Принимающая сторона проверяет контрольную сумму и может запросить повторную передачу кадра в случае ошибки.
* **Управление доступом к среде передачи данных:**  Регулирует доступ нескольких устройств к общей среде передачи данных (например, кабелю), предотвращая коллизии.

### MAC-адрес

MAC-адрес (Media Access Control address) - это уникальный идентификатор, присваиваемый сетевому интерфейсу (NIC) устройства.  MAC-адрес состоит из 48 бит, обычно отображаемых в шестнадцатеричном формате, например, 00-15-5D-01-02-03. 

### Методы управления доступом к среде

Для предотвращения коллизий при одновременной передаче данных несколькими устройствами используются различные методы управления доступом к среде:

* **CSMA/CD (Carrier Sense Multiple Access with Collision Detection):**  Устройство "слушает" среду передачи данных перед отправкой данных. Если среда свободна, устройство начинает передачу. В случае обнаружения коллизии, устройства прекращают передачу и ожидают случайный интервал времени, прежде чем повторить попытку.
* **CSMA/CA (Carrier Sense Multiple Access with Collision Avoidance):** Устройство отправляет специальный кадр RTS (Request to Send) перед началом передачи.  Если получатель готов принять данные, он отвечает кадром CTS (Clear to Send), разрешая передачу. 

### Протоколы канального уровня

Существует множество протоколов, работающих на канальном уровне.  Рассмотрим некоторые из них:

* **Ethernet:**  Наиболее распространенный стандарт локальных сетей, использующий CSMA/CD для управления доступом к среде.
* **Wi-Fi (802.11):**  Стандарт беспроводных локальных сетей, использующий CSMA/CA для управления доступом к среде.
* **PPP (Point-to-Point Protocol):** Протокол, используемый для установления соединения между двумя узлами, например, компьютером и модемом.

### Пример кода

Пример кода на Python, демонстрирующий получение MAC-адреса сетевого интерфейса:

```python
import uuid

def get_mac_address():
  """
  Получает MAC-адрес сетевого интерфейса.
  """

  mac = ':'.join(['{:02x}'.format((uuid.getnode() >> ele) & 0xff)
  for ele in range(0, 8 * 6, 8)][::-1])

  return mac

# Получаем MAC-адрес
mac_address = get_mac_address()
print("MAC-адрес:", mac_address)
```

### Заключение

В этой статье мы рассмотрели основы канального уровня модели OSI, его функции, протоколы и методы управления доступом к среде. Понимание принципов работы канального уровня важно для эффективного проектирования, настройки и диагностики компьютерных сетей. 
