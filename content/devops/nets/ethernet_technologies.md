## Ethernet: основы технологии

Ethernet – это семейство технологий передачи данных, широко используемых в локальных сетях (LAN).  Он определяет проводные соединения и сигналы электрического уровня, используемые сетевыми устройствами для связи и обмена данными. 

##  Как работает Ethernet 

Ethernet работает на уровне канального уровня модели OSI, отвечая за физическую передачу данных и управление доступом к среде передачи. 

### Физический уровень 

Ethernet поддерживает различные типы физических сред, включая коаксиальный кабель, витую пару и оптоволокно. Стандарты Ethernet определяют типы кабелей, разъемы, схемы подключения и электрические сигналы, используемые для передачи данных.

###  Управление доступом к среде передачи 

Для предотвращения коллизий, когда несколько устройств пытаются одновременно передавать данные по общей среде, Ethernet использует метод доступа к среде передачи **CSMA/CD** (Carrier Sense Multiple Access with Collision Detection, множественный доступ с контролем несущей и обнаружением коллизий). 

**Как работает CSMA/CD:**

1.  **Прослушивание:**  Устройство, желающее передавать данные, сначала прослушивает среду передачи, чтобы убедиться, что она свободна. 
2.  **Передача:**  Если среда свободна, устройство начинает передачу данных.
3.  **Обнаружение коллизий:**  Во время передачи устройство продолжает прослушивать среду. Если обнаруживается коллизия (два или более устройств передают одновременно), передача прекращается.
4.  **Отсрочка:**  После обнаружения коллизии каждое устройство, участвующее в коллизии, ожидает случайный интервал времени, прежде чем попытаться повторно передать данные.

###  Кадры Ethernet 

Данные в сетях Ethernet передаются в виде блоков, называемых **фреймами**. Каждый фрейм имеет следующую структуру:

| Поле          | Описание                                                                         | Размер      |
|---------------|-----------------------------------------------------------------------------------|-------------|
| Преамбула    | Синхронизация приемника с сигналом                                                | 7 байт      |
| Ограничитель | Обозначение начала кадра                                                       | 1 байт      |
| MAC-адрес назначения | MAC-адрес устройства-получателя                                              | 6 байт      |
| MAC-адрес источника | MAC-адрес устройства-отправителя                                              | 6 байт      |
| Тип/Длина   | Тип протокола верхнего уровня или длина поля данных                             | 2 байта      |
| Данные       | Передаваемые данные                                                              | 46-1500 байт |
| CRC         | Контрольная сумма для обнаружения ошибок                                           | 4 байта      |

##  Стандарты Ethernet 

Существует множество стандартов Ethernet, которые определяют различные аспекты технологии, такие как скорость передачи данных, тип кабеля и максимальная длина сегмента. 

Некоторые из наиболее распространенных стандартов Ethernet:

| Стандарт | Скорость   | Тип кабеля  | Максимальная длина сегмента |
|----------|------------|-------------|------------------------------|
| 10BASE-T | 10 Мбит/с | витая пара | 100 метров                     |
| 100BASE-TX | 100 Мбит/с | витая пара | 100 метров                     |
| 1000BASE-T | 1 Гбит/с   | витая пара | 100 метров                     |
| 10GBASE-T | 10 Гбит/с  | витая пара | 100 метров                     |

##  Преимущества Ethernet 

* **Простота и низкая стоимость:** Ethernet относительно прост в установке и обслуживании, а оборудование для него стоит недорого.
* **Высокая скорость передачи данных:** Современные стандарты Ethernet обеспечивают скорость передачи данных до 100 Гбит/с и выше.
* **Широкая распространенность:** Ethernet является самой распространенной сетевой технологией в мире, поэтому существует большой выбор оборудования и программного обеспечения.

## Пример кода: обработка фреймов Ethernet на Python

```python
import socket

# Создаем сокет типа "сырой" для доступа к Ethernet-фреймам
s = socket.socket(socket.AF_PACKET, socket.SOCK_RAW, socket. htons(0x0003))

# Бесконечный цикл для приема фреймов
while True:
    # Получаем фрейм Ethernet
    frame = s.recv(65535)

    # Извлекаем MAC-адрес назначения из фрейма
    dst_mac = frame[0:6].hex(':') 

    # Извлекаем MAC-адрес источника из фрейма
    src_mac = frame[6:12].hex(':')

    # Выводим информацию о фрейме
    print(f"Получен фрейм от {src_mac} для {dst_mac}")

```
**Комментарии к коду:**

*   `socket.AF_PACKET`:  указываем, что работаем с Ethernet-фреймами
*   `socket.SOCK_RAW`:  используем "сырые" сокеты для доступа к фреймам без заголовков
*   `socket.htons(0x0003)`:  указываем протокол Ethernet (0x0003) в сетевом порядке байтов
*   `frame[0:6].hex(':')`:  извлекаем первые 6 байт фрейма (MAC-адрес назначения) и преобразуем их в шестнадцатеричное представление с разделителями ":"

Этот код демонстрирует, как можно работать с Ethernet-фреймами на низком уровне с помощью Python. Вы можете модифицировать этот код для анализа содержимого фреймов, фильтрации фреймов по определенным критериям и других задач.

## Заключение

Ethernet - это основа сетевой инфраструктуры во всем мире. Понимание его принципов работы, стандартов и преимуществ является важным шагом на пути к изучению более сложных сетевых технологий. 
