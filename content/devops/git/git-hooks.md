## Git Hooks: Автоматизация Рабочего Процесса

Git hooks — это скрипты, которые запускаются автоматически при наступлении определенных событий в репозитории Git. Они позволяют настроить автоматические действия, такие как проверка кода перед коммитом, отправка уведомлений или развертывание приложения.

### Типы Git Hooks

Git hooks делятся на две основные категории:

* **Клиентские:** запускаются на стороне клиента (локальный репозиторий) при выполнении таких действий, как коммит или слияние.
* **Серверные:** запускаются на стороне сервера при получении push-запроса или других действиях на удаленном репозитории.

Внутри каждой категории существует множество типов хуков, запускаемых при разных событиях. Вот некоторые из наиболее часто используемых:

| Тип хука    | Описание                                                                            | Категория  |
|-------------|-------------------------------------------------------------------------------------|------------|
| `pre-commit`  | Запускается перед созданием коммита. Позволяет проверить код перед сохранением изменений. | Клиентский |
| `post-commit` | Запускается после создания коммита. Используется для отправки уведомлений.        | Клиентский |
| `pre-push`   | Запускается перед отправкой изменений на удаленный репозиторий.                   | Клиентский |
| `post-receive`| Запускается на сервере после получения изменений. Используется для деплоя.        | Серверный  |


### Создание и Активация Git Hooks

Хуки хранятся в папке `.git/hooks` каждого репозитория. По умолчанию Git создает примеры хуков с расширением `.sample`. 

Чтобы активировать хук, нужно:

1. **Переименовать файл**, удалив расширение `.sample`. Например, переименовать `pre-commit.sample` в `pre-commit`.
2. **Сделать файл исполняемым**. В Linux и macOS это можно сделать командой `chmod +x pre-commit`.

### Пример Использования: Проверка Стиля Кода

Рассмотрим пример создания хука `pre-commit`, который проверяет стиль кода перед каждым коммитом, используя линтер `flake8`:

1. **Создайте файл** `.git/hooks/pre-commit`:

```bash
#!/bin/bash

# Проверка наличия flake8
command -v flake8 >/dev/null 2>&1 || { echo >&2 "flake8 не найден. Установите flake8 с помощью pip install flake8."; exit 1; }

# Проверка стиля кода с помощью flake8
flake8 --exclude .git,.venv --max-line-length=120  # Добавьте нужные опции

# Выход из скрипта с кодом ошибки, если flake8 вернул ошибки
if [ $? -ne 0 ]; then
  echo "Ошибка: Исправьте ошибки стиля кода перед коммитом."
  exit 1
fi

# Выход без ошибок, если flake8 не вернул ошибок
exit 0
```

2. **Сделайте файл исполняемым:**

```bash
chmod +x .git/hooks/pre-commit
```

Теперь при попытке сделать коммит `flake8` проверит код на соответствие заданным правилам стиля. Если ошибки будут найдены, коммит будет прерван, и в консоли появится сообщение с просьбой исправить ошибки. 

### Преимущества Использования Git Hooks

* **Автоматизация рутинных задач:** Хуки позволяют автоматизировать проверку кода, отправку уведомлений, деплой и другие повторяющиеся действия.
* **Повышение качества кода:** Хуки могут проверять код на соответствие стандартам, находить потенциальные ошибки и обеспечивать единый стиль кодирования в команде.
* **Улучшение коммуникации:** Хуки позволяют отправлять уведомления о коммитах, пул-реквестах и других событиях, что улучшает коммуникацию внутри команды.

### Заключение

Git hooks - это мощный инструмент, который позволяет настроить автоматизацию и улучшить рабочий процесс разработки. Используйте их для повышения эффективности работы, улучшения качества кода и упрощения коммуникации в команде.
