<h2>Управление дисками и файловыми системами</h2>

Управление дисковым пространством является важной частью администрирования Linux. В этом разделе мы рассмотрим основные команды для работы с дисками, разделами и файловыми системами.

<h3>Определение дисков</h3>

Для начала нам необходимо определить, какие диски доступны в системе.  Для этого используется команда `lsblk`:

```
lsblk
```

Эта команда выведет список всех блочных устройств, включая жесткие диски, SSD, USB-накопители и разделы. 

Пример вывода команды `lsblk`:

```
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0 232,9G  0 disk 
├─sda1   8:1    0   512M  0 part /boot/efi
├─sda2   8:2    0     1G  0 part /boot
└─sda3   8:3    0 231,4G  0 part /
sdb      8:16   0   1,8T  0 disk 
└─sdb1   8:17   0   1,8T  0 part /mnt/data
```

В этом примере мы видим два диска: `sda` и `sdb`. Диск `sda` размером 232,9 ГБ разделен на три раздела: `sda1`, `sda2` и `sda3`.  Раздел `sda3` смонтирован в корневую директорию (`/`). Диск `sdb` размером 1,8 ТБ имеет один раздел `sdb1`, который смонтирован в директорию `/mnt/data`.

<h3>Создание разделов</h3>

Для создания разделов используется утилита `fdisk` или `parted`. Мы рассмотрим пример использования `fdisk`.

**Важно:** Будьте осторожны при работе с `fdisk`, так как неправильные действия могут привести к потере данных. 

**Создание нового раздела на диске /dev/sdb:**

1. Запустите `fdisk` в интерактивном режиме:

```
sudo fdisk /dev/sdb
```

2. Введите `n` для создания нового раздела.

3. Выберите тип раздела: `p` для первичного или `e` для расширенного.

4. Укажите номер раздела.

5. Укажите первый и последний секторы раздела (по умолчанию используется все доступное пространство).

6. Введите `t` для изменения типа раздела.

7. Введите код файловой системы. Например, `83` для Linux.

8. Введите `w` для записи изменений на диск.

**Важно:** После создания разделов необходимо отформатировать их под нужную файловую систему.

<h3>Форматирование разделов</h3>

Для форматирования разделов используются команды `mkfs.*`, где `*` - тип файловой системы. 

**Форматирование раздела /dev/sdb1 в файловую систему ext4:**

```
sudo mkfs.ext4 /dev/sdb1
```

**Другие файловые системы:**

* **ext3:** `sudo mkfs.ext3 /dev/sdX`
* **XFS:** `sudo mkfs.xfs /dev/sdX`
* **Btrfs:** `sudo mkfs.btrfs /dev/sdX`

**Важно:** Замените `/dev/sdX` на имя вашего раздела.

<h3>Монтирование файловых систем</h3>

Монтирование - это процесс подключения файловой системы к определенной директории в дереве каталогов. 

**Монтирование раздела /dev/sdb1 в директорию /mnt/data:**

1. Создайте директорию для монтирования:

```
sudo mkdir /mnt/data
```

2. Смонтируйте раздел:

```
sudo mount /dev/sdb1 /mnt/data
```

**Автоматическое монтирование при загрузке:**

Для автоматического монтирования раздела при загрузке системы необходимо добавить соответствующую запись в файл `/etc/fstab`. 

**Пример записи в /etc/fstab:**

```
/dev/sdb1 /mnt/data ext4 defaults 0 0
```

**Важно:** Будьте осторожны при редактировании файла `/etc/fstab`, так как ошибки могут привести к невозможности загрузки системы.

<h3>Размонтирование файловой системы</h3>

Для отключения файловой системы от дерева каталогов используется команда `umount`:

```
sudo umount /mnt/data
```

**Важно:** Перед отключением раздела убедитесь, что в нем не используются файлы или программы.

<h3>Дополнительные команды</h3>

* **`df -h`:**  отображает информацию о занятом и свободном пространстве на смонтированных файловых системах.
* **`du -sh <директория>`:**  отображает размер указанной директории.
* **`fsck /dev/sdX`:**  проверяет и исправляет ошибки файловой системы на разделе /dev/sdX.

Это лишь базовые команды для управления дисками и файловыми системами в Linux. Существует множество дополнительных инструментов и опций, которые вы можете изучить самостоятельно. 
