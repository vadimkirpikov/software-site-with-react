## Примеры конфигураций и решений

В этой части руководства мы рассмотрим несколько практических примеров конфигурирования системы Linux и решения распространённых задач. 

### Управление сервисами с помощью systemd

Systemd - это система инициализации и управления сервисами в большинстве современных дистрибутивов Linux. 

#### Запуск, остановка и перезапуск сервисов

```
# Запуск сервиса nginx
sudo systemctl start nginx

# Остановка сервиса nginx
sudo systemctl stop nginx

# Перезапуск сервиса nginx
sudo systemctl restart nginx
```

#### Проверка статуса сервиса

```
# Проверка статуса сервиса nginx
sudo systemctl status nginx
```

#### Установка сервиса в автозагрузку

```
# Добавление сервиса nginx в автозагрузку
sudo systemctl enable nginx

# Удаление сервиса nginx из автозагрузки
sudo systemctl disable nginx
```

### Настройка сети

#### Статическая конфигурация сети

Для статической настройки сетевого интерфейса используется файл конфигурации, расположенный в директории `/etc/netplan/`. 

Пример файла конфигурации `01-network-manager-all.yaml`:

```yaml
network:
  version: 2
  renderer: networkd
  ethernets:
    enp0s3:
      dhcp4: no
      addresses: [192.168.1.100/24]
      gateway4: 192.168.1.1
      nameservers:
        addresses: [8.8.8.8, 8.8.4.4]
```

* `network:` - корневой элемент конфигурации.
* `version: 2` - версия конфигурационного файла.
* `renderer: networkd` - указывает, что конфигурация будет применена с помощью NetworkManager.
* `ethernets:` - секция для настройки проводных сетевых интерфейсов.
* `enp0s3:` - имя сетевого интерфейса (может отличаться в вашей системе).
* `dhcp4: no` - отключает DHCP для IPv4.
* `addresses:` - список IP-адресов и масок подсети.
* `gateway4:` - IP-адрес шлюза для IPv4.
* `nameservers:` - список DNS-серверов.

**Применение конфигурации:**

```
sudo netplan apply
```

#### Динамическая конфигурация сети (DHCP)

Для динамической настройки сети с использованием DHCP достаточно указать `dhcp4: yes` в конфигурации сетевого интерфейса:

```yaml
network:
  version: 2
  renderer: networkd
  ethernets:
    enp0s3:
      dhcp4: yes
```

### Установка и обновление программного обеспечения

#### Установка пакетов с помощью apt

Для установки пакетов в Debian-based системах (Ubuntu, Debian) используется пакетный менеджер `apt`.

```
# Обновление списка пакетов
sudo apt update

# Установка пакета nginx
sudo apt install nginx
```

#### Установка пакетов с помощью yum

В RedHat-based системах (CentOS, Fedora) используется пакетный менеджер `yum`.

```
# Обновление списка пакетов
sudo yum update

# Установка пакета nginx
sudo yum install nginx
```

#### Обновление системы

```
# Обновление системы с помощью apt
sudo apt update && sudo apt upgrade -y

# Обновление системы с помощью yum
sudo yum update -y
```

### Управление пользователями и группами

#### Создание нового пользователя

```
# Создание пользователя "john"
sudo useradd john

# Установка пароля для пользователя "john"
sudo passwd john
```

#### Добавление пользователя в группу

```
# Добавление пользователя "john" в группу "sudo"
sudo usermod -aG sudo john
```

#### Удаление пользователя

```
# Удаление пользователя "john"
sudo userdel john
```

### Работа с файлами и директориями

#### Создание, копирование, перемещение и удаление файлов и директорий

```
# Создание директории
mkdir /tmp/test

# Создание пустого файла
touch /tmp/test/file.txt

# Копирование файла
cp /tmp/test/file.txt /tmp/test/file_copy.txt

# Перемещение файла
mv /tmp/test/file_copy.txt /tmp/test/file_moved.txt

# Удаление файла
rm /tmp/test/file_moved.txt

# Удаление директории
rm -r /tmp/test
```

#### Просмотр содержимого файлов

```
# Вывод содержимого файла на экран
cat /etc/passwd

# Просмотр содержимого файла с постраничной навигацией
less /etc/passwd
```

### Работа с правами доступа

#### Просмотр прав доступа к файлу

```
ls -l /etc/passwd
```

#### Изменение владельца и группы файла

```
# Изменение владельца и группы файла /tmp/test.txt на пользователя "john"
sudo chown john:john /tmp/test.txt
```

#### Изменение прав доступа к файлу

```
# Установка прав на чтение и запись для владельца, 
# чтение для группы и ничего для остальных пользователей
chmod 640 /tmp/test.txt
```

#### Таблица прав доступа

| Цифра | Права доступа | Описание |
|---|---|---|
| 7 | rwx | Чтение, запись, выполнение |
| 6 | rw- | Чтение, запись |
| 5 | r-x | Чтение, выполнение |
| 4 | r-- | Только чтение |
| 3 | -wx | Запись, выполнение |
| 2 | -w- | Только запись |
| 1 | --x | Только выполнение |
| 0 | --- | Нет прав |

### Заключение

В этом разделе мы рассмотрели базовые примеры конфигурирования Linux и решения повседневных задач. 
Для более глубокого изучения возможностей системы Linux обратитесь к документации и специализированным ресурсам. 
