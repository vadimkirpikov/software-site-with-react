## Подготовка и развертывание Nginx

Перед тем как приступить к настройке и использованию Nginx, необходимо правильно его подготовить и развернуть на вашем сервере. Данный процесс может незначительно отличаться в зависимости от операционной системы, которую вы используете. В этом разделе мы рассмотрим общие принципы и приведем примеры для Ubuntu/Debian и CentOS/RHEL.

### Шаг 1. Установка Nginx

#### Ubuntu/Debian:

1. Обновите список пакетов и установите Nginx:
```bash
sudo apt update
sudo apt install nginx
```

#### CentOS/RHEL:

1. Установите Nginx из репозитория EPEL:
```bash
sudo yum install epel-release
sudo yum install nginx
```

### Шаг 2. Проверка установки

После завершения установки необходимо убедиться, что Nginx был установлен корректно и запущен. 

1. Проверьте статус сервиса Nginx:
```bash
sudo systemctl status nginx
```

   В выводе команды вы должны увидеть строку `Active: active (running)`, подтверждающую, что Nginx запущен.

2. Откройте веб-браузер и перейдите по адресу вашего сервера (например, `http://your_server_ip`). 

   Вы должны увидеть стандартную страницу приветствия Nginx. Это означает, что установка прошла успешно.

### Шаг 3. Настройка Nginx

Конфигурационные файлы Nginx хранятся в директории `/etc/nginx/`. Основной конфигурационный файл - `/etc/nginx/nginx.conf`. Этот файл содержит глобальные настройки Nginx. 

Конфигурации отдельных сайтов хранятся в отдельных файлах в директории `/etc/nginx/sites-available/`. Для активации конфигурации сайта необходимо создать символьную ссылку на соответствующий файл в директории `/etc/nginx/sites-enabled/`.

Рассмотрим пример простой конфигурации виртуального хоста:

```nginx
server {
    listen 80;
    server_name example.com www.example.com;

    root /var/www/example.com/html;
    index index.html index.htm;

    location / {
        try_files $uri $uri/ =404;
    }
}
```

**Описание параметров:**

* `listen 80`: прослушивать соединения на порту 80 (стандартный порт HTTP).
* `server_name example.com www.example.com`: доменные имена, обслуживаемые этим виртуальным хостом.
* `root /var/www/example.com/html`: корневая директория сайта.
* `index index.html index.htm`: список файлов, которые будут искаться в корневой директории при запросе директории.
* `location /`: блок, определяющий обработку запросов к корневому пути сайта.
* `try_files $uri $uri/ =404`: попытка найти файл или директорию, соответствующую запросу, и вернуть ошибку 404, если файл не найден.

### Шаг 4. Создание виртуального хоста

1. Создайте директорию для файлов сайта:

   ```bash
   sudo mkdir -p /var/www/example.com/html
   ```

2. Создайте файл конфигурации виртуального хоста:

   ```bash
   sudo nano /etc/nginx/sites-available/example.com.conf
   ```

3. Вставьте конфигурацию виртуального хоста (см. пример выше), заменив `example.com` на ваше доменное имя.

4. Сохраните файл и закройте редактор.

5. Активируйте виртуальный хост:

   ```bash
   sudo ln -s /etc/nginx/sites-available/example.com.conf /etc/nginx/sites-enabled/
   ```

6. Проверьте конфигурацию Nginx на наличие ошибок:

   ```bash
   sudo nginx -t
   ```

   Если в конфигурации нет ошибок, вы увидите сообщение `syntax is ok` и `test is successful`.

7. Перезапустите Nginx, чтобы применить изменения:

   ```bash
   sudo systemctl restart nginx
   ```

### Шаг 5. Размещение сайта

1. Скопируйте файлы вашего сайта в директорию, указанную в конфигурации виртуального хоста (в нашем примере это `/var/www/example.com/html`).

2. Откройте веб-браузер и перейдите по адресу вашего домена. 

   Вы должны увидеть ваш сайт.

## Заключение

В этом разделе мы рассмотрели основные этапы подготовки и развертывания Nginx. Вы научились устанавливать Nginx, создавать виртуальные хосты и размещать сайты. 

В следующих разделах мы подробнее рассмотрим конфигурацию Nginx, включая настройку SSL/TLS, кэширование, балансировку нагрузки и многое другое. 
