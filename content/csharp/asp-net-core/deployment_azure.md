## Развертывание приложения ASP.NET Core 8.0 на Azure

Развертывание приложения — это важный этап его жизненного цикла. В этой статье мы рассмотрим процесс развертывания ASP.NET Core 8.0 приложения на платформе Azure. Azure предоставляет различные сервисы для размещения приложений, и мы сосредоточимся на одном из наиболее популярных и удобных вариантов — Azure App Service.

### Что такое Azure App Service?

Azure App Service — это PaaS (Platform as a Service) решение от Microsoft Azure. Он позволяет развертывать и масштабировать веб-приложения, API и фоновые службы, написанные на различных языках программирования, включая .NET, Java, PHP, Node.js и Python.

**Преимущества Azure App Service:**

* **Простота развертывания:** Azure предлагает различные способы развертывания приложений, включая Git, FTP, Visual Studio и Azure DevOps.
* **Автоматическое масштабирование:** Вы можете настроить автоматическое масштабирование вашего приложения в зависимости от нагрузки, что позволяет оптимизировать затраты.
* **Высокая доступность:** Azure App Service гарантирует высокую доступность вашего приложения благодаря использованию отказоустойчивой инфраструктуры.
* **Интеграция с другими сервисами Azure:** App Service легко интегрируется с другими сервисами Azure, такими как Azure SQL Database, Azure Storage и Azure Active Directory.

### Подготовка к развертыванию

1. **Создайте учетную запись Azure:** Если у вас еще нет учетной записи Azure, вы можете создать ее бесплатно на сайте [https://azure.microsoft.com](https://azure.microsoft.com). 
2. **Установите инструменты:** Для развертывания приложения из Visual Studio вам потребуется установить **Azure development workload**:
    * Откройте Visual Studio Installer.
    * Выберите **Modify**.
    * В разделе **Workloads** установите флажок **Azure development**.
    * Нажмите **Modify** для установки выбранных компонентов.

### Создание приложения App Service

1. **Войдите в портал Azure:** Перейдите на сайт [https://portal.azure.com](https://portal.azure.com) и войдите в свою учетную запись.
2. **Создайте ресурс App Service:** 
    * Нажмите кнопку **Create a resource**.
    * В поле поиска введите **App Service** и выберите соответствующий результат.
    * Нажмите кнопку **Create**.
3. **Настройте параметры приложения:**
    * **Subscription**: выберите подписку Azure, которую хотите использовать.
    * **Resource group**: выберите существующую группу ресурсов или создайте новую.
    * **Name**: введите уникальное имя для вашего приложения App Service.
    * **Publish**: выберите **Code**.
    * **Runtime stack**: выберите **.NET 8 (LTS)**.
    * **Operating System**: выберите желаемую операционную систему (Windows или Linux).
    * **Region**: выберите географическое расположение для вашего приложения.
    * **Plan**: выберите ценовой план. Для тестирования вы можете использовать бесплатный уровень **Free F1**.
    * Нажмите кнопку **Review + create**.

4. **Проверьте настройки и создайте приложение:** Проверьте выбранные настройки и нажмите кнопку **Create**, чтобы начать создание приложения App Service.
5. **Дождитесь завершения развертывания:** Создание приложения App Service займет несколько минут.

### Развертывание приложения

Теперь, когда ваше приложение App Service создано, вы можете развернуть на нем ваше ASP.NET Core приложение.

#### Развертывание из Visual Studio

1. **Откройте ваш проект ASP.NET Core в Visual Studio.**
2. **Щелкните правой кнопкой мыши на проекте в обозревателе решений и выберите **Publish**.
3. **Выберите **Azure** в качестве целевого объекта развертывания.**
4. **Выберите **Azure App Service (Windows or Linux)** в зависимости от того, какую операционную систему вы выбрали при создании App Service.**
5. **Выберите существующую подписку Azure.**
6. **Выберите созданное ранее приложение App Service.**
7. **Нажмите кнопку **Finish**.**

Visual Studio соберет ваш проект, создаст необходимые артефакты развертывания и загрузит их в App Service. После завершения развертывания Visual Studio автоматически откроет браузер с адресом вашего приложения.

#### Развертывание с помощью Git

1. **Откройте терминал и перейдите в папку с вашим проектом ASP.NET Core.**
2. **Выполните следующую команду, чтобы инициализировать Git-репозиторий:**
    ```bash
    git init
    ```
3. **Добавьте все файлы в репозиторий и сделайте коммит:**
    ```bash
    git add .
    git commit -m "Initial commit"
    ```
4. **В портале Azure откройте страницу вашего приложения App Service.**
5. **В меню слева выберите **Deployment Center**.**
6. **Выберите **Local Git** в качестве источника развертывания.**
7. **Скопируйте URL-адрес Git-репозитория.**
8. **В терминале выполните следующую команду, чтобы добавить удаленный репозиторий:**
    ```bash
    git remote add azure [скопированный URL-адрес репозитория]
    ```
9. **Выполните следующую команду, чтобы развернуть ваше приложение:**
    ```bash
    git push azure master
    ```

Azure App Service получит ваш код из репозитория Git и автоматически развернет ваше приложение.

### Проверка развертывания

После завершения развертывания вы можете открыть браузер и перейти по адресу вашего приложения App Service, чтобы убедиться, что оно работает правильно.

### Дальнейшие шаги

* **Настройка пользовательского домена:** Вы можете настроить пользовательский домен для вашего приложения App Service, чтобы сделать его более доступным для пользователей.
* **Настройка SSL-сертификата:** Для защиты данных, передаваемых между браузером пользователя и вашим приложением, рекомендуется настроить SSL-сертификат.
* **Мониторинг и ведение журналов:** Azure предоставляет инструменты для мониторинга производительности вашего приложения и просмотра журналов, что помогает выявлять и устранять проблемы.
* **CI/CD:** Вы можете настроить непрерывную интеграцию и непрерывное развертывание (CI/CD) для автоматизации процесса развертывания новых версий вашего приложения.

В этой статье мы рассмотрели основы развертывания ASP.NET Core 8.0 приложения на Azure App Service. 
