## Выполнение запросов с использованием LINQ

**LINQ** (Language Integrated Query - интегрированные в язык запросы) - это набор мощных возможностей .NET, которые расширяют возможности языка запросами к данным. С помощью LINQ вы можете запрашивать данные из различных источников, таких как базы данных, XML-документы, коллекции в памяти и другие, используя единый синтаксис. 

В этом разделе мы рассмотрим основы использования LINQ в приложениях ASP.NET Core 8.0.

### Подключение LINQ

Для начала работы с LINQ в вашем проекте ASP.NET Core 8.0, вам необходимо подключить пространство имен `System.Linq`. Обычно это пространство имен уже подключено по умолчанию, но на всякий случай убедитесь, что в начале вашего файла кода присутствует следующая директива:

```csharp
using System.Linq;
```

### Создание запроса LINQ

Запросы LINQ можно создавать, используя как синтаксис запросов, так и синтаксис методов расширения. 

**Синтаксис запросов** похож на SQL и более интуитивно понятен для разработчиков, знакомых с базами данных. 

**Синтаксис методов расширения** - это более функциональный подход, который использует цепочку вызовов методов для выражения запроса.

### Примеры

Рассмотрим несколько примеров использования LINQ для запроса данных из коллекции объектов. Предположим, у нас есть следующий класс `Product`:

```csharp
public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }
    public string Category { get; set; }
}
```

Создадим список объектов `Product`:

```csharp
List<Product> products = new List<Product>
{
    new Product { Id = 1, Name = "Яблоко", Price = 1.2m, Category = "Фрукты" },
    new Product { Id = 2, Name = "Банан", Price = 0.8m, Category = "Фрукты" },
    new Product { Id = 3, Name = "Молоко", Price = 2.5m, Category = "Молочные продукты" },
    new Product { Id = 4, Name = "Хлеб", Price = 1.8m, Category = "Хлебобулочные изделия" },
    new Product { Id = 5, Name = "Сыр", Price = 4.0m, Category = "Молочные продукты" }
};
```

#### Пример 1: Получение всех продуктов с ценой выше 2

**Синтаксис запросов:**

```csharp
var expensiveProducts = from p in products
                       where p.Price > 2
                       select p;
```

**Синтаксис методов расширения:**

```csharp
var expensiveProducts = products.Where(p => p.Price > 2);
```

В обоих случаях мы получаем новую коллекцию `expensiveProducts`, содержащую все продукты с ценой выше 2.

#### Пример 2: Сортировка продуктов по имени

**Синтаксис запросов:**

```csharp
var sortedProducts = from p in products
                   orderby p.Name
                   select p;
```

**Синтаксис методов расширения:**

```csharp
var sortedProducts = products.OrderBy(p => p.Name);
```

В обоих случаях мы получаем новую коллекцию `sortedProducts`, содержащую все продукты, отсортированные по имени в алфавитном порядке.

#### Пример 3: Выбор только имени продукта

**Синтаксис запросов:**

```csharp
var productNames = from p in products
                  select p.Name;
```

**Синтаксис методов расширения:**

```csharp
var productNames = products.Select(p => p.Name);
```

В обоих случаях мы получаем новую коллекцию `productNames`, содержащую только имена продуктов.

#### Пример 4: Группировка продуктов по категории

**Синтаксис запросов:**

```csharp
var groupedProducts = from p in products
                     group p by p.Category into g
                     select new { Category = g.Key, Products = g.ToList() };
```

**Синтаксис методов расширения:**

```csharp
var groupedProducts = products.GroupBy(p => p.Category)
                            .Select(g => new { Category = g.Key, Products = g.ToList() });
```

В обоих случаях мы получаем новую коллекцию `groupedProducts`, содержащую продукты, сгруппированные по категории.

### Вывод

LINQ - это мощный инструмент для запроса данных в приложениях ASP.NET Core. С помощью LINQ вы можете писать выразительные и эффективные запросы к различным источникам данных, используя единый синтаксис. В этом разделе мы рассмотрели только основы использования LINQ, но существует множество других возможностей, которые вы можете изучить самостоятельно.
