## Интерполяция строк

Интерполяция строк в C# предоставляет лаконичный и удобный способ форматирования строк путем встраивания значений переменных и выражений непосредственно в строковый литерал. Этот механизм значительно упрощает создание читаемых и понятных строк, особенно при работе с большим количеством переменных.

### Основы интерполяции строк

Для создания интерполированной строки используется символ `$` перед открывающей кавычкой строкового литерала. Внутри строки, значения переменных и выражений заключаются в фигурные скобки `{}`.

**Пример:**

```C#
string name = "Иван";
int age = 30;

Console.WriteLine($"Меня зовут {name} и мне {age} лет.");
// Вывод: Меня зовут Иван и мне 30 лет.
```

В этом примере переменные `name` и `age` встраиваются в строку благодаря использованию `$` и фигурных скобок. 

### Выражения внутри интерполяции

Внутри фигурных скобок можно использовать не только переменные, но и любые корректные C# выражения:

```C#
int x = 10;
int y = 5;

Console.WriteLine($"Сумма x и y равна: {x + y}");
// Вывод: Сумма x и y равна: 15
```

### Форматирование вывода

Интерполяция строк поддерживает форматирование вывода чисел, дат и других типов данных. Для этого после выражения в фигурных скобках ставится двоеточие `:` и указывается формат.

**Пример:**

```C#
double pi = Math.PI;
DateTime now = DateTime.Now;

Console.WriteLine($"Значение числа Пи: {pi:F2}"); 
// Вывод: Значение числа Пи: 3,14

Console.WriteLine($"Текущая дата и время: {now:dd.MM.yyyy HH:mm:ss}");
// Вывод: Текущая дата и время: 01.10.2023 12:34:56 (зависит от текущей даты и времени)
```

В первом случае `:F2` указывает на вывод числа `pi` с двумя знаками после запятой. Во втором случае `:dd.MM.yyyy HH:mm:ss` задает формат даты и времени.

### Выравнивание и заполнение

Интерполяция строк позволяет выравнивать значения и заполнять строки символами с помощью специальных символов форматирования.

**Пример:**

```C#
string productName = "Ноутбук";
double price = 1200.50;

Console.WriteLine($"{productName,-15} Цена: {price,10:C2}"); 
// Вывод: Ноутбук         Цена:     1 200,50 ₽
```

В этом примере:

* `, -15` после `productName` выравнивает значение по левому краю и дополняет строку пробелами до 15 символов.
* `,10:C2` после `price` выравнивает значение по правому краю, дополняет строку пробелами до 10 символов и форматирует число как денежную сумму с двумя знаками после запятой.

### Escape-последовательности

Внутри интерполированных строк можно использовать те же escape-последовательности, что и в обычных строковых литералах.

**Пример:**

```C#
string path = "C:\\Program Files\\";

Console.WriteLine($"Путь к файлу: {path}myfile.txt");
// Вывод: Путь к файлу: C:\Program Files\myfile.txt
```

### Вербатим-строки и интерполяция

Интерполяция строк прекрасно сочетается с вербатим-строками, что делает код еще более читаемым.

**Пример:**

```C#
string json = $@"
{{
  "name": "Иван",
  "age": 30
}}
";

Console.WriteLine(json);
// Вывод: 
// {
//   "name": "Иван",
//   "age": 30
// }
```

### Заключение

Интерполяция строк является мощным инструментом для создания читаемого и лаконичного кода при работе со строками. Она позволяет легко встраивать значения переменных и выражений, форматировать вывод и управлять выравниванием, что делает ее незаменимым инструментом для разработчиков C#. 
