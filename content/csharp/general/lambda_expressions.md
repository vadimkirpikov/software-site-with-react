## Лямбда-выражения в C# 12

Лямбда-выражения представляют собой краткий способ определения анонимных функций непосредственно в месте их использования.  Они обладают лаконичным синтаксисом и тесно интегрированы с механизмами делегатов и LINQ, предоставляя мощный инструмент для написания выразительного и компактного кода.

### Основы лямбда-выражений

В своей основе лямбда-выражение состоит из следующих элементов:

1. **Список параметров:**  В скобках указываются параметры, которые лямбда-выражение принимает, аналогично объявлению метода. Список параметров может быть пустым, если функция не принимает аргументов.

2. **Оператор лямбда `=>`:**  Отделяет список параметров от тела выражения.

3. **Тело выражения:**  Содержит код, выполняемый лямбда-выражением. Это может быть одно выражение или блок кода, заключенный в фигурные скобки.

Простой пример лямбда-выражения, которое принимает два целых числа и возвращает их сумму:

```csharp
(int x, int y) => x + y;
```

### Использование лямбда-выражений

Лямбда-выражения чаще всего используются в следующих сценариях:

#### 1. Создание анонимных методов

Вместо объявления именованного метода, можно использовать лямбда-выражение для создания анонимного метода, который может быть передан в качестве аргумента или присвоен переменной типа делегата.

```csharp
// Объявление делегата
delegate int Operation(int a, int b);

// Использование лямбда-выражения для создания экземпляра делегата
Operation sum = (x, y) => x + y;

// Вызов делегата
int result = sum(5, 3); 
Console.WriteLine(result); // Выведет: 8
```

#### 2. Использование с LINQ

Лямбда-выражения играют ключевую роль в работе с LINQ (Language Integrated Query), позволяя писать лаконичные и выразительные запросы к различным источникам данных.

```csharp
// Список чисел
List<int> numbers = new List<int> { 1, 2, 3, 4, 5 };

// Использование лямбда-выражения для фильтрации списка
var evenNumbers = numbers.Where(n => n % 2 == 0);

// Вывод четных чисел
foreach (var number in evenNumbers)
{
    Console.WriteLine(number); 
}
```

### Вывод типа

В большинстве случаев компилятор C# может автоматически определить типы параметров и возвращаемого значения лямбда-выражения. Это называется выводом типа.

```csharp
// Компилятор автоматически определяет типы x и y как int
var add = (x, y) => x + y; 
```

### Замыкания

Лямбда-выражения могут обращаться к переменным, объявленным вне их тела, но в пределах той же области видимости. Эта особенность называется **замыканием**.

```csharp
int factor = 2;

// Лямбда-выражение использует переменную factor из внешней области видимости
Func<int, int> multiplier = x => x * factor;

// Изменение значения factor
factor = 3;

// Вызов лямбда-выражения
Console.WriteLine(multiplier(5)); // Выведет: 15 
```

Важно помнить, что лямбда-выражение "захватывает" переменные, а не их значения на момент создания.

### Заключение

Лямбда-выражения предоставляют мощный инструмент для написания краткого, выразительного и гибкого кода. Их использование становится неотъемлемой частью современной разработки на C#, особенно в сочетании с LINQ и другими функциональными возможностями языка.
