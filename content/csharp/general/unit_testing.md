## Модульное тестирование в C# с использованием xUnit или NUnit

Модульное тестирование – это неотъемлемая часть разработки качественного программного обеспечения. Оно позволяет проверять корректность работы отдельных частей кода (модулей) в изоляции от других частей приложения. 

В C# существует несколько популярных фреймворков для модульного тестирования, среди которых xUnit и NUnit. Оба фреймворка предоставляют похожий набор инструментов, но отличаются некоторыми деталями реализации и синтаксисом.

### Выбор фреймворка: xUnit или NUnit

Выбор фреймворка для модульного тестирования зависит от личных предпочтений и требований проекта. 

| Фреймворк | Описание | Преимущества | Недостатки |
|---|---|---|---|
| xUnit | Современный и популярный фреймворк | Простой и лаконичный синтаксис, широкая поддержка, активное сообщество | Некоторым может показаться слишком минималистичным |
| NUnit | Более старый и функционально насыщенный фреймворк | Большое количество встроенных возможностей, поддержка различных тестовых атрибутов | Синтаксис может показаться более громоздким |

В данном руководстве мы рассмотрим примеры использования xUnit, но основные принципы и подходы будут актуальны и для NUnit.

### Установка xUnit

Для начала работы с xUnit необходимо установить соответствующие пакеты NuGet в ваш проект. Вы можете сделать это с помощью консоли менеджера пакетов:

```
Install-Package xunit
Install-Package xunit.runner.visualstudio
```

### Создание тестового проекта

Тестовый проект обычно создается отдельно от основного проекта приложения.  

1. В Visual Studio создайте новый проект типа "xUnit Test Project (.NET Core)".
2. Добавьте ссылку на проект, который вы хотите протестировать.

### Создание первого теста

Создайте новый класс в тестовом проекте и отметьте его атрибутом `[Fact]`. Метод, помеченный этим атрибутом, будет считаться тестом.

```C#
using Xunit;

public class CalculatorTests
{
    [Fact]
    public void Add_ShouldReturnSumOfTwoNumbers()
    {
        // Arrange (Подготовка)
        var calculator = new Calculator();

        // Act (Действие)
        var result = calculator.Add(2, 3);

        // Assert (Проверка)
        Assert.Equal(5, result);
    }
}

public class Calculator
{
    public int Add(int a, int b)
    {
        return a + b;
    }
}
```

В этом примере мы тестируем метод `Add` класса `Calculator`. 

- В секции **Arrange** мы создаем экземпляр класса `Calculator`.
- В секции **Act** мы вызываем тестируемый метод и сохраняем результат.
- В секции **Assert** мы проверяем, что полученный результат соответствует ожидаемому значению.

### Запуск тестов

Запустить тесты можно с помощью Test Explorer в Visual Studio или из командной строки.

### Атрибуты тестов

xUnit предоставляет различные атрибуты для управления выполнением и настройкой тестов:

- `[Fact]` - отмечает метод как тестовый.
- `[Theory]` - используется для тестирования с различными входными данными.
- `[InlineData]` - позволяет передавать данные в тестовый метод.
- `[Skip]` - пропускает выполнение теста.

### Пример использования [Theory] и [InlineData]

```C#
using Xunit;

public class CalculatorTests
{
    [Theory]
    [InlineData(2, 3, 5)]
    [InlineData(-1, 5, 4)]
    public void Add_ShouldReturnSumOfTwoNumbers(int a, int b, int expected)
    {
        // Arrange
        var calculator = new Calculator();

        // Act
        var result = calculator.Add(a, b);

        // Assert
        Assert.Equal(expected, result);
    }
}
```

В этом примере мы используем `[Theory]` и `[InlineData]` для запуска теста с разными наборами данных.

### Заключение

Модульное тестирование с использованием xUnit или NUnit является важным инструментом для создания качественного и надежного программного обеспечения.  Освоив основы, вы сможете создавать более стабильные и поддерживаемые приложения. 
