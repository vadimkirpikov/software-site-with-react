## Работа с файлами: чтение и запись 

PHP предоставляет обширный набор функций для работы с файлами. В этой статье мы рассмотрим базовые операции: чтение данных из файла и запись данных в файл. 

### Чтение из файла

Для чтения содержимого файла в PHP существует несколько функций. Разберём самые распространённые.

#### Функция `file_get_contents()`

Функция `file_get_contents()` считывает весь файл целиком и возвращает его содержимое в виде строки.

```php
<?php
// Путь к файлу
$file_path = 'data.txt';

// Считываем содержимое файла
$file_content = file_get_contents($file_path);

// Выводим содержимое файла
echo $file_content;
?>
```

#### Функция `fopen()` и `fgets()` / `fread()`

Функции `fopen()`, `fgets()` и `fread()` позволяют считывать файл построчно или по частям. 

1. **`fopen()`**: Открывает файл.  
  - Первый аргумент: путь к файлу.
  - Второй аргумент: режим открытия файла (например, 'r' - для чтения, 'w' - для записи).
2. **`fgets()`**: Считывает файл построчно.
3. **`fread()`**:  Считывает заданное количество байт из файла.
4. **`fclose()`**: Закрывает файл.

**Пример построчного чтения:**

```php
<?php
// Открываем файл для чтения
$file_handle = fopen('data.txt', 'r');

// Проверяем, успешно ли открыт файл
if ($file_handle) {
    // Цикл по строкам файла
    while (($line = fgets($file_handle)) !== false) {
        echo $line . '<br>'; 
    }

    // Закрываем файл
    fclose($file_handle);
} else {
    echo 'Ошибка открытия файла!';
}
?>
```

**Пример чтения по частям:**

```php
<?php
// Открываем файл для чтения
$file_handle = fopen('data.txt', 'r');

// Проверяем, успешно ли открыт файл
if ($file_handle) {
    // Читаем файл по 1024 байта
    while (!feof($file_handle)) {
        $chunk = fread($file_handle, 1024);
        echo $chunk;
    }

    // Закрываем файл
    fclose($file_handle);
} else {
    echo 'Ошибка открытия файла!';
}
?>
```

#### Таблица режимов открытия файла

| Режим | Описание |
|---|---|
| r | Открытие файла только для чтения |
| w | Открытие файла только для записи (содержимое файла будет удалено) |
| a | Открытие файла для записи в конец файла |
| x | Создание нового файла для записи |
| r+ | Открытие файла для чтения и записи |
| w+ | Открытие файла для чтения и записи (содержимое файла будет удалено) |
| a+ | Открытие файла для чтения и записи в конец файла |
| x+ | Создание нового файла для чтения и записи |

### Запись в файл

#### Функция `file_put_contents()`

Функция `file_put_contents()` записывает строку в файл. 

```php
<?php
// Данные для записи
$data = 'Пример текста для записи в файл.';

// Записываем данные в файл
file_put_contents('data.txt', $data);

// Выводим сообщение об успешной записи
echo 'Данные успешно записаны в файл.';
?>
```

#### Функция `fwrite()`

Функция `fwrite()` используется для записи данных в файл, открытый с помощью `fopen()`.

```php
<?php
// Данные для записи
$data = 'Пример текста для записи в файл.';

// Открываем файл для записи
$file_handle = fopen('data.txt', 'w');

// Записываем данные в файл
fwrite($file_handle, $data);

// Закрываем файл
fclose($file_handle);

// Выводим сообщение об успешной записи
echo 'Данные успешно записаны в файл.';
?>
```

### Дополнительные функции

Помимо описанных выше, PHP предоставляет множество других функций для работы с файлами, например:

-   `file_exists()` - проверяет, существует ли файл.
-   `filesize()` - возвращает размер файла.
-   `unlink()` - удаляет файл.
-   `rename()` - переименовывает файл.
-   `mkdir()` - создает директорию.
-   `rmdir()` - удаляет директорию.

### Обработка ошибок

При работе с файлами важно обрабатывать возможные ошибки. Например, файл может не существовать, у вас может не хватать прав доступа, или на диске может не хватать места. Вы можете использовать функцию `error_get_last()` для получения информации о последней ошибке.

### Безопасность

При работе с файлами, особенно при обработке данных, полученных от пользователя, необходимо соблюдать правила безопасности. Никогда не доверяйте данным, полученным от пользователя, и всегда проверяйте их перед использованием.

Это лишь базовые принципы работы с файлами в PHP. Более подробную информацию вы найдете в официальной документации.
