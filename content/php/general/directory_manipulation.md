## Манипуляции с директориями в PHP

Работа с файловой системой — неотъемлемая часть многих веб-приложений. PHP предоставляет обширный набор функций для взаимодействия с директориями, позволяя создавать, удалять, читать и манипулировать ими.

### Создание директорий

Функция `mkdir()` используется для создания новой директории.

**Синтаксис:**

```php
mkdir(string $directory, int $permissions = 0777, bool $recursive = false): bool
```

* **$directory**: Путь к создаваемой директории.
* **$permissions**:  Числовое представление прав доступа к директории (по умолчанию 0777 - все права для всех).
* **$recursive**: Если установлено в `true`, функция создаст все несуществующие родительские директории (по умолчанию `false`).

**Пример:**

```php
// Создание директории "uploads"
mkdir('uploads');

// Создание директории "uploads/images" с правами доступа 0755
mkdir('uploads/images', 0755);

// Создание директории "uploads/2023/10" и всех родительских директорий
mkdir('uploads/2023/10', 0755, true);
```

### Проверка существования директории

Функция `is_dir()` проверяет, существует ли директория и является ли она таковой.

**Синтаксис:**

```php
is_dir(string $directory): bool
```

* **$directory**: Путь к проверяемой директории.

**Пример:**

```php
// Проверка существования директории "uploads"
if (is_dir('uploads')) {
    echo "Директория 'uploads' существует";
} else {
    echo "Директория 'uploads' не найдена";
}
```

### Чтение содержимого директории

Функция `scandir()` возвращает массив с именами файлов и поддиректорий в указанной директории.

**Синтаксис:**

```php
scandir(string $directory, int $sorting_order = SCANDIR_SORT_ASCENDING): array|false
```

* **$directory**: Путь к директории.
* **$sorting_order**: Порядок сортировки (по умолчанию `SCANDIR_SORT_ASCENDING` - по возрастанию).

**Пример:**

```php
// Получение списка файлов и директорий в "uploads"
$files = scandir('uploads');

// Вывод списка
print_r($files);
```

### Удаление директорий

Функция `rmdir()` удаляет пустую директорию.

**Синтаксис:**

```php
rmdir(string $directory): bool
```

* **$directory**: Путь к удаляемой директории.

**Пример:**

```php
// Удаление директории "uploads/test"
rmdir('uploads/test');
```

**Важно:**  `rmdir()` не удаляет непустые директории. Для удаления директории с содержимым используйте рекурсивное удаление.

### Рекурсивное удаление директории

Для удаления директории со всем содержимым можно использовать рекурсивную функцию:

```php
function deleteDirectory(string $directory): bool
{
    if (!is_dir($directory)) {
        return false;
    }

    $files = array_diff(scandir($directory), ['.', '..']);

    foreach ($files as $file) {
        $path = $directory . '/' . $file;
        if (is_dir($path)) {
            deleteDirectory($path);
        } else {
            unlink($path);
        }
    }

    return rmdir($directory);
}

// Пример использования:
deleteDirectory('uploads/test');
```

### Переименование и перемещение директории

Функция `rename()` используется для переименования или перемещения директории.

**Синтаксис:**

```php
rename(string $oldname, string $newname): bool
```

* **$oldname**: Текущее имя/путь директории.
* **$newname**: Новое имя/путь директории.

**Пример:**

```php
// Переименование директории "uploads/images" в "uploads/photos"
rename('uploads/images', 'uploads/photos');

// Перемещение директории "uploads/temp" в "uploads/backup"
rename('uploads/temp', 'uploads/backup/temp');
```

### Получение информации о директории

Функция `stat()` возвращает подробную информацию о директории.

**Синтаксис:**

```php
stat(string $filename): array|false
```

* **$filename**: Путь к директории.

**Пример:**

```php
// Получение информации о директории "uploads"
$info = stat('uploads');

// Вывод времени последнего изменения
echo "Последнее изменение: " . date("Y-m-d H:i:s", $info['mtime']);
```

### Таблица функций для работы с директориями

| Функция | Описание |
|---|---|
| `mkdir()` | Создает директорию |
| `is_dir()` | Проверяет, является ли путь директорией |
| `scandir()` | Возвращает список файлов и поддиректорий |
| `rmdir()` | Удаляет пустую директорию |
| `rename()` | Переименовывает или перемещает директорию |
| `stat()` | Возвращает информацию о директории |

Это лишь базовые функции для работы с директориями в PHP. Более подробную информацию можно найти в официальной документации: [https://www.php.net/manual/ru/ref.filesystem.php](https://www.php.net/manual/ru/ref.filesystem.php) 
