## Обработка HTTP-запросов

PHP, будучи языком, изначально созданным для ведения разработки веб-приложений, обладает обширным инструментарием для работы с HTTP-запросами. В этой статье мы рассмотрим базовые принципы обработки запросов, узнаем, как получать доступ к различным частям запроса, и научимся формировать ответы сервера.

### Что такое HTTP-запрос?

HTTP-запрос – это сообщение, которое клиент (например, браузер) отправляет на сервер для запроса определенного ресурса (например, веб-страницы). Запрос содержит информацию о типе запроса, запрашиваемом ресурсе, версии протокола HTTP и другие данные.

### Структура HTTP-запроса

HTTP-запрос состоит из следующих частей:

| Часть запроса | Описание |
|---|---|
| Метод запроса | Определяет тип действия, которое клиент хочет выполнить с ресурсом. |
| URI (Uniform Resource Identifier) | Задает адрес запрашиваемого ресурса. |
| Версия протокола | Указывает используемую версию протокола HTTP. |
| Заголовки | Содержат дополнительную информацию о запросе, такую как тип принимаемого контента, язык браузера и т.д. |
| Тело запроса | Может содержать данные, отправляемые на сервер, например, данные формы. |

Рассмотрим пример простого HTTP-запроса:

```http
GET /index.php HTTP/1.1
Host: www.example.com
User-Agent: Mozilla/5.0
Accept: text/html

```

В этом примере:

* **GET** – метод запроса, указывающий на получение данных с сервера.
* **/index.php** – URI запрашиваемого ресурса.
* **HTTP/1.1** – используемая версия протокола HTTP.
* **Host**, **User-Agent**, **Accept** – заголовки запроса.
* Тело запроса отсутствует.

### Методы HTTP-запросов

Существует несколько стандартных методов HTTP-запросов. Наиболее распространенные из них:

* **GET:** Используется для получения данных с сервера. Данные передаются в URI запроса.
* **POST:** Используется для отправки данных на сервер для обработки. Данные передаются в теле запроса.
* **PUT:** Используется для замены существующего ресурса на сервере.
* **DELETE:** Используется для удаления ресурса на сервере.

### Обработка запросов в PHP

PHP предоставляет несколько способов получения информации из HTTP-запроса. Рассмотрим наиболее распространенные:

#### Суперглобальные переменные

Суперглобальные переменные – это предопределенные переменные в PHP, которые доступны в любом месте скрипта. Для работы с HTTP-запросами используются следующие суперглобальные переменные:

* **$_SERVER:** Содержит информацию о сервере и среде выполнения скрипта, а также данные о самом запросе, такие как метод запроса, URI, заголовки и т.д.
* **$_GET:** Содержит данные, переданные в URI запроса методом GET.
* **$_POST:** Содержит данные, переданные в теле запроса методом POST.
* **$_REQUEST:**  Содержит данные, переданные как методом GET, так и методом POST.

**Пример:**

```php
<?php

// Получение метода запроса
$method = $_SERVER['REQUEST_METHOD'];

// Получение URI запроса
$uri = $_SERVER['REQUEST_URI'];

// Получение данных, переданных методом GET
$name = $_GET['name'];

// Получение данных, переданных методом POST
$email = $_POST['email'];

?>
```

#### Фильтрация данных

Важно помнить, что данные, полученные из HTTP-запроса, могут быть небезопасными. Перед использованием необходимо проводить их фильтрацию и валидацию.

#### Формирование ответа сервера

После обработки запроса PHP-скрипт формирует ответ, который отправляется обратно клиенту. Ответ состоит из следующих частей:

* **Версия протокола HTTP**
* **Код состояния HTTP**
* **Заголовки ответа**
* **Тело ответа**

**Пример формирования простого ответа:**

```php
<?php

// Установка кода состояния 200 (OK)
http_response_code(200);

// Установка заголовка Content-Type
header('Content-Type: text/html');

// Формирование тела ответа
echo "<h1>Привет, мир!</h1>";

?>
```

В этом примере скрипт устанавливает код состояния 200 (OK), указывает, что тип контента ответа – HTML, и выводит текст "Привет, мир!" в теле ответа.

### Заключение

В этой статье мы рассмотрели базовые принципы обработки HTTP-запросов в PHP. Вы узнали, как получать доступ к различным частям запроса, проводить фильтрацию данных и формировать ответы сервера.  Более глубокое изучение темы позволит вам создавать сложные веб-приложения с использованием PHP.
