## Развертывание Laravel-приложения

После успешной разработки Laravel-приложения на локальной машине наступает важный этап - его развертывание на production-сервере, доступном для пользователей. Существует множество платформ и инструментов, упрощающих этот процесс. 

В этой части руководства мы рассмотрим популярные варианты развертывания Laravel 11, уделив внимание их особенностям и преимуществам.

### Подготовка к развертыванию

Независимо от выбранной платформы, перед развертыванием приложения необходимо выполнить несколько важных шагов:

1. **Настройка контроля версий:** 
    Использование Git или другой системы контроля версий значительно упрощает развертывание и откат изменений. Создайте репозиторий и загрузите в него код вашего приложения.

2. **Настройка файла `.env`:** 
    В production-среде необходимо использовать отдельный файл `.env` с настройками, отличными от локальной разработки. Создайте файл `.env.production` и укажите в нем реальные значения для подключения к базе данных, настройки почтового сервиса и другие параметры.

3. **Установка зависимостей:** 
    Перед развертыванием убедитесь, что на сервере установлены все необходимые зависимости. Используйте команду `composer install --no-dev` для установки production-зависимостей без инструментов разработки.

4. **Генерация ключа приложения:** 
    Для шифрования сессий и других данных Laravel использует ключ приложения. Сгенерируйте уникальный ключ для production-среды с помощью команды `php artisan key:generate --env=production`.

5. **Запуск миграций базы данных:** 
    На production-сервере необходимо создать базу данных и применить к ней миграции. Выполните команду `php artisan migrate --env=production` для создания таблиц.

### Развертывание на VPS

Развертывание на VPS (Virtual Private Server) предоставляет максимальную гибкость и контроль над серверной средой.

**Шаг 1: Выбор VPS-провайдера:**

Существует множество провайдеров VPS, таких как DigitalOcean, Linode, Vultr. Выберите подходящий вариант, учитывая ваши потребности и бюджет.

**Шаг 2: Настройка сервера:**

После выбора провайдера необходимо настроить сервер:
- Установите операционную систему (рекомендуется Ubuntu или CentOS).
- Установите веб-сервер (Nginx или Apache).
- Установите PHP и необходимые расширения.
- Установите систему управления базами данных (MySQL или PostgreSQL).

**Шаг 3: Размещение кода на сервере:**

- Скопируйте код вашего приложения из репозитория Git на сервер.
- Настройте веб-сервер для обработки запросов к вашему Laravel-приложению.
- Укажите путь к public-директории вашего приложения в настройках веб-сервера.

**Шаг 4: Настройка окружения:**

- Скопируйте содержимое файла `.env.production` в файл `.env` на сервере.
- Установите права доступа к директориям `storage` и `bootstrap/cache`.

**Шаг 5: Запуск приложения:**

После выполнения всех настроек ваше Laravel-приложение должно быть доступно по IP-адресу или доменному имени вашего сервера.

### Развертывание на Heroku

Heroku - это облачная платформа, упрощающая развертывание и управление приложениями.

**Шаг 1: Создание аккаунта Heroku:**

Если у вас еще нет аккаунта Heroku, создайте его на сайте [https://www.heroku.com/](https://www.heroku.com/).

**Шаг 2: Установка Heroku CLI:**

Для взаимодействия с Heroku из командной строки установите Heroku CLI, следуя инструкциям на сайте [https://devcenter.heroku.com/articles/heroku-cli](https://devcenter.heroku.com/articles/heroku-cli).

**Шаг 3: Создание приложения Heroku:**

```
heroku create <название-приложения>
```

**Шаг 4: Настройка базы данных:**

```
heroku addons:create heroku-postgresql:hobby-dev
```

**Шаг 5: Размещение кода на Heroku:**

```
git push heroku main
```

**Шаг 6: Запуск миграций:**

```
heroku run php artisan migrate
```

### Развертывание с помощью Laravel Forge

Laravel Forge - это инструмент, разработанный специально для упрощения развертывания Laravel-приложений на собственных серверах.

**Шаг 1: Создание аккаунта Forge:**

Зарегистрируйтесь на сайте [https://forge.laravel.com/](https://forge.laravel.com/) для доступа к панели управления Forge.

**Шаг 2: Подключение сервера:**

Следуйте инструкциям Forge для подключения вашего VPS-сервера к панели управления.

**Шаг 3: Создание нового сайта:**

Создайте новый сайт в Forge, указав доменное имя и настройки репозитория Git.

**Шаг 4: Настройка развертывания:**

Forge автоматически настроит веб-сервер, PHP, базы данных и другие компоненты, необходимые для вашего Laravel-приложения.

**Шаг 5: Размещение кода:**

Forge автоматически загрузит код из вашего репозитория Git и выполнит необходимые команды для развертывания приложения.

### Заключение

В этой статье мы рассмотрели три популярных варианта развертывания Laravel-приложений. Выбор подходящего варианта зависит от ваших потребностей, опыта и бюджета. 

Развертывание на VPS предоставляет максимальную гибкость, но требует дополнительных знаний по настройке сервера. Heroku предлагает простой и быстрый способ развертывания, но имеет ограничения по настройке и масштабированию. Laravel Forge - это удобный инструмент для автоматизации развертывания на собственных серверах.
