## Развёртывание Django-приложений в облачных платформах

После разработки и тестирования Django-приложения наступает этап его развёртывания. Вместо настройки собственного сервера можно воспользоваться услугами облачных платформ, таких как Heroku, AWS и DigitalOcean. Это позволит сэкономить время и силы, а также получить доступ к ряду инструментов для управления и масштабирования проекта.

В этом разделе мы рассмотрим базовые шаги по развёртыванию Django-приложения версии 5.1 на платформах Heroku, AWS и DigitalOcean.

### Развёртывание на Heroku

Heroku – это облачная платформа, предоставляющая простой способ развёртывания веб-приложений.

#### Шаг 1: Подготовка проекта

1. Установите пакет **gunicorn**:

   ```bash
   pip install gunicorn
   ```

2. Создайте файл **Procfile** в корне проекта:

   ```
   web: gunicorn myproject.wsgi:application
   ```

   Замените **myproject** на имя вашего проекта.

3. Добавьте **gunicorn** в список установленных приложений в **settings.py**:

   ```python
   INSTALLED_APPS = [
       # ...
       'gunicorn',
   ]
   ```

#### Шаг 2: Создание приложения на Heroku

1. Зарегистрируйтесь на сайте heroku.com
2. Установите Heroku CLI, следуя инструкциям на сайте.
3. Авторизуйтесь в CLI:

   ```bash
   heroku login
   ```

4. Создайте репозиторий Git для вашего проекта:

   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   ```

5. Создайте приложение Heroku:

   ```bash
   heroku create <название-приложения>
   ```

6. Добавьте удалённый репозиторий Heroku:

   ```bash
   heroku git:remote -a <название-приложения>
   ```

#### Шаг 3: Развёртывание приложения

1. Выполните команду для развертывания:

   ```bash
   git push heroku master
   ```

2. После завершения развертывания откройте приложение в браузере:

   ```bash
   heroku open
   ```

### Развёртывание на AWS

Amazon Web Services (AWS) – это платформа облачных сервисов, предлагающая широкий спектр возможностей для разработки и развёртывания приложений.

#### Шаг 1: Создание экземпляра EC2

1. Зарегистрируйтесь на сайте aws.amazon.com
2. Перейдите в раздел EC2 и нажмите кнопку "Запустить инстанс".
3. Выберите образ Amazon Linux 2 AMI.
4. Выберите тип инстанса t2.micro (бесплатный уровень).
5. Настройте параметры сети и безопасности.
6. Создайте пару ключей SSH для доступа к инстансу.
7. Запустите инстанс.

#### Шаг 2: Настройка сервера

1. Подключитесь к серверу по SSH, используя сгенерированный ключ.
2. Установите необходимые пакеты:

   ```bash
   sudo yum update -y
   sudo yum install python37 python3-pip git -y
   ```

3. Создайте виртуальное окружение Python и активируйте его:

   ```bash
   python3 -m venv env
   source env/bin/activate
   ```

4. Установите зависимости проекта:

   ```bash
   pip install -r requirements.txt
   ```

#### Шаг 3: Конфигурация веб-сервера

1. Установите и настройте Nginx:

   ```bash
   sudo yum install nginx -y
   ```

2. Создайте файл конфигурации Nginx для вашего проекта:

   ```
   sudo nano /etc/nginx/conf.d/myproject.conf
   ```

3. Добавьте следующий код в файл конфигурации, заменив **myproject** и **путь/к/проекту** на свои значения:

   ```
   server {
       listen 80;
       server_name example.com;

       location / {
           proxy_pass http://127.0.0.1:8000;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
       }
   }
   ```

4. Проверьте конфигурацию Nginx и перезапустите сервис:

   ```bash
   sudo nginx -t
   sudo systemctl restart nginx
   ```

#### Шаг 4: Запуск приложения

1. Запустите приложение Django с помощью **gunicorn**:

   ```bash
   gunicorn myproject.wsgi:application --bind 0.0.0.0:8000
   ```

2. Откройте приложение в браузере по IP-адресу вашего сервера.

### Развёртывание на DigitalOcean

DigitalOcean – это провайдер облачных сервисов, предлагающий виртуальные серверы (дроплеты) по доступным ценам.

#### Шаг 1: Создание дроплета

1. Зарегистрируйтесь на сайте digitalocean.com
2. Нажмите кнопку "Создать" и выберите "Дроплеты".
3. Выберите образ Ubuntu 20.04 x64.
4. Выберите план Basic и размер дроплета по вашему усмотрению.
5. Выберите дата-центр.
6. Добавьте SSH-ключи для доступа к дроплету.
7. Нажмите кнопку "Создать дроплет".

#### Шаг 2: Настройка сервера

Шаги по настройке сервера на DigitalOcean аналогичны AWS. 

#### Шаг 3: Развёртывание приложения

Шаги по развёртыванию приложения на DigitalOcean аналогичны AWS. 

### Заключение

В этой статье мы рассмотрели базовые шаги по развёртыванию Django-приложения на популярных облачных платформах: Heroku, AWS и DigitalOcean. Каждая из платформ имеет свои особенности и преимущества, поэтому выбор оптимального варианта зависит от конкретных требований проекта.
