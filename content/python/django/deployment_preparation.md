## Подготовка Django проекта к деплою

Деплой, или развертывание, Django проекта – это процесс переноса вашего приложения из среды разработки на рабочий сервер, где оно будет доступно пользователям. Этот этап является критическим в жизненном цикле проекта, и правильная подготовка к нему гарантирует успешный запуск и стабильную работу приложения.

В этом разделе мы рассмотрим основные шаги, необходимые для подготовки Django проекта к деплою.

### 1. Настройка файла settings.py

Файл `settings.py` является основным конфигурационным файлом вашего Django проекта. При подготовке к деплою важно внести в него следующие изменения:

**1.1. Установка режима `DEBUG` в `False`:**

В процессе разработки режим `DEBUG` включен по умолчанию, чтобы предоставить разработчику подробную информацию об ошибках. Однако в продакшн-среде его необходимо отключить из соображений безопасности и производительности.

```python
# settings.py

DEBUG = False
```

**1.2. Настройка `ALLOWED_HOSTS`:**

Этот параметр определяет, с каких доменов разрешено обращаться к вашему Django приложению. В продакшн-среде важно указать только домены, на которых будет размещено приложение.

```python
# settings.py

ALLOWED_HOSTS = ['yourdomain.com', 'www.yourdomain.com']
```

**1.3. Настройка СУБД:**

В продакшн-среде рекомендуется использовать более производительную СУБД, чем SQLite, используемая по умолчанию. Настройте параметры подключения к вашей СУБД, например, PostgreSQL:

```python
# settings.py

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'myprojectdb',
        'USER': 'myprojectuser',
        'PASSWORD': 'password',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}
```

### 2. Установка зависимостей

Перед деплоем необходимо убедиться, что все зависимости вашего проекта зафиксированы в файле `requirements.txt`. Это гарантирует, что на сервере будут установлены все необходимые библиотеки.

Создайте файл `requirements.txt` с помощью следующей команды:

```bash
pip freeze > requirements.txt
```

### 3. Сбор статических файлов

Django использует статические файлы (CSS, JavaScript, изображения) для оформления и функциональности сайта. Перед деплоем необходимо собрать все статические файлы в одну директорию.

Создайте директорию `static` в корне вашего проекта, если она еще не создана. Затем выполните следующую команду:

```bash
python manage.py collectstatic
```

Эта команда соберет все статические файлы из всех приложений вашего проекта и поместит их в директорию `static`.

### 4. Миграция базы данных

Перед деплоем необходимо применить все миграции к базе данных на сервере. Миграции – это файлы, которые хранят изменения в структуре вашей базы данных.

Выполните следующую команду, чтобы применить все миграции:

```bash
python manage.py migrate
```

### 5. Выбор веб-сервера

Для запуска Django приложения в продакшн-среде необходим веб-сервер, такой как Nginx или Apache. Веб-сервер будет обрабатывать HTTP-запросы от пользователей и перенаправлять их вашему Django приложению.

### 6. Настройка WSGI-сервера

WSGI (Web Server Gateway Interface) – это стандартный интерфейс взаимодействия между Python-приложениями и веб-серверами. Для запуска Django приложения с помощью веб-сервера вам потребуется настроить WSGI-сервер, такой как Gunicorn или uWSGI.

### 7. Проверка конфигурации

Перед деплоем на боевой сервер рекомендуется протестировать все настройки и конфигурацию в тестовой среде. Это позволит выявить и исправить ошибки до того, как они повлияют на пользователей.

### Заключение

Подготовка Django проекта к деплою – это важный этап, который включает в себя ряд шагов: настройку файла `settings.py`, установку зависимостей, сбор статических файлов, миграцию базы данных, выбор веб-сервера, настройку WSGI-сервера и проверку конфигурации. 

Правильная подготовка к деплою гарантирует успешный запуск и стабильную работу вашего Django приложения в продакшн-среде. 
