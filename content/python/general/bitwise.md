## Поразрядные операции с числами в Python

Python, помимо стандартных арифметических операций, предоставляет набор инструментов для работы с числами на уровне битов: поразрядные операции. Они позволяют манипулировать отдельными битами, что может быть полезно в различных задачах, от низкоуровневого программирования до оптимизации кода.

### Представление чисел в двоичной системе

Прежде чем погружаться в мир поразрядных операций, важно понимать, как числа представлены в компьютере на самом базовом уровне – в двоичной системе счисления. В отличие от привычной нам десятичной системы, где используются цифры от 0 до 9, двоичная система оперирует только двумя цифрами: 0 и 1, представляющими соответственно выключенное и включенное состояние бита.

Рассмотрим пример. Десятичное число 12 в двоичном представлении будет выглядеть как 1100. Разберемся, почему:

| Степень двойки | 2^3 | 2^2 | 2^1 | 2^0 |
|---|---|---|---|---|
| Значение | 8 | 4 | 2 | 1 |
| Двоичное число | 1 | 1 | 0 | 0 |

Как видно из таблицы, 1 в разряде 2^3 даёт нам 8, 1 в разряде 2^2 даёт 4. Суммируя, получаем 12.

### Типы поразрядных операций

Python предлагает шесть основных поразрядных операций:

1. **Поразрядное И (AND) (&)**: Возвращает 1 только если оба соответствующих бита равны 1.

   ```python
   a = 10  # 1010 (двоичное)
   b = 4   # 0100 (двоичное)
   c = a & b  # 0000 (двоичное) = 0 (десятичное)
   ```

2. **Поразрядное ИЛИ (OR) (|)**: Возвращает 1 если хотя бы один из соответствующих битов равен 1.

   ```python
   a = 10  # 1010 (двоичное)
   b = 4   # 0100 (двоичное)
   c = a | b  # 1110 (двоичное) = 14 (десятичное)
   ```

3. **Поразрядное исключающее ИЛИ (XOR) (^)**: Возвращает 1, если только один из соответствующих битов равен 1.

   ```python
   a = 10  # 1010 (двоичное)
   b = 4   # 0100 (двоичное)
   c = a ^ b  # 1110 (двоичное) = 14 (десятичное)
   ```

4. **Поразрядное НЕ (NOT) (~)**: Инвертирует биты, заменяя 0 на 1 и наоборот.

   ```python
   a = 10  # 1010 (двоичное)
   c = ~a   # -1011 (двоичное) = -11 (десятичное)
   # Обратите внимание: ~a равно -(a+1) для положительных чисел 
   ```

5. **Битовый сдвиг влево (<<)**: Сдвигает биты числа влево, добавляя нули справа. Эквивалентно умножению на степень двойки.

   ```python
   a = 10  # 1010 (двоичное)
   c = a << 2  # 101000 (двоичное) = 40 (десятичное) 
   # Сдвиг на 2 бита влево эквивалентен умножению на 2**2 = 4
   ```

6. **Битовый сдвиг вправо (>>)**: Сдвигает биты числа вправо, отбрасывая биты справа. Эквивалентно целочисленному делению на степень двойки.

   ```python
   a = 10  # 1010 (двоичное)
   c = a >> 2  # 0010 (двоичное) = 2 (десятичное) 
   # Сдвиг на 2 бита вправо эквивалентен делению на 2**2 = 4
   ```

### Примеры использования

Понимание поразрядных операций открывает двери к решению широкого спектра задач. Рассмотрим несколько примеров.

**1. Проверка четности числа:**

```python
def is_even(num: int) -> bool:
  """Проверяет, является ли число четным, 
  используя поразрядное И.
  """
  return (num & 1) == 0
```

**2. Установка бита в заданной позиции:**

```python
def set_bit(num: int, pos: int) -> int:
  """Устанавливает бит в заданной позиции в 1."""
  return num | (1 << pos)
```

**3. Сброс бита в заданной позиции:**

```python
def clear_bit(num: int, pos: int) -> int:
  """Сбрасывает бит в заданной позиции в 0."""
  return num & ~(1 << pos)
```

**4. Проверка, установлен ли бит в заданной позиции:**

```python
def is_bit_set(num: int, pos: int) -> bool:
  """Проверяет, установлен ли бит в заданной позиции."""
  return (num & (1 << pos)) != 0
```

### Заключение

Поразрядные операции – мощный инструмент, который может быть использован для решения различных задач в Python. Понимание принципов их работы и умение применять их на практике – важный навык для любого Python-разработчика. 
