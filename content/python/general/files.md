## Работа с файлами: Открытие и закрытие

Файлы играют важную роль в программировании, позволяя сохранять данные и получать к ним доступ. Python предоставляет простой и мощный функционал для работы с файлами. В этой статье мы рассмотрим основы открытия и закрытия файлов, что является первым шагом в освоении работы с файлами в Python.

### Открытие файлов

Прежде чем начать работать с файлом, его необходимо открыть. В Python для этого используется функция `open()`. Она принимает два аргумента: путь к файлу и режим открытия.

**Путь к файлу** указывает, где находится файл на вашем компьютере. Это может быть абсолютный или относительный путь.

**Режим открытия** определяет, как вы будете взаимодействовать с файлом: чтение, запись, добавление и т.д. 

Вот некоторые из наиболее распространенных режимов открытия:

| Режим | Описание |
|---|---|
| `'r'` | Открытие файла для чтения (по умолчанию) |
| `'w'` | Открытие файла для записи. Если файл существует, его содержимое будет удалено. Если файл не существует, он будет создан. |
| `'a'` | Открытие файла для добавления. Данные будут записываться в конец файла. |
| `'x'` | Открытие файла для эксклюзивного создания. Если файл уже существует, будет ошибка. |
| `'t'` | Открытие файла в текстовом режиме (по умолчанию) |
| `'b'` | Открытие файла в бинарном режиме |

Например, чтобы открыть файл "example.txt" для чтения, используйте следующий код:

```python
file = open("example.txt", "r")
```

В этом примере мы открываем файл "example.txt" в режиме чтения (`"r"`) и сохраняем объект файла в переменной `file`.

### Закрытие файлов

После завершения работы с файлом его необходимо закрыть. Это освобождает ресурсы, занятые файлом, и гарантирует корректное сохранение данных. 

Для закрытия файла используется метод `close()`:

```python
file.close()
```

### Конструкция `with open()`

Альтернативным способом открытия и автоматического закрытия файлов является использование конструкции `with open()`. Этот подход считается более предпочтительным, так как он гарантирует, что файл будет закрыт в любом случае, даже если в процессе работы с ним возникнет ошибка.

Пример использования `with open()`:

```python
with open("example.txt", "r") as file:
    # Работа с файлом
```

В этом примере файл "example.txt" автоматически закроется после выхода из блока `with`. 

### Чтение из файла

После открытия файла для чтения можно получить доступ к его содержимому. В Python для этого существует несколько методов.

**Метод `read()`** считывает весь файл целиком и возвращает его содержимое в виде строки:

```python
with open("example.txt", "r") as file:
    content = file.read()
    print(content)
```

**Метод `readline()`** считывает одну строку из файла и возвращает ее в виде строки:

```python
with open("example.txt", "r") as file:
    line = file.readline()
    print(line)
```

**Метод `readlines()`** считывает все строки файла и возвращает их в виде списка строк:

```python
with open("example.txt", "r") as file:
    lines = file.readlines()
    for line in lines:
        print(line)
```

### Запись в файл

Чтобы записать данные в файл, его нужно открыть в режиме записи (`"w"`) или добавления (`"a"`). 

**Метод `write()`** записывает строку в файл:

```python
with open("example.txt", "w") as file:
    file.write("Это текст для записи в файл.\n")
```

### Пример: подсчет количества строк в файле

Давайте напишем программу, которая подсчитывает количество строк в текстовом файле.

```python
def count_lines(filename):
    """Подсчитывает количество строк в файле.

    Args:
        filename: Имя файла.

    Returns:
        Количество строк в файле.
    """
    with open(filename, "r") as file:
        lines = file.readlines()
        return len(lines)


filename = "example.txt"
line_count = count_lines(filename)
print(f"Файл '{filename}' содержит {line_count} строк.")
```

В этом примере мы определили функцию `count_lines()`, которая принимает имя файла в качестве аргумента, открывает файл для чтения, считывает все строки в список и возвращает длину этого списка. Затем мы вызываем эту функцию для файла "example.txt" и выводим результат.

---

Это базовые знания о работе с файлами в Python. В следующих разделах мы рассмотрим более продвинутые темы, такие как работа с различными форматами файлов, обработка ошибок и многое другое.
