## Шаблонизатор Jinja: создание динамических HTML-страниц

Flask, будучи микрофреймворком, не навязывает строгих правил организации представления данных. Однако, для удобного и эффективного создания динамических HTML-страниц рекомендуется использовать шаблонизатор. Flask по умолчанию интегрирован с мощным и гибким шаблонизатором Jinja.

Jinja позволяет внедрять динамический контент Python прямо в HTML-код, что упрощает разработку и поддержку веб-приложений. Вместо того чтобы генерировать HTML-код с помощью конкатенации строк, Jinja использует специальные конструкции, делая код более читаемым и удобным для сопровождения.

### Базовые возможности Jinja

#### 1. Отображение переменных

Jinja использует двойные фигурные скобки `{{ }}` для отображения переменных, переданных из Python-кода в шаблон.

**Пример:**

```python
from flask import Flask, render_template

app = Flask(__name__)

@app.route("/")
def index():
    name = "Alice"
    return render_template("index.html", username=name)

if __name__ == "__main__":
    app.run(debug=True)
```

```html
<!DOCTYPE html>
<html>
<head>
  <title>Jinja Example</title>
</head>
<body>
  <h1>Привет, {{ username }}!</h1> 
</body>
</html>
```

В этом примере функция `index()` передает переменную `name` со значением "Alice" в шаблон `index.html` с помощью `render_template()`. Jinja заменяет `{{ username }}` на значение переданной переменной, отображая "Привет, Alice!".

#### 2. Условия и циклы

Jinja поддерживает конструкции для управления потоком выполнения, такие как `if`, `for` и `else`. Они начинаются с `{% ... %}` и заканчиваются `{% end... %}`.

**Пример:**

```html
<!DOCTYPE html>
<html>
<head>
  <title>Jinja Example</title>
</head>
<body>
  <h1>Список пользователей:</h1>
  <ul>
    {% for user in users %}
      <li>{{ user }}</li>
    {% endfor %}
  </ul>
</body>
</html>
```

В этом примере, если переменная `users` содержит список имён, то Jinja перебирает его и для каждого элемента выводит тег `<li>` с именем пользователя.

#### 3. Фильтры

Фильтры позволяют изменять переменные перед их отображением. Они применяются с помощью символа `|` после переменной.

**Пример:**

```html
{{ message|upper }}
```

Этот код выводит значение переменной `message` заглавными буквами благодаря фильтру `upper`.

В Jinja доступно множество встроенных фильтров, например:

| Фильтр  | Описание                                       |
|---------|-------------------------------------------------|
| lower   | Преобразует строку к нижнему регистру           |
| upper   | Преобразует строку к верхнему регистру           |
| title   | Делает первую букву каждого слова заглавной  |
| length  | Возвращает длину строки или списка              |

### Наследование шаблонов

Jinja поддерживает наследование шаблонов, что позволяет создавать базовые шаблоны с общими элементами HTML-кода и наследовать их в дочерних шаблонах.

#### 1. Создание базового шаблона

Создайте файл `base.html` со следующим содержимым:

```html
<!DOCTYPE html>
<html>
<head>
  <title>{% block title %}{% endblock %}</title>
</head>
<body>
  <header>
    <h1>Мой сайт</h1>
  </header>
  <main>
    {% block content %}{% endblock %}
  </main>
  <footer>
    <p>© 2023</p>
  </footer>
</body>
</html>
```

Блоки `{% block ... %}` определяют области, которые могут быть переопределены в дочерних шаблонах.

#### 2. Создание дочернего шаблона

Создайте файл `index.html` и укажите базовый шаблон с помощью `{% extends ... %}`:

```html
{% extends "base.html" %}

{% block title %}Главная страница{% endblock %}

{% block content %}
  <h2>Добро пожаловать!</h2>
  <p>Это главная страница моего сайта.</p>
{% endblock %}
```

В этом примере шаблон `index.html` наследует шаблон `base.html` и переопределяет блоки `title` и `content`, добавляя собственное содержимое.

### Заключение

Шаблонизатор Jinja является мощным инструментом для создания динамических HTML-страниц в Flask. Он предоставляет простой и выразительный синтаксис для внедрения Python-кода в HTML, поддерживает на