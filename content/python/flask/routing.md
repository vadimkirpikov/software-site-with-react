## Маршрутизация: обработка URL-адресов и HTTP-методов

Маршрутизация - это механизм, связывающий URL-адреса с функциями Python в вашем приложении Flask. Проще говоря, маршрутизация определяет, какая функция будет вызываться при обращении пользователя к определенному URL-адресу. 

### Основы маршрутизации

Для определения маршрута используется декоратор `@app.route()`, который принимает в качестве аргумента шаблон URL-адреса. 

**Пример:**

```python
from flask import Flask

app = Flask(__name__)

@app.route("/")
def index():
    return "<h1>Привет, это главная страница!</h1>"

if __name__ == "__main__":
    app.run(debug=True)
```

В этом примере декоратор `@app.route("/")` связывает функцию `index()` с корневым URL-адресом (`/`). При обращении к корневому URL-адресу будет вызвана функция `index()`, которая вернет HTML-код с заголовком "Привет, это главная страница!".

### Переменные URL-адреса

Часто требуется создавать динамические маршруты, которые могут принимать переменные данные. Flask позволяет определять переменные URL-адреса, заключая их в угловые скобки (`<...>`) в шаблоне маршрута.

**Пример:**

```python
@app.route("/user/<username>")
def profile(username):
    return f"<h1>Профиль пользователя: {username}</h1>"
```

В этом примере переменная `username` будет передана функции `profile()` в качестве аргумента.  

### Типы данных переменных URL-адреса

Flask позволяет указывать типы данных для переменных URL-адреса, что может быть полезно для валидации данных.

| Тип данных | Описание |
|---|---|
| `string` |  По умолчанию. Принимает любые символы, кроме `/`.|
| `int` |  Целое число. |
| `float` |  Число с плавающей точкой. |
| `path` |  Подобно `string`, но может содержать `/`. |
| `uuid` |  UUID (Universally Unique Identifier). |

**Пример:**

```python
@app.route("/post/<int:post_id>")
def show_post(post_id):
    return f"<h1>Пост №{post_id}</h1>"
```

В этом примере переменная `post_id` будет преобразована в целое число. Если в URL-адресе будет передан некорректный тип данных, Flask вернет ошибку 404.

### HTTP-методы

HTTP-протокол определяет набор методов, которые указывают тип действия, которое клиент хочет выполнить с ресурсом. Flask позволяет указать, какие HTTP-методы поддерживает определенный маршрут. 

| Метод | Описание |
|---|---|
| `GET` | Запрос данных от сервера. |
| `POST` | Отправка данных на сервер для обработки. |
| `PUT` |  Замена существующего ресурса. |
| `DELETE` | Удаление ресурса. |
| `PATCH` |  Частичное обновление ресурса. |

Для указания поддерживаемых методов используется аргумент `methods` в декораторе `@app.route()`.

**Пример:**

```python
@app.route("/form", methods=["GET", "POST"])
def form():
    if request.method == "POST":
        # Обработка данных формы
        return "Форма отправлена!"
    else:
        # Отображение формы
        return """
            <form method="POST">
                <input type="text" name="name">
                <button type="submit">Отправить</button>
            </form>
        """
```

В этом примере маршрут `/form` обрабатывает запросы `GET` и `POST`. 

### Вывод

Маршрутизация - это основа любого веб-приложения Flask.  Понимание принципов маршрутизации, работы с переменными URL-адресами и HTTP-методами позволит вам создавать гибкие и функциональные веб-приложения.
