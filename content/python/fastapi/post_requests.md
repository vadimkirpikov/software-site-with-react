## Обработка POST-запросов и данных форм

В предыдущих разделах мы научились обрабатывать GET-запросы и получать данные из URL. Однако, для создания полноценных веб-приложений, нам необходимо уметь обрабатывать и POST-запросы, которые чаще всего используются для отправки данных на сервер. FastAPI предоставляет удобные инструменты для работы с такими запросами и извлечения данных из форм.

### Базовая обработка POST-запросов

Для начала, давайте создадим простой эндпоинт, который будет принимать POST-запрос и выводить сообщение о его получении.

```python
from fastapi import FastAPI

app = FastAPI()

@app.post("/submit")
async def handle_form():
  return {"message": "Форма успешно отправлена!"}
```

В этом примере мы использовали декоратор `@app.post()`, чтобы указать FastAPI, что данный эндпоинт предназначен для обработки POST-запросов по пути `/submit`. 

### Получение данных из форм

Теперь давайте разберемся, как получать данные, отправленные в теле POST-запроса. FastAPI позволяет легко получать доступ к данным формы с помощью класса `Form` из модуля `fastapi.data`.

```python
from fastapi import FastAPI, Form

app = FastAPI()

@app.post("/submit")
async def handle_form(name: str = Form(...), email: str = Form(...)):
  return {"message": f"Привет, {name}! Твой email: {email}"}
```

В этом примере мы объявили два параметра функции `handle_form`: `name` и `email`.  Мы использовали `Form(...)`, чтобы указать FastAPI, что эти данные нужно извлекать из формы, отправленной в теле POST-запроса. 

### Валидация данных формы

FastAPI позволяет легко валидировать данные, полученные из формы, используя стандартные типы данных Python. 

```python
from fastapi import FastAPI, Form
from pydantic import EmailStr

app = FastAPI()

@app.post("/submit")
async def handle_form(name: str = Form(...), email: EmailStr = Form(...)):
  return {"message": f"Привет, {name}! Твой email: {email}"}
```

В этом примере мы использовали тип данных `EmailStr` из модуля `pydantic` для валидации email адреса. FastAPI автоматически проверит, является ли введенное значение корректным email адресом.

### Вывод

В этом разделе мы рассмотрели основы обработки POST-запросов и данных форм в FastAPI. Мы научились создавать эндпоинты для обработки POST-запросов, получать данные формы и валидировать их с помощью стандартных типов данных Python и модуля `pydantic`. FastAPI делает работу с POST-запросами и формами простой и интуитивно понятной. 
